{"id": "b0cc5f21-477b-4178-8a91-5494b4c6a0f9", "text": "Q: What is the Python &quot;with&quot; statement designed for? A: <p>I seen a few answers that are using <code>contextmanager</code> and they or correct in the design patterns...</p>\n<pre class=\"lang-py prettyprint-override\"><code>@contextmanager\ndef func():\n    try:\n        yield var\n    finally:\n        del var\n</code></pre>\n<p>But...</p>\n<p>They have completely missing two very important key things about a <code>with</code> statement and this is the <code>__enter__</code>, and <code>__exit__</code> methods.</p>\n<p>What <code>contextmanager</code> is doing is wrapping the function in a class (<code>_GeneratorContextManager</code>) that has <code>__enter__</code>, <code>__exit__</code> methods.</p>\n<p><strong>A simplified example</strong> of what is going on internally with <code>contextmanager</code>:</p>\n<pre class=\"lang-py prettyprint-override\"><code>class _GeneratorContextManager:\n    def __init__(self, gen):\n        self.gen = gen\n\n    def __enter__(self):\n        return next(self.gen)\n\n\n    def __exit__(self, exc_type, exc_val, exc_tb):\n        try:\n            next(self.gen)\n        except StopIteration:\n            pass\n\n\ndef contextmanager(func):\n    def wrapper(*args, **kwargs):\n        return ContextManager(func, *args, **kwargs)\n    return wrapper\n\n\n@contextmanager\ndef func():\n    try:\n        yield var\n    finally:\n        del var\n</code></pre>\n<hr />\n<p>To answer the question, the <code>with</code> statement would be used with any class that uses the <code>__enter__</code>, <code>__exit__</code> methods, like the open function.</p>\n<p>The <code>open</code> function returns a <code>TextIOWrapper</code>, a child class inheriting the IO class that has both the <code>__enter__</code>, <code>__exit__</code> methods, and the point of <code>with open('file.txt') as f:</code> will call the <code>f.close()</code> for you when you are either done with the file, or an <strong>exception</strong> occurs.</p>\n<p><strong>Exceptions</strong> are one of the <strong>key points</strong> of a <code>with</code> statement.</p>\n<pre class=\"lang-py prettyprint-override\"><code>import itertools\nfrom threading import Thread, Event\nfrom time import sleep\n\nclass ThreadManager:\n    def __init__(self):\n        self.stop_event = Event()\n        self.thread = Thread(target = self.worker)\n\n    def __enter__(self):\n        self.thread.start()\n\n        return self\n\n    def __exit__(self, exc_type, exc_val, exc_tb):\n        # This is the &quot;Guarantee&quot;: Always runs, even on crash\n        print('\\nExiting and cleaning up code.\\n')\n        self.close()\n\n        # Return False to let any exceptions propagate (crash) normally\n        return False\n\n    def worker(self):\n        for i in itertools.count():  # infinite loop\n            if self.stop_event.is_set(): break\n\n            print(f&quot;Thread Manager: {i}&quot;)\n            sleep(1)\n\n    def close(self):\n        self.stop_event.set()\n        self.thread.join()\n\n\nwith ThreadManager():\n    sleep(3)\n    raise InterruptedError('Simulated crash! __exit__ will still run.')\n</code></pre>\n<p>If the class is run without a <code>with</code> statement you would end up with a orphaned thread that would continue to run, and the <code>ThreadManager.close()</code> method is never called.</p>\n<p>This same thing would happen with the <code>open</code> function if it is used outside of a <code>with</code> statement. The file would remain open after the main script has crashed and exited.</p>\n", "tags": ["python", "language-features", "with-statement"]}
{"id": "5d0fc0a6-5b33-4539-a530-1e18ee5dbadc", "text": "Q: Nuget connection attempt failed &quot;Unable to load the service index for source&quot; A: <p><strong>25/12/2025</strong> - Recently I ran to this issue first time and it was solved by switching to</p>\n<p>If you are using Visual Studio Toolbar : Tools -&gt; Options -&gt; Nuget Package Manager - Package Sources<br />\n<a href=\"https://i.sstatic.net/Ix0efJ5W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/Ix0efJ5W.png\" alt=\"enter image description here\" /></a></p>\n<p>!! Also !!<br />\n<strong><a href=\"https://www.nuget.org/api/v2\" rel=\"nofollow noreferrer\">https://www.nuget.org/api/v2</a></strong> from old one <a href=\"https://api.nuget.org/v3/index.json\" rel=\"nofollow noreferrer\">https://api.nuget.org/v3/index.json</a><br />\ninside of<br />\nC:\\Users\\<strong>&lt;YourUserAccount&gt;</strong>\\AppData\\Roaming\\NuGet</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;configuration&gt;\n  &lt;packageSources&gt;\n    &lt;add key=&quot;nuget.org&quot; value=&quot;https://www.nuget.org/api/v2&quot; /&gt;\n  &lt;/packageSources&gt;\n\n  &lt;packageRestore&gt;\n    &lt;add key=&quot;enabled&quot; value=&quot;True&quot; /&gt;\n  &lt;/packageRestore&gt;\n\n  &lt;bindingRedirects&gt;\n    &lt;add key=&quot;skip&quot; value=&quot;False&quot; /&gt;\n  &lt;/bindingRedirects&gt;\n\n  &lt;packageManagement&gt;\n    &lt;add key=&quot;format&quot; value=&quot;0&quot; /&gt;\n    &lt;add key=&quot;disabled&quot; value=&quot;False&quot; /&gt;\n  &lt;/packageManagement&gt;\n&lt;/configuration&gt;\n</code></pre>\n", "tags": [".net", "visual-studio", "nuget", "visual-studio-2022"]}
{"id": "2e3c8183-3428-4fa2-a6ea-69739b326bed", "text": "Q: Is it possible to change the font of a st.button in Streamlit? A: <p>There is another option to style your components in <code>streamlit</code>. For this we can create a `styles.css` file where we define you styling. You need to read that file on the top of your document within a style div.</p>\n<p><strong>app.py</strong></p>\n<pre><code>import streamlit as st\nimport pathlib\n\ndef load_css(file_path):\n    with open(file_path) as f:\n        st.html(f&quot;&lt;style&gt;{f.read()}&lt;/style&gt;&quot;)\n\ncss_path = pathlib.Path(&quot;styles.css&quot;)\nload_css(file_path=css_path)\n\n\nif st.button(&quot;Click me&quot;, use_container_width=True, key = &quot;your_button&quot;):\n    st.success(&quot;Clicked!&quot;)\n</code></pre>\n<p>You can see in the code above we load the css styling. Now we can we can create the css. To assign a styling to your component we can use the `key` argument of your button. In above example we call it &quot;your_button&quot;. In streamlit you can use this key to define your styling like this `.st-key-your_button`.</p>\n<p><strong>styles.css</strong></p>\n<pre><code>.st-key-your_button button p {\n    font-family: &quot;Courier New&quot;, sans-serif;\n    font-size: 20px;\n}\n</code></pre>\n<p>Output:</p>\n<p><a href=\"https://i.sstatic.net/IxsuAnWk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/IxsuAnWk.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see we changed the font.</p>\n", "tags": ["python", "html", "css", "streamlit"]}
