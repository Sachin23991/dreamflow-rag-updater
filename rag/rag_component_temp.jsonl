{"id": "400afab0-c476-44e8-b22b-62fb1cb1d92b", "text": "Q: Setting a variable in batch using powershell A: <pre><code>setlocal EnableExtensions &amp; for /F &quot;usebackq delims=&quot; %%G IN (\\`powershell &quot;((Get-date).AddDays(-1)).ToString('yyyyMMdd')&quot;\\`) do set yesterday=%%G\n</code></pre>\n<p>If batch file extensions are enabled by default on the system, <code>setlocal EnableExtensions &amp;</code> may be omitted.</p>\n", "tags": ["powershell", "batch-file", "environment-variables", "powershell-2.0"]}
{"id": "2104dd21-4fdc-4711-a427-6952ed7ef4ca", "text": "Q: Interpolate coordinates based on time in R A: <p>You might combine the two and use <code>zoo::na.approx()</code> to get the positions that are linear interpolations of values on either side. The example data is not particularly demonstrative here, though, since the lon/lat values are uniform.</p>\n<pre><code>library(tidyverse)\ncc_tdrx |&gt;\n  pivot_longer(-dive, values_to = &quot;timestamp_NZDT&quot;) |&gt;\n  bind_rows(cc_gps_reroute_join) |&gt;\n  mutate(across(lon:lat, ~zoo::na.approx(.x, timestamp_NZDT))) |&gt;\n  filter(!is.na(dive))\n</code></pre>\n", "tags": ["r", "coordinates", "interpolation"]}
{"id": "81bcd248-9e7e-41cf-b3a4-1b9f192821d7", "text": "Q: Can Telegram bot detect a new member joining a channel event? A: <p>\u250f\u2501\u2501\u2501\u2501\u2501 \u26a0\ufe0f \ud835\uddd4\ud835\uddd6\ud835\udde7\ud835\udddc\ud835\udde2\ud835\udde1 \ud835\udde5\ud835\uddd8\ud835\udde4\ud835\udde8\ud835\udddc\ud835\udde5\ud835\uddd8\ud835\uddd7 \u26a0\ufe0f \u2501\u2501\u2501\u2501\u2501\u2513</p>\n<p>Please join both update channels to use this bot.</p>\n<p>\ud83d\udc49 Once joined, click the 'Check Joined' button below</p>\n", "tags": ["telegram", "telegram-bot", "python-telegram-bot", "telegram-webhook", "node-telegram-bot-api"]}
{"id": "dcbeb144-c228-4655-825a-9245c53683d0", "text": "Q: how to store and call variables in a batch script from command prompt in Windows A: <p>Thank you everyone, with those comments I got it to work, here is the (probably dirty by your standards) solution:</p>\n<p>Basically use <code>!!</code> instead of <code>%%</code> to avoid delayed expansion, while also redefining the replace string at each level, and then using rename in the end instead of <code>ren</code> because that didn't seem to work with <code>!replace3!</code> inside of the argument.</p>\n<pre><code>setlocal enabledelayedexpansion\n@echo off\n\nset &quot;pattern=test.txt&quot;\nfor /d %%D in (*) do (\n    cd %%~nxD\n    set &quot;replace=%%~nxD_%pattern%&quot;\n    for /d %%D in (*) do (      \n        set &quot;replace2=!replace!&quot;\n        cd %%~nxD\n        for %%I in (*.txt) do (\n            set &quot;file=%%~I&quot;\n            set &quot;replace3=!replace2!&quot;\n            echo !replace3!\n                rename %pattern% !replace3! \n        )   \n    )\n    cd ..\n)\ncd ..\n</code></pre>\n", "tags": ["batch-file", "command-prompt"]}
{"id": "886867a9-0fc1-4f45-bab9-85c9f3d635bc", "text": "Q: How to resolve conflicting versions of the same library required by two dependencies in Conan 2.0? A: <p>Thank you very match. Override works well</p>\n", "tags": ["c++", "conan", "conan-2", "conanfile"]}
{"id": "eeb216d0-1a2e-4050-b901-f8354ba4222e", "text": "Q: Ansible: Dynamic Variables produce CapturedExceptionMarker in Ansible &gt;=2.19 A: <p>This is, for now, a partial answer as <a href=\"https://stackoverflow.com/questions/79853027/ansible-dynamic-variables-produce-capturedexceptionmarker-in-ansible-2-19#comment140914486_79853027\">I kind of fell like there might be something else happening in your question</a>.</p>\n<hr />\n<p>What I can say for sure already is that there is something fundamentally wrong in your actual solution: the usage of the magic variable <code>vars</code>.<br />\n<code>vars</code> is actually an implementation detail of Ansible and it was never meant to be used, nor exposed.<br />\nFurthermore, it will fail on you in a near future as Ansible has already plans to remove it.</p>\n<blockquote>\n<p>Short history, <code>vars</code> is a leftover from previous code that used it to pass variables to template, it was never intended for external use and most of the time didn't template anything.</p>\n<p>Unrelated changes allowed it to template 'sometimes' but this was never on purpose, the only reason it was not removed is because some people relied on it, that had discovered by looking at the code and/or other people that had already been using it. Even though it has been our intention for a long time to deprecate and remove the <code>vars</code> construct, lack of a good way to trigger a runtime message has kept us from doing so.</p>\n<p>We created 2 alternatives via lookups <code>varnames</code> and <code>vars</code>, which might not be as flexible as a dict but also would not chew up memory for unneeded access, since most users just want to match a small subset of existing variables.</p>\n</blockquote>\n<p><em><sup>Source: <a href=\"https://github.com/ansible/ansible/issues/74904#issuecomment-854137949\" rel=\"nofollow noreferrer\">https://github.com/ansible/ansible/issues/74904#issuecomment-854137949</a></sup></em></p>\n<p>So, as raised by Brian Coca in this issue comment, you should rather use a couple of lookup <code>varnames</code> and <code>vars</code>.</p>\n<p>There is actually <a href=\"https://docs.ansible.com/projects/ansible/latest/collections/ansible/builtin/vars_lookup.html#examples\" rel=\"nofollow noreferrer\">an example of this in the <code>vars</code> lookup</a>, although they did not provide any example output there:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>- name: show values from variables found via varnames (note &quot;*&quot; is used to dereference the list to a 'list of arguments')\n  debug: msg=&quot;{{ q('vars', *q('varnames', 'ansible_play_.+')) }}&quot;\n</code></pre>\n<p>In your specific case a working example should be:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>base_scripts_usr_local_bin: &gt;-\n  {{\n    base_scripts_usr_local_bin_default | default([]) +\n    base_scripts_usr_local_bin_add | default([]) +\n    query(\n      'ansible.builtin.vars',\n      *query(\n        'ansible.builtin.varnames', \n        '^base_scripts_usr_local_bin_add_.+'\n      )\n    )\n  }}\n</code></pre>\n<hr />\n<p>And if you didn't know already, the difference between <code>query</code> and <code>lookup</code> is that the former will return you a list when the later will return you a string where all your values are comma separated.</p>\n<p>As a matter of fact, <code>query('some_lookup')</code> is strictly equivalent to <code>lookup('some_lookup', wantlist=True)</code>.</p>\n<p>For further reading, see <a href=\"https://docs.ansible.com/projects/ansible/latest/plugins/lookup.html#forcing-lookups-to-return-lists-query-and-wantlist-true\" rel=\"nofollow noreferrer\">Forcing lookups to return lists: <code>query</code> and <code>wantlist=True</code></a>.</p>\n<hr />\n<p>For exemple, the task:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>- debug:\n    msg:\n      base_scripts_usr_local_bin: &gt;-\n        {{\n          base_scripts_usr_local_bin_default | default([]) +\n          base_scripts_usr_local_bin_add | default([]) +\n          query(\n            'ansible.builtin.vars',\n            *query(\n              'ansible.builtin.varnames',\n              '^base_scripts_usr_local_bin_add_.+'\n            )\n          )\n        }}\n  vars:\n    base_scripts_usr_local_bin_add_webserver: foo\n    base_scripts_usr_local_bin_add_database: bar\n    base_scripts_usr_local_bin_add_desktop: baz\n    base_scripts_usr_local_bin_add_somethingelse: qux\n</code></pre>\n<p>will output:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>ok: [localhost] =&gt; {\n    &quot;msg&quot;: {\n        &quot;base_scripts_usr_local_bin&quot;: [\n            &quot;foo&quot;,\n            &quot;bar&quot;,\n            &quot;baz&quot;,\n            &quot;qux&quot;\n        ]\n    }\n}\n</code></pre>\n", "tags": ["ansible"]}
{"id": "2dd5ffec-6eb1-4a4f-925b-17d7f326cd67", "text": "Q: How to check if CodeIgniter&#39;s insert() method was successful A: <p>Personally I'd avoid using the</p>\n\n<pre><code>$this-&gt;db-&gt;affected_rows()\n</code></pre>\n\n<p>method for an insert. SQLServer doesn't return a value for an insert, so taking the return value from</p>\n\n<pre><code>$this-&gt;db-&gt;insert(...)\n</code></pre>\n\n<p>would be more reliable. I'd reserve affected_rows for checking \"UPDATE\"s  :)</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>The same thing applies for</p>\n\n<pre><code>$this-&gt;db-&gt;delete()\n</code></pre>\n\n<p>The affected_rows() function doesn't work in SQL Server on a delete...</p>\n", "tags": ["php", "codeigniter", "insert", "query-builder"]}
{"id": "2e0d828c-cb86-4535-b55f-b9bf4e6961f5", "text": "Q: How to sanity check a date in Java A: <h1>java.time</h1>\n<p>With the <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Date and Time API</a> (<a href=\"https://docs.oracle.com/en/java/javase/25/docs/api/java.base/module-summary.html\" rel=\"nofollow noreferrer\">java.time</a> classes) built into Java 8 and later, you can use the <a href=\"https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/time/LocalDate.html\" rel=\"nofollow noreferrer\"><code>LocalDate</code></a> class.</p>\n<pre><code>public static boolean isDateValid(int year, int month, int day) {\n    try {\n        LocalDate.of(year, month, day);\n    } catch (DateTimeException e) {\n        return false;\n    }\n    return true;\n}\n</code></pre>\n<p>Here's a test class that identifies invalid and valid dates, including leap days (February 29th):</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.DateTimeException;\nimport java.time.LocalDate;\n\npublic class DateTests {\n  // Year-Month-Day\n  record YMD(int year, int month, int day) {}\n\n  private static YMD[] getInvalidDates() {\n    return new YMD[] {\n        new YMD(2025, 2, 29), // 2025 was not a leap year \u2192 February 29 is invalid\n        new YMD(2023, 13, 10), // There are only 12 months\n        new YMD(2023, 4, 31), // April has only 30 days\n        new YMD(2008, 2, 31), // February never has 31 days\n        new YMD(2023, 6, 0), // Days start from 1\n        new YMD(2023, 0, 5), // Months start from 1\n        new YMD(2023, -3, 15), // Negative months are invalid\n        new YMD(2023, 7, -1), // Negative days are invalid\n        new YMD(1000000000, 1, 1), // Dates after the maximum date (LocalDate.MAX) are invalid\n        new YMD(-1000000000, 12, 31), // Dates before the minimum date (LocalDate.MIN) are invalid\n    };\n  }\n\n  private static YMD[] getValidDates() {\n    return new YMD[] {\n        new YMD(0, 5, 15), // Year zero is valid: https://en.wikipedia.org/wiki/Year_zero\n        new YMD(2000, 2, 29), // 2000 was a leap year \u2192 February 29 is valid\n        new YMD(2400, 2, 29), // 2400 will be a leap year \u2192 February 29 is valid\n        new YMD(999999999, 12, 31), // The maximum date (LocalDate.MAX) is valid\n        new YMD(-999999999, 1, 1) // The minimum date (LocalDate.MIN) is valid\n    };\n  }\n\n  public static void main(String[] args) {\n    System.out.println(&quot;Java version: &quot; + System.getProperty(&quot;java.version&quot;));\n    for (YMD ymd : getInvalidDates()) {\n      if (isDateValid(ymd.year, ymd.month, ymd.day)) {\n        System.err.println(&quot;Error: Date &quot; + ymd + &quot; should be invalid, but was considered valid.&quot;);\n      } else {\n        System.out.println(&quot;Correctly identified invalid date: &quot; + ymd);\n      }\n    }\n    for (YMD ymd : getValidDates()) {\n      if (!isDateValid(ymd.year, ymd.month, ymd.day)) {\n        System.err.println(&quot;Error: Date &quot; + ymd + &quot; should be valid, but was considered invalid.&quot;);\n      } else {\n        System.out.println(&quot;Correctly identified valid date: &quot; + ymd);\n      }\n    }\n  }\n\n  public static boolean isDateValid(int year, int month, int day) {\n    try {\n      LocalDate.of(year, month, day);\n    } catch (DateTimeException e) {\n      return false;\n    }\n    return true;\n  }\n}\n</code></pre>\n<p>Tested on Arch Linux with Java 21.0.9.</p>\n", "tags": ["java", "validation", "calendar", "date"]}
