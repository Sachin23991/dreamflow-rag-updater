{"id": "08d80025-b851-4070-a773-7e4e113fe671", "text": "Q: How can I simulate an EOF? A: <p>First, press: <kbd>Ctrl</kbd> + <kbd>X</kbd>, and next: <kbd>Ctrl</kbd> + <kbd>D</kbd></p>\n", "tags": ["c", "eof", "getchar", "kernighan-and-ritchie"]}
{"id": "b3bb4ef8-bb06-46a9-bbaa-d5fa84ae6bd1", "text": "Q: Apache Camel not propagating traceparent in Open Telemetry A: <p>I'm sending messages into a kafka topic in this way</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nApplicationRunner runner(KafkaTemplate&lt;String, String&gt; template) {\n  return _ -&gt; {\n      log.info(&quot;Waiting 5 seconds&quot;);\n      Thread.sleep(5000); // wait for the consumer to be ready\n      log.info(&quot;Sending test message to topic1&quot;);\n      log.info(&quot;Sending message with traceparent header: {}&quot;, &quot;00-mytrace-b7ad6b7169203331-01&quot;.getBytes(StandardCharsets.UTF_8));\n    \n      Message&lt;String&gt; message = MessageBuilder.withPayload(&quot;test&quot;)\n            .setHeader(KafkaHeaders.TOPIC, &quot;topic1&quot;)\n            .setHeader(&quot;traceparent&quot;, &quot;00-mytrace-b7ad6b7169203331-01&quot;)\n            .build();\n\n      template.send(message);\n    };\n}\n</code></pre>\n<p>This is the consuming Camel route</p>\n<pre class=\"lang-java prettyprint-override\"><code>from(kafka(&quot;topic1&quot;).brokers(&quot;localhost:9092&quot;).groupId(&quot;myGroup&quot;))\n  .log(&quot;Message received from Kafka : ${body}&quot;)\n  .log(&quot;    on the topic ${headers[kafka.TOPIC]}&quot;)\n  .log(&quot;    on the partition ${headers[kafka.PARTITION]}&quot;)\n  .log(&quot;    with the offset ${headers[kafka.OFFSET]}&quot;)\n  .log(&quot;    with the key ${headers[kafka.KEY]}&quot;)\n  .log(&quot;    with the header source ${headers[kafka.HEADERS]}&quot;);\n</code></pre>\n<p>This is the message header produced</p>\n<p><a href=\"https://i.sstatic.net/lZ7Owx9F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/lZ7Owx9F.png\" alt=\"enter image description here\" /></a></p>\n<p>This is the record header consumed by Camel</p>\n<p><a href=\"https://i.sstatic.net/pBCqm95f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/pBCqm95f.png\" alt=\"enter image description here\" /></a></p>\n<p>Content is the same (same byte array content)</p>\n<p><a href=\"https://i.sstatic.net/nwFqDdPN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/nwFqDdPN.png\" alt=\"enter image description here\" /></a></p>\n", "tags": ["apache-kafka", "apache-camel", "open-telemetry"]}
{"id": "f5b40265-32db-41c7-b8a0-d72180f2f931", "text": "Q: Ownership Manager and Google Marketing A: <p>Did you mean to ask a question here? As it stands, this post is likely going to be closed and deleted. If that is not what you intended for it, then please edit it to add more details on what you're asking from the community here.</p>\n", "tags": ["firebase", "firebase-realtime-database", "facebook-marketing-api", "eclipse-gemini", "google-remarketing-audience"]}
{"id": "3d5d9156-5fed-4181-bbf8-1a27fd38e38e", "text": "Q: Migrate MSTest v3 to v4 breaks Playwright Tests A: <p>I'm unable to repro the problem at my end - provided I use the <code>MSTest</code> meta-package as documented in the readme me.</p>\n<p>Try this:</p>\n<ol>\n<li>Remove all your existing <code>&lt;PackageReference&gt;</code> elements from your Test project <code>.csproj</code>.\n<ul>\n<li>Ensure you don't have any <code>.props</code>/<code>.targets</code> files imported into your project inadvertently, as they can carry <code>&lt;PackageReference&gt;</code> elements of their own.\n<ul>\n<li>e.g. do you have any <code>Directory.Build.props</code> or <code>Directory.Build.targets</code> files in your solution's filesystem tree?</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- nuke this: --&gt;\n  &lt;ItemGroup&gt;\n    &lt;PackageReference Include=&quot;Microsoft.NET.Test.Sdk&quot; Version=&quot;18.0.1&quot; /&gt;\n    &lt;PackageReference Include=&quot;Microsoft.Playwright.MSTest&quot; Version=&quot;1.57.0&quot; /&gt;\n    &lt;PackageReference Include=&quot;MSTest.TestAdapter&quot; Version=&quot;3.11.1&quot; /&gt;\n    &lt;PackageReference Include=&quot;MSTest.TestFramework&quot; Version=&quot;3.11.1&quot; /&gt;\n  &lt;/ItemGroup&gt;\n</code></pre>\n<ol start=\"2\">\n<li>Use this instead:</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- use this: --&gt;\n  &lt;PropertyGroup&gt;\n    &lt;TargetFramework&gt;net9.0&lt;/TargetFramework&gt;\n    &lt;EnablePlaywright&gt;true&lt;/EnablePlaywright&gt;\n  &lt;/PropertyGroup&gt;\n\n  &lt;ItemGroup&gt;\n    &lt;PackageReference Include=&quot;MSTest&quot; Version=&quot;4.0.2&quot; /&gt;\n  &lt;/ItemGroup&gt;\n</code></pre>\n<ul>\n<li>The <code>MSTest</code> meta-package ensures you'll always have the correct references to the myriad <code>MSTest.Test{Framework|Platform|Adapter|Runner}</code> packages and assemblies.</li>\n<li>It also includes <code>Microsoft.Testing.Extensions.CodeCoverage</code> and <code>Microsoft.Testing.Extensions.TrxReport</code> but you can exclude those if you actively don't want them.</li>\n<li><code>&lt;EnablePlaywrite&gt;</code> <a href=\"https://learn.microsoft.com/en-us/dotnet/core/testing/unit-testing-mstest-sdk#test-with-playwright\" rel=\"nofollow noreferrer\">is documented here for MSTest</a>.</li>\n</ul>\n<p>I appreciate this isn't really an explanation - more of a solution-without-an-explanation - I do have some speculative ideas of my own about some strange interactions involving the MSBuild properties <code>&lt;EnableMSTestRunner&gt;true&lt;/EnableMSTestRunner&gt;</code> and <code>&lt;TestingPlatformDotnetTestSupport&gt;true&lt;/TestingPlatformDotnetTestSupport&gt;</code> because these concern VSTest vs. MSTest vs. TestPlatform (and that's where I get lost...), so I think <em>keep it simple</em> by removing any-and-all extra properties/references unless you know they're part of MSTest and not VSTest or anything else.</p>\n<hr />\n<p>Alternatively:</p>\n<p>Change your Test project's <code>.csproj</code> to this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Project Sdk=&quot;MSTest.Sdk/4.0.2&quot;&gt;\n\n  &lt;PropertyGroup&gt;\n    &lt;TargetFramework&gt;net9.0&lt;/TargetFramework&gt;\n    &lt;EnablePlaywright&gt;true&lt;/EnablePlaywright&gt;\n\n    &lt;!--\n        * The rest of your MSBuild properties go here, e.g. &lt;LangVersion&gt;.\n        * But not any test-related properties unless you know they're absolutely necessary, e.g. `EnableMSTestRunner` and `TestingPlatformDotnetTestSupport`\n    --&gt;\n\n    &lt;TestingPlatformShowTestsFailure&gt;true&lt;/TestingPlatformShowTestsFailure&gt;\n  &lt;/PropertyGroup&gt;\n\n   &lt;!-- No PackageReferences needed for a simple test project. --&gt;\n\n&lt;/Project&gt;\n\n</code></pre>\n", "tags": ["c#", ".net", "playwright", "mstest"]}
{"id": "06379e7a-2d4b-49e6-82dd-5a18b0137ed5", "text": "Q: MECM script on new laptop rename and add domain user as with local admin permission on the laptop A: <p>There are few major observations that I could see. Your script calls <code>exit 0</code> twice before Phase 2. In PowerShell, <code>exit</code> ends the script (and in TS will end the step), so everything after that line wont run at all. Kindly remove those <code>exit</code> lines or split Phase 2 into its own TS step.</p>\n<p>Rename-Computer <strong>requires a reboot</strong> to apply, and for domain-joined machines it typically needs <strong>domain credentials</strong> (<code>-DomainCredential</code>) to update the AD computer object cleanly. Doing a rename after join during an OSD can desynchronize the local name vs. AD unless you handle credentials and the subsequent reboot correctly. The cmdlet documentation calls this out, including the <code>-DomainCredential</code> requirement and that a restart is often needed.</p>\n<p>I would suggest you to go through <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.management/rename-computer?view=powershell-7.5\" rel=\"nofollow noreferrer\">Rename-Computer</a> clearly and understands the facets.</p>\n<p>ConfigMgr\u2019s <strong>Apply Windows Settings</strong> step honors the <strong><code>OSDComputerName</code></strong> TS variable and bakes the name into <code>unattend.xml</code> during setup itself. Its the most reliable way you can possible get to set the hostname during imaging - set <code>OSDComputerName</code> early and let the step apply it.</p>\n<p>Important to note that NetBIOS computer names have a max of 15 characters and will not allow certain specific characters. Follow <a href=\"https://learn.microsoft.com/en-us/troubleshoot/windows-server/active-directory/naming-conventions-for-computer-domain-site-ou\" rel=\"nofollow noreferrer\">Naming conventions in Active Directory for computers, domains, sites, and OUs</a></p>\n<p>Place a &quot;Run PowerShell Script&quot; step (in Full OS right before <strong>Apply Windows Settings</strong>) that:</p>\n<ul>\n<li><p>Reads your TS variables (<code>FirstName</code>, <code>LastName</code>, <code>CountryCode</code>).</p>\n</li>\n<li><p>Builds the name (<code>first two letters</code> + <code>first two letters</code> + <code>country code</code> \u2192 <code>jodomrt</code> for John Doe / Mauritius).</p>\n</li>\n<li><p>Trims to 15 chars, lowercases, and strips invalid characters.</p>\n</li>\n<li><p>Sets <strong><code>OSDComputerName</code></strong> via the <strong><code>Microsoft.SMS.TSEnvironment</code></strong> COM object.</p>\n</li>\n</ul>\n<p>Then Add the domain user to local Administrators after first reboot. Use a separate \u201cRun PowerShell Script\u201d step that executes after the OS is up and the machine is joined. The command <code>Add-LocalGroupMember</code> supports adding <code>DOMAIN\\username</code> to Administrators. You should ideally manage local admin membership via <strong>Group Policy Preferences (Local Users and Groups)</strong>.</p>\n<p><em>Set <code>OSDComputerName</code> (pre-Apply Windows Settings)</em></p>\n<pre><code>$log = 'C:\\Windows\\Temp\\Onboard.log'\nfunction Log($m){ Add-Content -Path $log -Value &quot;$(Get-Date -Format 'yyyy-MM-dd HH:mm:ss') - $m&quot; }\n\n$tsEnv = New-Object -ComObject Microsoft.SMS.TSEnvironment\n\n$FirstName   = $tsEnv.Value('FirstName')\n$LastName    = $tsEnv.Value('LastName')\n$CountryCode = $tsEnv.Value('CountryCode')\n\n\nif ([string]::IsNullOrWhiteSpace($FirstName))   { $FirstName   = 'John' }\nif ([string]::IsNullOrWhiteSpace($LastName))    { $LastName    = 'Doe'  }\nif ([string]::IsNullOrWhiteSpace($CountryCode)) { $CountryCode = 'mrt'  }\n\nfunction SafeFirstTwo([string]$s){ if ([string]::IsNullOrEmpty($s)) { '' } else { $s.Substring(0, [Math]::Min(2,$s.Length)) } }\nfunction Sanitize([string]$s){\n# Remove invalid NetBIOS chars: \\ / : * ? &quot; &lt; &gt; | , and spaces; to lower; trim length 15\n    $s = $s.ToLower() -replace '[\\\\\\/:\\*\\?&quot;&lt;&gt;\\|\\, ]',''\n    if ($s.Length -gt 15) { $s = $s.Substring(0,15) }\n    return $s\n}\n\n$fn = SafeFirstTwo $FirstName\n$ln = SafeFirstTwo $LastName\n$newName = Sanitize &quot;$fn$ln$CountryCode&quot;\n\nLog &quot;Computed OSDComputerName: $newName&quot;\n$tsEnv.Value('OSDComputerName') = $newName\nLog &quot;Set TS variable OSDComputerName to $newName&quot;\n</code></pre>\n<p>The step writes the name into <code>unattend.xml</code> via Apply Windows Settings, so the device is named correctly before domain join. No post\u2011join rename needed at all.</p>\n<p><em>After the \u201cSetup Windows and ConfigMgr\u201d + \u201cJoin Domain or Workgroup\u201d steps and a Restart Computer step.</em></p>\n<pre><code>$log = 'C:\\Windows\\Temp\\Onboard-Phase2.log'\nfunction Log($m){ Add-Content -Path $log -Value &quot;$(Get-Date -Format 'yyyy-MM-dd HH:mm:ss') - $m&quot; }\n\n$tsEnv = New-Object -ComObject Microsoft.SMS.TSEnvironment\n$DomainUser = $tsEnv.Value('DomainUser')   # example: &quot;domain.com\\user&quot;\n\nLog &quot;Starting Phase 2&quot;\n\nif ([string]::IsNullOrWhiteSpace($DomainUser)) {\n    Log &quot;No DomainUser provided; skipping local admin step&quot;\n} else {\n    try {\n        Log &quot;Adding $DomainUser to local Administrators&quot;\n        Add-LocalGroupMember -Group 'Administrators' -Member $DomainUser -ErrorAction Stop\n        Log &quot;Added $DomainUser to local Administrators&quot;\n    } catch {\n        Log &quot;Failed to add $DomainUser: $_&quot;\n    }\n}\n\ntry {\n    Log &quot;Running gpupdate /force&quot;\n    gpupdate /force | Out-Null\n    Log &quot;gpupdate completed&quot;\n} catch {\n    Log &quot;gpupdate failed: $_&quot;\n}\n\nLog &quot;Phase 2 complete&quot;\n</code></pre>\n<p><em>Add-LocalGroupMember supports <strong>domain principals</strong> when the machine is domain joined. Its the supported way to add to the local <strong>Administrators</strong> group</em></p>\n<p>Even though you log \u201crename succeeded,\u201d <strong>Windows only applies it after reboot</strong>. When done late in OSD, the machine might still join the domain under the old name. Setting <strong><code>OSDComputerName</code></strong> avoids this race entirely. Hope that it will give you clarity.</p>\n", "tags": ["powershell", "rename", "sccm", "automated-deploy"]}
