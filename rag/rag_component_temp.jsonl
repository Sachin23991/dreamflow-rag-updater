{"id": "17485858-3d26-41bb-8a7d-eda5f6a37fab", "text": "Q: How to install Valgrind on macOS Catalina (10.15) with Homebrew? A: <p>See <a href=\"https://github.com/LouisBrunner/valgrind-macos/\" rel=\"nofollow noreferrer\">https://github.com/LouisBrunner/valgrind-macos/</a>.</p>\n<p>Either try</p>\n<pre><code>brew tap LouisBrunner/valgrind\nbrew install --HEAD LouisBrunner/valgrind/valgrind\n</code></pre>\n<p>Or compile it from the source, if the above method doesn't work. (But they should have <a href=\"https://github.com/LouisBrunner/valgrind-macos/issues/5\" rel=\"nofollow noreferrer\">fixed</a> the above method just recently.)</p>\n<pre><code>git clone https://github.com/LouisBrunner/valgrind-macos.git\ncd valgrind-macos\n./autogen.sh\n./configure --prefix=/where/you/want/it/installed --enable-only64bit\nmake \nsudo make install\n</code></pre>\n", "tags": ["macos", "homebrew", "valgrind", "macos-catalina", "memory-leak-detector"]}
{"id": "2bf581bb-51e8-4464-860a-93bf6d724784", "text": "Q: LocalProtocolError( h11._util.LocalProtocolError: can&#39;t handle event type Response when role=SERVER and state=MUST_CLOSE A: <p>I had a similar issue on a <code>FastAPI + Uvicorn</code> server. The issue was that one of my fields received a Base64 encoded JSON, that sometimes became too long.</p>\n<p>Moving the field to a form-like field fixed the issue:</p>\n<h3>Before</h3>\n<pre class=\"lang-py prettyprint-override\"><code># app.py\n\n@app.get(&quot;/url&quot;)\nasync def my_endpoint(field: str):\n    instance = MyModel.model_validate_json(base64.b64decode(data))\n    ...\n</code></pre>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!--Jinja template here for the base64-encoded value, just as an example--&gt;\n&lt;a href=&quot;/url?field={{base64_encoded_field}}&quot;&gt;Endpoint&lt;/a&gt;\n</code></pre>\n<blockquote>\n<p>N.B.:</p>\n<p>This way to make APIs is crude, and, as such, bit me in the donkey.</p>\n</blockquote>\n<h3>After</h3>\n<pre class=\"lang-py prettyprint-override\"><code># app.py\n\n@app.post(&quot;/url&quot;)\nasync def my_endpoint(field: str = Form()):\n    instance = MyModel.model_validate_json(base64.b64decode(data))\n    ...\n</code></pre>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!--Jinja template here for the base64-encoded value, just as an example--&gt;\n&lt;form method=&quot;post&quot; action=&quot;/download/json&quot; style=&quot;display: inline;&quot;&gt;\n      &lt;input type=&quot;hidden&quot; value=&quot;{{base64_encoded_field}}&quot; name=&quot;data&quot;&gt;\n      &lt;input type=&quot;submit&quot; name=&quot;Endpoint&quot; value=&quot;JSON&quot; class=&quot;my_default_a_style&quot;&gt;\n&lt;/form&gt;\n</code></pre>\n", "tags": ["python", "streaming", "fastapi"]}
{"id": "a4ac5c33-08ba-4f07-ba30-c65a474e2bfb", "text": "Q: How to re-sign an iOS app for App Store distribution? A: <p>I've had trouble doing this before.  Setting the new profile and rebuilding in Xcode seems to work, but just using the command line resigning an existing app after editing the plist with the bundle id in it was giving me grief.  I suspect that it's the embedded profile that is placed into the app when it's built, but honestly, I'm not sure.</p>\n\n<p>I see you were having trouble with entitlements - note that some of these are set in the dev profile (push notifications, IAP, and maybe iCloud) and have to be correct there.</p>\n\n<p>Second tip is that Xcode caches the dev profile in the project (somewhere) so even if you delete one from the mobile profiles folder inside your Library folder you'll have to actually go change it in the target settings in the Xcode project or it might still use the old one (grrr).</p>\n", "tags": ["ios", "app-store", "code-signing"]}
