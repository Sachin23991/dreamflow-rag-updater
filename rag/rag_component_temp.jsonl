{"id": "f5fe8f2e-18db-4132-ba65-4cd2d279a82e", "text": "Q: Collatz conjecture with C (range 1-100,000,000) maximum loops A: <p><strong>Bug</strong></p>\n<p><code>3 * First_num + 1</code> readily overflows.  Need more work (a wider type).  <a href=\"https://stackoverflow.com/questions/77335830/collatz-conjecture-with-c-range-1-100-000-000-maximum-loops/77335960#comment136337802_77335830\">@Eric Postpischil</a></p>\n<p><strong>Drop debug output</strong></p>\n<pre><code>for (i;i&lt;=Second_num;i++){\n  // printf(&quot;The num %u took the most %ld!!!\\n&quot;,i,collatz(i))\n</code></pre>\n<blockquote>\n<p>Any ideas on how to improve the algorithm because after 10,000,000 the program takes too long to complete</p>\n</blockquote>\n<p><strong>Avoid re-calculation</strong></p>\n<pre><code>// if ((collatz(i)) &gt;= max) {\n//   max = collatz(i);\nunsigned long cc = collatz(i);\nif (cc &gt;= max) {                                                                                                                                                                                                               \n  max = cc\n</code></pre>\n<p><strong>Save prior work</strong></p>\n<p>(or at least some of it.)</p>\n<pre><code>#define PRIOR_N (UINT32_C(100)*1000*1000)\nstatic uint32_t prior[PRIOR_N];\n\n// This function finds how many times it took for a number to reach 1\nunsigned long int collatz(uint32_t First_num) {\n  if (First_num &lt; PRIOR_N &amp;&amp; prior[First_num] &amp;&amp; First_num &gt; 1) {\n    return prior[First_num];\n  }\n  ...\n\n</code></pre>\n<hr />\n<p>After re-work to prevent overflow:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;limits.h&gt;\n\n// Use matching bit math.  Note unsigned may be 16-bit.\n// #define PRIOR_N (100u*1000*1000)\n#define PRIOR_N (UINT64_C(100)*1000*1000)\nstatic uint32_t prior[PRIOR_N];\n\n// This function finds how many times it took for a number to reach 1\nunsigned collatz(uint64_t n) {\n  if (n &lt; PRIOR_N &amp;&amp; prior[n]) {\n    return prior[n]; // Use prior work if available.\n  }\n  // Applies the rules of the Collatz conjecture.\n  if (n &gt; 1) {\n    unsigned cc;\n    if(n % 2 == 0) {\n      cc = collatz(n &gt;&gt; 1) + 1;\n    } else {\n      // Update 2025: Use max of same type, as ull may be larger than 64-bit.\n      // if (n &gt;= (ULLONG_MAX - 1)/3) {\n      if (n &gt;= (UINT64_MAX - 1)/3) {\n        fprintf(stderr, &quot;Overflow\\n&quot;);\n        return UINT_MAX/2;\n      }\n      cc = collatz((3 * n + 1) / 2) + 1;\n    }\n    if (n &lt; PRIOR_N) {\n      prior[n] = cc;  // Save work.\n    }\n    return cc;\n  }\n  return n;\n}\n</code></pre>\n<pre><code>// 4.5 seconds.\nThe num 63728127 took the most 593 !!!\n</code></pre>\n<hr />\n<p><strong>Empirical: Reverse iteration order</strong></p>\n<p>I reversed the order, going from most to least and it took 1/6 less time. (total 3.75 s)  TBD why.  <a href=\"https://stackoverflow.com/questions/77335830/collatz-conjecture-with-c-range-1-100-000-000-maximum-loops/77335960#comment140899797_77335960\">@Andy Richter</a> offers a candidate reason.</p>\n<p><strong>TBD</strong></p>\n<p>Return <code>collatz()</code> and <code>prior[]</code> types deserve review.  Determine if they should be the same <code>unsigned, uint32_t, ...</code> or what.  Considerations include minimizing array element size, implementation defined <code>unsigned</code> range, etc.  Maybe <code>unsigned collatz()</code> and <code>uint_least16_t prior[]</code>?</p>\n<hr />\n<p>Aside: OP's code is loose with types changes.  Improved code would avoid that.</p>\n", "tags": ["c", "processing-efficiency", "collatz"]}
{"id": "c7980097-4911-4af7-aeaa-fd47812f5792", "text": "Q: How to Reload/Re-init Bean in Spring boot? A: <p>To ensure that the JavaMailSender bean is recreated with the updated configuration from the ConfigService, you can annotate the JavaMailSender bean method with @RefreshScope. This annotation tells Spring to recreate the bean whenever its configuration properties change.</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.cloud.context.config.annotation.RefreshScope;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.mail.javamail.JavaMailSender;\nimport org.springframework.mail.javamail.JavaMailSenderImpl;\n\n@Configuration\npublic class EmailConfiguration {\n\n    @Autowired\n    private ConfigService configService;\n\n    @Bean\n    @RefreshScope\n    public JavaMailSender javaMailSender() {\n        JavaMailSenderImpl mailSender = new JavaMailSenderImpl();\n        mailSender.setHost(configService.emailHost());\n        mailSender.setPort(configService.emailPort());\n        mailSender.setUsername(configService.emailAddress());\n        mailSender.setPassword(configService.emailPassword());\n        return mailSender;\n    }\n}\n</code></pre>\n<p>By adding @RefreshScope to the javaMailSender() bean method, Spring will recreate the JavaMailSender bean with the updated configuration whenever the ConfigService is refreshed.</p>\n", "tags": ["java", "spring", "spring-bean"]}
{"id": "90aac5f4-a4d2-4266-b62f-5d2781815031", "text": "Q: How to pass data from activity or fragment to viewmodel? A: <p><strong>In MovieListFragment class:</strong></p>\n<p>First delete this line: <code>movieViewModel.setCategory(category);</code></p>\n<p>And pass &quot;category&quot; here: <code>movieViewModel.getMoviesRepository(category)</code>\nlike code below:</p>\n<pre><code>movieViewModel.getMoviesRepository(category).observe(getActivity(), new Observer&lt;MovieResults&gt;() {  // error line no :- 76\n            @Override\n            public void onChanged(MovieResults movieResults) {\n                final List&lt;MovieResults.ResultsBean&gt; listOfMovies = movieResults.getResults();  // error line no :- 79\n\n                MovieListAdapter mAdapter = new MovieListAdapter(getContext(), listOfMovies);\n                gridView.setAdapter(mAdapter);\n                gridView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n                    @Override\n                    public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n                        mCallback.onImageSelected(position, listOfMovies);\n                    }\n                });\n            }\n        });\n</code></pre>\n<p><strong>In MovieViewModel class:</strong></p>\n<p>Move this line inside getMoviesRepository(String category) <code>listOfMovies = repository.getListOfMovies(category, API_KEY);</code></p>\n<p>And just remove category variable and <code>setCategory()</code> method from <code>MovieViewModel</code> class like this:</p>\n<pre><code>public class MovieViewModel extends AndroidViewModel {\n    \n    private static final String API_KEY = &quot;api_key&quot;;\n    private MovieRepository repository;\n    private MutableLiveData&lt;MovieResults&gt; listOfMovies;\n\n    public MovieViewModel(@NonNull Application application) {\n        super(application);\n        \n    }\n\n    public MutableLiveData&lt;MovieResults&gt; getMoviesRepository(String category) {\n        Log.d(&quot;MovieViewModel&quot;, category); // but here i am getting null value\n        listOfMovies = repository.getListOfMovies(category, API_KEY);\n        return listOfMovies;\n    }\n\n}\n</code></pre>\n", "tags": ["java", "android", "android-studio", "mvvm", "android-mvvm"]}
{"id": "d2f2daff-3514-463b-b3c5-0c8caaf06681", "text": "Q: Docker Proxy Setup using environment variable A: <p>You can check if the environment variable has been exported by typing $(name_of_var). For eg, after running </p>\n\n<p><code>docker run --env HTTP_PROXY=\"123.45.21.32\" -it ubuntu_latest /bin/bash</code></p>\n\n<p>type </p>\n\n<p><code>echo $HTTP_PROXY</code></p>\n\n<p>It is likely that your DNS server isn't configured. Try </p>\n\n<p><code>cat /etc/resolv.conf</code> </p>\n\n<p>if you see something like:</p>\n\n<p><code>nameserver:8.8.8.8</code></p>\n\n<p>then it's likely that the DNS server is inaccessible behind firewalls. You can pass dns server address along with <code>docker run</code> command like so:</p>\n\n<p><code>docker run --env HTTP_PROXY=\"123.45.21.32\" --dns=172.10.18.0 -it ubuntu_latest /bin/bash</code></p>\n", "tags": ["docker", "proxy"]}
{"id": "7cef86a2-f5de-4824-8b05-a47da6ab687e", "text": "Q: Google Chrome page bottom cut off A: <p>For me the problem was occurring due to a zoom level exceeding 100%. Setting the zoom value to 100% fixed it.</p>\n", "tags": ["facebook", "google-chrome", "popup"]}
