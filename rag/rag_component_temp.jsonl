{"id": "80d95736-e852-4d04-850f-644f2dc7baf2", "text": "Q: js and css not loading when hosting next application on GitHub pages A: <p>I have tried many advices, <code>.nojekyll</code>, different github templates, different folders, branches. It never worked, or the steps were so complicated and confusing - especially for repeated deployments, that it wasn't worth it.</p>\n<p>This guide, once set, will work automatically with a push.</p>\n<h2>How to deploy to github pages</h2>\n<ol>\n<li><p>Go to <strong>Repo Settings</strong> and set <strong>Pages &gt; Build and deployment</strong> to <code>GitHub Actions</code>.<br />\nNothing else necessary as the script will be made in the repo in next step.</p>\n<ul>\n<li><em>note: only public and org repos are eligible for GitHub Pages</em></li>\n<li><a href=\"https://github.com/MVPF-Global-Talent-Solutions/trilux-pricing/settings/pages\" rel=\"nofollow noreferrer\">https://github.com/MVPF-Global-Talent-Solutions/trilux-pricing/settings/pages</a></li>\n<li><a href=\"https://i.sstatic.net/pBF8vtMf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/pBF8vtMf.png\" alt=\"enter image description here\" /></a></li>\n</ul>\n</li>\n<li><p>Configure the <code>/.github/workflows/deploy.yml</code> GitHub Action in your repo. <em>Find the file attached below.</em></p>\n</li>\n<li><p>Configure <code>/next.config.ts</code> <em>- Find the content attached below.</em></p>\n</li>\n<li><p>Add new script to your <code>package.json</code>.</p>\n<pre><code>&quot;scripts&quot;: {\n  &quot;build:gh-pages&quot;: &quot;cross-env PAGES_BASE_PATH=/&lt;your-repo-name&gt; pnpm build&quot;,\n}\n</code></pre>\n<ul>\n<li><code>&lt;your-repo-name&gt;</code> is the sub-path where your app will be deployed</li>\n<li>this is necessary for assets and links to work correctly</li>\n</ul>\n</li>\n<li><p>Build the repo locally with</p>\n<pre><code>pnpm run build:gh-pages\n</code></pre>\n</li>\n<li><p>Push the <code>/out/</code> or <code>/dist/</code> folder to github to <code>main</code>\u00a0or <code>gh-pages</code> branch.</p>\n</li>\n<li><p>This will trigger automatic deployment.</p>\n</li>\n</ol>\n<hr />\n<h4><code>/next.config.ts</code></h4>\n<pre class=\"lang-ts prettyprint-override\"><code>const nextConfig = {\n  /**\n   * Static Export\n   *\n   * Sets the build to static export so that we can\n   * host from any static html hosting service.\n   *\n   * Limitations: https://nextjs.org/docs/pages/guides/static-exports\n   */\n\n  output: &quot;export&quot;,\n  basePath: process.env.PAGES_BASE_PATH,\n  images: {\n    // Allows next/image to be used without 3rd party optimization service. - necessary for static export\n    unoptimized: true,\n  },\n}\n</code></pre>\n<h4><code>/.github/workflows/deploy.yml</code></h4>\n<p>This flow takes about 20s as it doesn't build anything, it only copies and pushes the existing artifacts. You can use it to push and host any html, not just next.js.</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>name: Deploy Next.js site to Pages\n\n#\u00a0This flow requires the built output in /out/ folder. (configure below)\n# note: You need to configure correct PAGES_BASE_PATH and basePath during build.\n\non:\n  # Runs on pushes targeting these branches\n  push:\n    branches:\n      - main\n      - gh-pages\n\n  # Allows you to run this workflow manually from the Actions tab\n  workflow_dispatch:\n\n# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages\npermissions:\n  contents: read\n  pages: write\n  id-token: write\n\n# Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued.\n# However, do NOT cancel in-progress runs as we want to allow these production deployments to complete.\nconcurrency:\n  group: &quot;pages&quot;\n  cancel-in-progress: false\n\njobs:\n  upload:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Setup Pages\n        id: setup_pages\n        uses: actions/configure-pages@v5\n\n      - name: Upload artifact\n        uses: actions/upload-pages-artifact@v3\n        with:\n          path: ./out\n\n  deploy:\n    environment:\n      name: github-pages\n      url: ${{ steps.deployment.outputs.page_url }}\n    runs-on: ubuntu-latest\n    needs: upload\n    steps:\n      - name: Deploy to GitHub Pages\n        id: deployment\n        uses: actions/deploy-pages@v4\n</code></pre>\n", "tags": ["jekyll", "next.js", "github-pages"]}
{"id": "9551f9ee-d436-4455-a3fe-fcd3ec560217", "text": "Q: Polling on MongoDB message store backed QueueChannels during application shutdown A: <p>Looks like the original error is this:</p>\n<pre><code>\nCaused by: com.mongodb.MongoServerUnavailableException: The server at my-mongodb-replica-set is no longer available\n    at com.mongodb.internal.connection.ConcurrentPool.poolClosedException(ConcurrentPool.java:298) ~[mongodb-driver-core-5.5.2.jar:na]\n</code></pre>\n<p>That means that <code>DefaultServer</code> is closed prematurely. We need to understand what does that.</p>\n<p>The <code>AbstractPollingEndpoint</code>, responsbile for polling that channel, comes with this lifecycle phase:</p>\n<pre><code>    public AbstractPollingEndpoint() {\n        this.setPhase(Integer.MAX_VALUE / 2);\n    }\n</code></pre>\n<p>That makes these endpoints to be started later in the application context and stopped earlier.</p>\n<p>Usually, <code>stop()</code> is happened before <code>destroy()/close()</code>.</p>\n<p>So, we need to investigate in your application what causes the MongoDB server to be closed too early.</p>\n", "tags": ["spring-integration"]}
{"id": "c2b2db05-3114-4679-b3a3-ee2990804e2b", "text": "Q: How can I change MVC website UI at runtime? A: <p>I\u2019m working on a role-playing-game web project ( <a href=\"https://avatarworldmodapk.org/avatar-world-apk/\" rel=\"nofollow noreferrer\">Avatar world</a> ) with a similar MVC layout problem.<br />\nIn our setup the theme needs to change at runtime depending on player context, so I\u2019m exploring dynamic <em>ViewLocationFormats</em> based on a stored theme key.</p>\n", "tags": ["asp.net-mvc", "model-view-controller", "content-management-system"]}
