{"id": "f0e1f86c-6871-4276-9882-d3a07c6306c8", "text": "Q: Why are offsets not reset to 0 after recreating consumer group with the same groupId A: <p>Because Kafka stores the offsets for each Consumer Groups within an internal Kafka topic <em>__consumer_offsets</em> for which the retention policy is set to <code>compact</code>. That means it takes some time for the internal log cleaner to actually remove that information for your Consumer Group.</p>\n<p>You could either wait that configurable amount of time, or, if you just want to re-set the offset from 100 to 0 it is usually better to do this with</p>\n<pre><code>bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 \\\n --execute --reset-offsets \\\n --group group-0 \\\n --topic topicName \\\n --partition 0 \\\n --to-offset 0\n</code></pre>\n", "tags": ["apache-kafka", "kafka-consumer-api"]}
{"id": "a8c87338-096c-4551-b997-3a8ae80ad063", "text": "Q: issue with determining year difference using ChronoUnit in Java A: <h2>The solution: add 1 day to the end date</h2>\n<p>As @Anonymous said in a comment, add 1 day to the end date:</p>\n<pre><code>    LocalDate startInclusive = LocalDate.of(2023, 11, 13);\n    LocalDate endInclusive = LocalDate.of(2024, 11, 12);\n\n    LocalDate endExclusive = endInclusive.plusDays(1);\n\n    long differenceInYear = ChronoUnit.YEARS.between(startInclusive, endExclusive);\n    System.out.println(&quot;Years: &quot; + differenceInYear);\n</code></pre>\n<p>Output:</p>\n<blockquote>\n<pre class=\"lang-none prettyprint-override\"><code>Years: 1\n</code></pre>\n</blockquote>\n<p>It works for months and days too:</p>\n<pre><code>    long differenceInMonth = ChronoUnit.MONTHS.between(startInclusive, endExclusive);\n    System.out.println(&quot;Months: &quot; + differenceInMonth);\n    long differenceInDay = ChronoUnit.DAYS.between(startInclusive, endExclusive);\n    System.out.println(&quot;Days: &quot; + differenceInDay);\n</code></pre>\n<blockquote>\n<pre class=\"lang-none prettyprint-override\"><code>Months: 12\nDays: 366\n</code></pre>\n</blockquote>\n<h2>Why do you need to add 1 day?</h2>\n<p>You need to read the Javadoc all the way to the bottom. As @user85421 quoted, the second argument of <code>ChronoUnit.between()</code> is:</p>\n<blockquote>\n<p><code>temporal2Exclusive</code> - the other temporal object, exclusive, not null</p>\n</blockquote>\n<p>A hint is given earlier, though.</p>\n<blockquote>\n<p>For example, the amount in hours between the times 11:30 and 13:29 will only be one hour as it is one minute short of two hours.</p>\n</blockquote>\n<p>The situation mentioned is slightly parallel to yours. As humans we\u2019re somewhat used to treating day intervals differently from time intervals. java.time treats them all the same, which has the nice consequence that it\u2019s consistent. Once you\u2019ve learned how it works, you know how it works in all situations.</p>\n<p>java.time always works with <em>half-open</em> intervals: from a start inclusive to an end <em>exclusive</em>. So <code>ChronoUnit.YEARS.between()</code> counts the full years from November 13 to the following November 12, which is 1 day short of a full year, so you got 0. To have the end date counted as inclusive, just add 1 day. java.time now counts from November 13 to the following November 13, which is a full year. So you get the result you expected. There is no downside to this solution.</p>\n<p><strong>Link:</strong> <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/temporal/ChronoUnit.html#between(java.time.temporal.Temporal,java.time.temporal.Temporal)\" rel=\"nofollow noreferrer\">Documentation of <code>ChronoUnit.between()</code></a></p>\n", "tags": ["java", "chronounit"]}
{"id": "6238a3b1-614a-4cad-9fa0-fe6d2390d4eb", "text": "Q: How to expand equal-aspect data limits in one direction only? A: <p>Here is a possible solution:</p>\n<pre><code>def on_resize(event):\n    ax.set_aspect('equal', 'datalim')\n    fig.canvas.draw()\n    (xmin, xmax, ymin, ymax) = ax.axis()\n    ax.set_aspect('auto', None)\n    ax.axis([0, xmax - xmin, 0, ymax - ymin])\n\nfig, ax = plt.subplots(1, 1, figsize = (3*6, 2*4))\n\n# A correlation we want to realise is not exactly y=x by setting aspect\nx = np.linspace(0, 10, 100) \ny = 0.7*x+0.1*x*np.random.normal(size=100)\n\n# Plot data and add y=x line for perspective\nax.scatter(x, y)\nax.axline((0, 0), (1, 1), color = 'gray', linestyle = '--')\n\nfig.canvas.mpl_connect('resize_event', on_resize)\n\nfig.tight_layout()\n</code></pre>\n", "tags": ["python", "matplotlib"]}
{"id": "095eb11d-8f69-4d4a-9e1c-a9ea8eee2c9b", "text": "Q: Countdown timer in nodejs A: <p>I know this is old, but for future reference, here is how I did it in Node.js.</p>\n<p>In your .ejs file set</p>\n<pre><code>&lt;div id=&quot;txtCountdown&quot; class=&quot;...&quot;  style=&quot;width:100px&quot;&gt;\n&lt;/div&gt;\n</code></pre>\n<p>In your .js file define a function such as:</p>\n<pre><code>function fnSetTimer(countDownSecs) {\n    unloadTimer = setInterval(function() {\n        $('#txtCountdown').html(`${countDownSecs--}s`);\n        if (countDownSecs &lt; 0) {\n            fnCloseRequests();\n            clearInterval(unloadTimer);                \n        }\n    }, 1000);\n};\n</code></pre>\n<p>and call it using the time you want in seconds:</p>\n<pre><code>fnSetTimer(5);\n</code></pre>\n", "tags": ["javascript", "node.js", "mongodb"]}
{"id": "70b13dab-7d5a-417c-a07b-e77f8cd834db", "text": "Q: Gspread: search a column and get the corresponding row in different column A: <p>As per their  <a href=\"https://docs.gspread.org/en/v5.3.0/api.html#gspread.worksheet.Worksheet.find\" rel=\"nofollow noreferrer\">documentation</a> you can use,</p>\n<p>To find and get the first match</p>\n<pre><code>find(query, in_row=None, in_column=None, case_sensitive=True)\n</code></pre>\n<p>To find and get all of the matches</p>\n<pre><code>findall(query, in_row=None, in_column=None, case_sensitive=True\n</code></pre>\n", "tags": ["python", "gspread"]}
{"id": "31747fa2-f644-44f6-a8ea-f9f20778b4b3", "text": "Q: Loss of reference A: <p>First of all please avoid using raw ponters. Use moderrn C++ with <code>std::uinique_ptr</code> and 1<code>std::shared_ptr</code>. Also use of <code>std::list</code> is not recommended.</p>\n<p>Just do:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>    auto listener0 = std::make_unique&lt;game::Listener&gt;(\n        &quot;listener-0&quot;, [calls, listenerName0](game::Event event) mutable {\n            calls[listenerName0]++;\n        });\n</code></pre>\n<p>Second problem is you do not know how Catch2 <code>SECTION</code> works. Code defined in <code>TEST_CASE</code> is invoked multiple times. When first section is encountered it is invoked then all following SECTIONS are ignored. In next run of TEST_CASE catch2 remembers fist section was executed and skips it and then executes next section not run yet.</p>\n<p>Aim is to have a behavior where code before <code>SECTION</code> is a setup code and each SECTION is a sub-test. Code after a section is tear down code.</p>\n<p>You can nest SECTIONS then it works recursively. Parent section is executed as many times as sereneness to execute every sub section.</p>\n<p>Please read Catch2 documentation.</p>\n<p>Here is a dry demo:\n<a href=\"https://godbolt.org/z/PoYTWfG53\" rel=\"nofollow noreferrer\">https://godbolt.org/z/PoYTWfG53</a></p>\n<p>So this behavior lead to situation that <code>SECTION(&quot;when adding a listener&quot;)</code> has not impact on code in <code>SECTION(&quot;when emitting a event&quot;)</code> and <code>SECTION(&quot;when removing a listener&quot;)</code>.</p>\n<p>Third problem you are using lambda incorrectly. You are capturing <code>calls</code> by a copy not by a reference! So you are modifying a copy and then checking if original was value changed.</p>\n<p>Here is you test fixed: <a href=\"https://godbolt.org/z/KnnT6YKqs\" rel=\"nofollow noreferrer\">https://godbolt.org/z/KnnT6YKqs</a></p>\n<pre class=\"lang-cpp prettyprint-override\"><code>TEST_CASE(&quot;Emitter should work properly&quot;, &quot;[event][emitter]&quot;) {\n    game::Emitter emitter;\n    std::string eventName0 = &quot;event-0&quot;;\n    std::string listenerName0 = &quot;listener-0&quot;;\n    std::map&lt;std::string, int&gt; calls = {{listenerName0, 0}};\n\n    auto listener0 = std::make_unique&lt;game::Listener&gt;(\n        &quot;listener-0&quot;,\n        [&amp;calls, listenerName0](game::Event) { calls[listenerName0]++; });\n\n    emitter.on(eventName0, listener0.get());\n    REQUIRE(emitter.listeners.size() == 1);\n\n    SECTION(&quot;and then emitting an event&quot;) {\n        REQUIRE(emitter.listeners.size() == 1);  // passing not needed anymore, since it is covered at 81\n        game::Event event{eventName0, {}};\n        emitter.emit(event);\n        REQUIRE(calls[listenerName0] == 1);  // passing\n    }\n\n    SECTION(&quot;when emitting an event&quot;) {\n        REQUIRE(emitter.listeners.size() == 1);  // passing not needed anymore, since it is covered at 81\n        game::Event event{eventName0, {}};\n        emitter.emit(event);\n        REQUIRE(calls[listenerName0] == 1);  // passing\n    }\n\n    SECTION(&quot;when removing a listener&quot;) {\n        emitter.off(eventName0, listener0.get());\n        REQUIRE(emitter.listeners.size() == 0);\n    }\n}\n</code></pre>\n<p>Last section still fails, but didn't investigated why.</p>\n", "tags": ["c++", "catch2"]}
{"id": "23cfbf2c-64f0-4c82-869a-b549b90a16ca", "text": "Q: Why are there dashes more than specified in my output? A: <p>First of all <code>System.out.println(x: &quot;-&quot;);</code> is wrong by its syntax, since this represents a key value pair and can't be compiled as a parameter of println. The method println needs a valid expression or literal like println(x + &quot;: -&quot;). You did it right in the other print methods.</p>\n<p>Also the <code>System.out.println(x: &quot;-&quot;);</code> is before and therefor outside the if statement, so no matter if the the condition in the if statement if fulfilled or not, the dash is printed. One possible solution would be to add an <code>else</code> after the condition, so whenever the number is not a prime number you print a dash.</p>\n<p>And last, you are working with natural numbers , so you should use integers instead of float.</p>\n", "tags": ["java"]}
