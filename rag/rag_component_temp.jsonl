{"id": "7519c5d2-85b5-4765-8883-b9bf55115fa1", "text": "Q: Can PowerShell automatically create missing directories when redirecting output? A: \n<ul>\n<li><p>No, <strong><code>&gt;</code>, the <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Redirection\" rel=\"nofollow noreferrer\">redirection operator</a>, can <em>not</em> be configured to create target directories on demand</strong>.</p>\n</li>\n<li><p>However, you can <strong>use the output from a <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.management/new-item\" rel=\"nofollow noreferrer\"><code>New-Item</code></a> call with the <code>-Force</code> switch as a redirection target</strong>:</p>\n<ul>\n<li><p><code>New-Item -Force</code> creates target directories on demand and also truncates a preexisting target file (as <code>&gt;</code> alone does).</p>\n</li>\n<li><p>The resulting <a href=\"https://learn.microsoft.com/en-US/dotnet/api/System.IO.FileInfo\" rel=\"nofollow noreferrer\"><code>[System.IO.FileInfo]</code></a> instance is implicitly <em>stringified</em> to serve as the <code>&gt;</code> target, which works as intended, given that the stringification reports the file's full path.</p>\n</li>\n</ul>\n</li>\n</ul>\n<pre class=\"lang-bash prettyprint-override\"><code># Creates &quot;C:\\missing_dir&quot; if it doesn't already exist before writing\n# to &quot;git_status.txt&quot; there.\ngit status &gt; (New-Item -Force c:\\missing_dir\\git_status.txt)\n</code></pre>\n<p><strong>General considerations re <em>character encoding</em> with output from <em>external programs</em> such as <code>git</code></strong>:</p>\n<ul>\n<li><p>In <a href=\"https://github.com/PowerShell/PowerShell/blob/master/README.md\" rel=\"nofollow noreferrer\"><em>PowerShell (Core) 7</em></a> (the modern, cross-platform, install-on-demand edition), since <em>v7.4</em> (the oldest version still supported as of this writing), an external program's <em>raw byte output</em> is directly saved to the output file (which is in line with the behavior of <code>&gt;</code> in other shells, such as <code>cmd.exe</code> on Windows and <code>bash</code> on Unix-like platforms).</p>\n<ul>\n<li><p>Therefore, it is the external program <em>alone</em> that determines the character encoding of the resulting file, and external programs <em>typically</em> respect the code page of the console window they're running in, which defaults to the legacy system locale's OEM code page, such as <code>437</code> on US-English systems; that said, an increasing number of high-profile programs default to UTF-8.</p>\n</li>\n<li><p>However, note that when piping to <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/out-file\" rel=\"nofollow noreferrer\"><code>Out-File</code></a> in lieu of using <code>&gt;</code>, the decoding and re-encoding cycle described for Windows PowerShell in the next bullet point still applies.</p>\n</li>\n<li><p>With input from <em>PowerShell</em> commands, by contrast, <code>&gt;</code> is, in effect an alias of <code>Out-File</code>, and creates <em>BOM-less UTF-8</em> files by default, the latter being PowerShell 7's consistent default (whereas in <em>Windows PowerShell</em> the default encodings differ widely, from cmdlet to cmdlet - see the bottom section of <a href=\"https://stackoverflow.com/a/40098904/45375\">this answer</a>).</p>\n</li>\n</ul>\n</li>\n<li><p>In <em>Windows PowerShell</em> (the legacy, ships-with-Windows, Windows-only edition of PowerShell whose latest and <em>final</em> version is 5.1):</p>\n<ul>\n<li><p><code>&gt;</code> creates &quot;Unicode&quot; (UTF-16LE) files by default (as does <code>Out-File</code>)...</p>\n</li>\n<li><p>... based on <em>first decoding the external-program output using the encoding stored in <code>[Console]::OutputEncoding</code></em> and then <em>re-encoding the resulting text</em> for writing to the target file.</p>\n<ul>\n<li><p><code>[Console]::OutputEncoding</code> reflects the character encoding corresponding to the legacy system locale's OEM code page, such as <code>437</code> on US-English systems, which, as noted, external programs typically use for encoding their output, especially historically, but with an increasing number of high-profile exceptions where UTF-8 is used.</p>\n</li>\n<li><p>Thus, to avoid misinterpretation of external-program output, <code>[Console]::OutputEncoding</code> must match the actual output encoding used by a given external program, situationally necessitating (temporary) modification of <code>[Console]::OutputEncoding</code>; see <a href=\"https://stackoverflow.com/a/58438716/45375\">this answer</a> for more information.</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<hr />\n<p>While you <em>could</em> pipe output directly to <code>New-Item -Force</code>, with output <em>from external programs</em> there's <em>no good reason to do so</em>:</p>\n<ul>\n<li><p>Fundamentally, you need to pipe the output to <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/out-string\" rel=\"nofollow noreferrer\"><code>Out-String</code></a> first, so as to ensure that only a <em>single</em> object (multiline string) is piped to <code>New-Item -Force</code> - absent that, in effect only the <em>last</em> (stringified) input object is stored in the target file.<sup>[1]</sup></p>\n<ul>\n<li>Additionally, given that PowerShell streams external-program output <em>line by line</em> to the pipeline, the implication is that <code>Out-String</code> uses the <em>platform-native</em> newline sequence (<code>&quot;`r`n&quot;</code> (CRLF) on Windows, <code>&quot;`n&quot;</code> (LF) on Unix-like platforms) to &quot;stitch&quot; the output back together to form a multiline string, which can result in the target file using <em>different</em> newlines from the output.</li>\n</ul>\n</li>\n<li><p>In addition to the overhead introduced by the <code>Out-String</code> call - which of necessity <em>collects all input lines up front</em> (instead of <em>streaming</em> the input to the target file) - it subjects the input to the character decoding/re-encoding cycle described above (which, however, in <em>Windows PowerShell</em> fundamentally cannot be avoided, not even with the superior <code>&gt; (New-Item -Force ...)</code>  solution).</p>\n</li>\n</ul>\n<pre class=\"lang-bash prettyprint-override\"><code># Less efficient alternative to the `&gt; (New-Item -Force ...)` solution,\n# subject to character decoding and re-encoding even in PowerShell 7.\n# `$null = ` suppresses the [System.IO.FileInfo] instance output by \n# New-Item, which isn't of interest here.\n$null = \n  git status | Out-String | New-Item -Force c:\\missing_dir\\git_status.txt\n</code></pre>\n<hr />\n<p><sup>[1] Technically, <em>each and every</em> (stringified) input object is written to the target file, <em>in succession</em>, with each write operation <em>replacing the previous one</em>, so that in effect only the <em>last</em> input object's stringified representation ends up in the file. These successive write operations are reflected in <code>New-Item</code> outputting a <code>[System.IO.FileInfo]</code> instance <em>for each</em>.<br />\nAdditionally, the stringification performed by <code>New-Item</code> is, in essence, simple <code>.ToString()</code> stringification (i.e., .NET's default stringification), whereas <code>&gt;</code> uses the much richer, object-based  stringification provided by PowerShell's <a href=\"https://docs.microsoft.com/en-us/powershell/scripting/developer/format/formatting-file-overview\" rel=\"nofollow noreferrer\">for-display output-formatting system</a></sup></p>\n", "tags": ["powershell", "directory", "io-redirection"]}
{"id": "8d78a582-6725-4e69-9dea-704493a59a4f", "text": "Q: Powershell to find out disconnected RDP session and log off at the same time A: <p>I have got the answer and I am writing this answer to help someone in need as I had to figure this out myself. I created a script using online resources to find out disconnected RDP sessions on all Windows Server in my AD environment. I run a query on each Windows Server and create a CSV formatted list, I then use that list to log out my ID from those servers, so I don't have any disconnected sessions.</p>\n<p>I did this to make sure my AD account doesn't get locked out due to some disconnected RDP sessions when its time to change my password.</p>\n<p>You are free to modify this script as per your need.</p>\n<p><strong>Script Code is below:</strong></p>\n<pre><code>param (\n        #get current logged on username\n        [string]$UserName = $env:USERNAME\n    )\n\n    # Import the Active Directory module for the Get-ADComputer CmdLet\n    Import-Module ActiveDirectory\n\n\n    # Query Active Directory for enabled windows servers computer accounts and sort by name\n    $Servers = Get-ADComputer -Filter {(OperatingSystem -like &quot;*windows*server*&quot;) -and (Enabled -eq &quot;True&quot;)} | Sort Name\n\n    # Initiating variables\n    $SessionList = $NULL\n    $queryResults = $NULL\n    $SError = $null\n    $SDown = $null\n    $z = 0\n\n    # Get total number of servers\n    $count = $Servers.count \n\n\n    # Start looping through each server at a time\n    ForEach ($Server in $Servers) {    \n    \n        # initiate counter for showing progress\n        $z = $z + 1\n   \n        $ServerName = $Server.Name\n    \n        # Start writing progress \n        Write-Progress -Activity &quot;Processing Server: $z out of $count servers.&quot; -Status &quot; Progress&quot; -PercentComplete ($z/$Servers.count*100)\n\n        # check if server is pingable before running the query on the server\n        if (Test-Connection $Server.Name -Count 1 -Quiet) {  \n        \n            Write-Host &quot;`n`n$ServerName is online!&quot; -BackgroundColor Green -ForegroundColor Black\n\n            Write-Host (&quot;`nQuerying Server: `&quot;$ServerName`&quot; for disconnected sessions under UserName: `&quot;&quot; + $UserName.ToUpper() + &quot;`&quot;...&quot;) -BackgroundColor Gray -ForegroundColor Black\n\n            # Store results in array\n            [array]$queryResults += (\n\n                # Query server for specific username\n                query user $UserName /server:$ServerName | \n                foreach {\n                    # Look for lines with Disc string to filter out active sessions\n                    if ($_ -match &quot;Disc&quot;) {\n\n                        # format the output in CSV by replacing more than 2 spaces with a comman\n                        write-output (&quot;`n$ServerName,&quot; + (($_.trim() -replace ' {2,}', ',')))\n                    }\n                }\n            )\n        }\n        # If server is not pingable show error message\n        else {\n            # Make list of server that are down.\n            [array]$SDown += ($ServerName)\n            Write-Host &quot;`nError: Unable to connect to $ServerName!&quot; -BackgroundColor red -ForegroundColor white\n            Write-Host &quot;Either the $ServerName is down or check for firewall settings on server $ServerName!&quot; -BackgroundColor Yellow -ForegroundColor black\n        }\n    }\n    \n    # If there are some non pingable server then display the list\n    if ($SDown -ne $null -and $SDown) {\n            Write-Host &quot;`nScript was unable to connect to the following server:&quot; -ForegroundColor White -BackgroundColor Red\n            $SDown\n    }\n\n    # Check if any disconnected session are stored in the array\n    if ($queryResults -ne $null -and $queryResults) {\n    \n        # Convert the CSV fromat to table format with headers\n        $QueryResultsCSV = $queryResults | ConvertFrom-Csv -Delimiter &quot;,&quot; -Header &quot;ServerName&quot;,&quot;UserName&quot;,&quot;SessionID&quot;,&quot;CurrentState&quot;,&quot;IdealTime&quot;,&quot;LogonTime&quot;\n    \n        # Show the results on console\n        $QueryResultsCSV |ft -AutoSize\n\n        # Go through each Disconnected session stored in the array\n        $QueryResultsCSV | foreach {\n\n            # Grabb session ID and ServerName\n            $Sessionl = $_.SessionID\n            $Serverl = $_.ServerName\n\n            # Show message on the console\n            Write-Host &quot;`nLogging off&quot;$_.username&quot;from $serverl...&quot; -ForegroundColor black -BackgroundColor Gray\n            sleep 2\n\n            # Logout user using session ID\n            logoff $Sessionl /server:$Serverl /v\n    \n        }\n    }\n    else {\n        # if array is empty display message that no session were found\n        Write-Host `n`n`n`n(&quot;*&quot; * $LineSize)\n        Write-Host &quot;You are all good! No ghost sessions found!&quot; -BackgroundColor Green -ForegroundColor Black\n        Write-Host (&quot;*&quot; * $LineSize)\n    }\n\n    # Pause at the end so you can capture the output\n    $null = Read-Host &quot;`n`nScript execution finished, press enter to exit!&quot;\n</code></pre>\n<p>Screenshots:</p>\n<ol>\n<li><p>When the script is running on through all server, shows you online and offline servers:\n<a href=\"https://i.sstatic.net/6DRAD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/6DRAD.png\" alt=\"Inital script run\" /></a></p>\n</li>\n<li><p>List of servers that Script was unable to connect:\n<a href=\"https://i.sstatic.net/heIpL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/heIpL.png\" alt=\"List of server script was unable to connect\" /></a></p>\n</li>\n<li><p>The script lists the servers where it found disconnected RDP sessions.\n<a href=\"https://i.sstatic.net/wsIy8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/wsIy8.png\" alt=\"Disconnected RDP Sessions\" /></a></p>\n</li>\n<li><p>When script start to log your disconnected sessions off and it pauses at the end.\n<a href=\"https://i.sstatic.net/kGgKx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/kGgKx.png\" alt=\"enter image description here\" /></a></p>\n</li>\n</ol>\n", "tags": ["powershell", "logout", "rdp", "windows-server", "disconnected-session"]}
{"id": "b11c27ba-b6f7-442d-bb9b-2b814a10a627", "text": "Q: How to create AI Images (Midjourney) by code? A: <p>The most popular Midjourney APIs are <a href=\"https://apiframe.ai/midjourney-api-for-ai-image-generation\" rel=\"nofollow noreferrer\">APIFRAME</a>, <a href=\"https://www.imagine-api.dev\" rel=\"nofollow noreferrer\">ImagineAPI</a> and <a href=\"https://www.imagine-pro.ai\" rel=\"nofollow noreferrer\">MyMidjourney</a>.</p>\n<p>Keep in mind that none of them is official, they are tools developed by third-parties.</p>\n", "tags": ["discord", "artificial-intelligence", "stable-diffusion"]}
{"id": "6e37fdd8-1f95-40ac-9dcb-ef58cf50efe9", "text": "Q: How to change icon (SF Symbol) color in SwiftUI TabView item A: <p>In SwiftUI <code>TabView</code>, the unselected SF Symbol color comes from <code>UITabBarAppearance</code> <strong>and you must set it for all layouts + apply it to <code>scrollEdgeAppearance</code> too</strong> (otherwise you\u2019ll often still get the default black icon).</p>\n<p>Here is the code:</p>\n<pre><code>import SwiftUI\n\n@main\nstruct TestApp: App {\n    init() {\n        let appearance = UITabBarAppearance()\n        appearance.configureWithDefaultBackground()\n\n        // Unselected (normal)\n        let normal = appearance.stackedLayoutAppearance.normal\n        normal.iconColor = .systemBlue\n        normal.titleTextAttributes = [.foregroundColor: UIColor.systemBlue]\n\n        // (Optional) selected\n        let selected = appearance.stackedLayoutAppearance.selected\n        selected.iconColor = .systemRed\n        selected.titleTextAttributes = [.foregroundColor: UIColor.systemRed]\n\n        // If you use iPad / different size classes, set these too:\n        appearance.inlineLayoutAppearance.normal.iconColor = .systemBlue\n        appearance.inlineLayoutAppearance.normal.titleTextAttributes = [.foregroundColor: UIColor.systemBlue]\n        appearance.compactInlineLayoutAppearance.normal.iconColor = .systemBlue\n        appearance.compactInlineLayoutAppearance.normal.titleTextAttributes = [.foregroundColor: UIColor.systemBlue]\n\n        UITabBar.appearance().standardAppearance = appearance\n        if #available(iOS 15.0, *) {\n            UITabBar.appearance().scrollEdgeAppearance = appearance\n        }\n    }\n\n    var body: some Scene {\n        WindowGroup {\n            TabView {\n                SettingsView()\n                    .tabItem {\n                        Label(&quot;Received&quot;, systemImage: &quot;tray.and.arrow.down&quot;)\n                        // Don\u2019t force .symbolRenderingMode(.multicolor) here\n                    }\n            }\n        }\n    }\n}\n\n\n</code></pre>\n", "tags": ["ios", "swiftui"]}
{"id": "3bce3f4e-9b0d-4c64-976e-64336b5b9d91", "text": "Q: Best approach to dockerize Nodejs Backend with API endpoint and scheduler A: <p>Having both services use Drizzle to access the same DB is fine - databases handle multiple connections all the time. No problem there.</p>\n<p><strong>Should you separate them?</strong></p>\n<p>For most projects, keeping them together is simpler. Separate them if you need to:</p>\n<ul>\n<li><p>Scale API independently from workers</p>\n</li>\n<li><p>Deploy/restart one without affecting the other</p>\n</li>\n<li><p>Isolate resource usage</p>\n</li>\n</ul>\n<p><strong>Fix this though:</strong></p>\n<pre><code>startWorker(); // Won't catch errors!\n</code></pre>\n<p>Should be:</p>\n<pre><code>startWorker().catch(console.error);\n</code></pre>\n<p><strong>If you do separate:</strong></p>\n<pre><code># docker-compose.yml\nservices:\n  api:\n    build: .\n    command: node dist/server.js\n  \n  worker:\n    build: .\n    command: node dist/worker.js\n  \n  db:\n    image: postgres:16\n</code></pre>\n<p>Same codebase, different entry points. Both connect to the same DB with no issues.</p>\n", "tags": ["javascript", "node.js", "database", "docker", "express"]}
{"id": "16bb666f-8e68-4235-92b6-0cd4662235b0", "text": "Q: Pandas: How to replace Zero values in a column with the mean of that column, For all columns with Zero Value A: <p>Same idea as @BENY but a little less fancy:</p>\n<pre><code>df[df==0] = pd.NA\ndf.fillna(df.mean(), inplace=True)\n</code></pre>\n", "tags": ["python", "pandas"]}
{"id": "b21c3042-cae5-46de-be32-b001fcc64343", "text": "Q: How is UTF-8 safe relative to ASCII chars A: <p>Before unicode, lots of software treated strings as sequences of &quot;extended ascii&quot; bytes, some software still does so to this day. Bytes in the range 0-127 were defined as ascii characters and may or may not have special meanings. Bytes in the range 128-255 did not have any special meaning to the software, they were simply passed through unchanged.</p>\n<p>Obviously software or hardware that actually rendered text to an image would need to care about what the codes actually mean, as would software or hardware reading keystrokes from the keyboard and turning them into character codes but the bulk of the system didn't need to care.</p>\n<p>In particular, Unix systems usually used serial terminals, so on a unix system the process of assigning human-meaning to extended character codes was usually a matter for the terminal. Not for the computer.</p>\n<p>This was far from a perfect system, if the writer and the reader used different character sets, then &quot;mojibake&quot; was likely to result. Some systems tried to solve this problem by adding a metadata field to indicate the encoding that was in-use. For example MIME introduced the &quot;charset&quot; field to indicate the encoding used in emails (and later HTTP).</p>\n<p>Some languages did not fit in the space available in an &quot;extended ASCII&quot; encoding with one byte per character. Most notably Chinese, Japanese and Korean. These languages resorted to &quot;Multibyte&quot; encodings, in which some characters required more than one byte to store.</p>\n<p>In some of these encodings byte values in the range 0-127 could appear as part of a multi-byte character. This could cause problems, a programming language may incorrectly interpret a byte as a piece of programming syntax, a file system may incorrectly interpret a byte as a separator in a directory path, a structured text format may incorrectly interpret a byte as a field seperator.</p>\n<p>In general, there were two approaches taken to unicode adoption.</p>\n<p>Microsoft adopted Unicode through new formats and APIs. For file names, they did this as part of the same process as introducing &quot;long filename&quot; support. 8-bit APIs were retained but increasingly came to be viewed as legacy.</p>\n<p>The Unix world on the other hand already had support for long filenames. It also lacked a single large controlling entity that could push through such a radical change. So there was a desire to be able to have a Unicode encoding that could be treated as &quot;just another extended ascii variant&quot;.</p>\n<p>The ISO had proposed 8-bit encoding for Unicode called UTF-1, but it did not protect most printable Ascii characters. It also had performance issues in encoding and decoding. A proposal was circulated, some modifications were suggested and UTF-8 as we know it was born.</p>\n<p>There were pros and cons to both approaches. The MS approach let existing software and users keep working as before, whereas the Unix approach would require users to switch their environment to UTF-8 and manually convert their existing data. On the other hand the Unix approach meant that existing software could be used with Unicode text immediately (possibly with a few glitches) while the Windows appoach lead to much software remaining stuck with legacy encodings well into the 2000s.</p>\n", "tags": ["unicode", "utf-8", "character-encoding", "ascii"]}
{"id": "c1dba3ad-3e20-459d-bbe3-5d4fbaa77f98", "text": "Q: How to show notification after certain time in Android A: <pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:gravity=&quot;center&quot;\n    android:orientation=&quot;vertical&quot;\n    android:padding=&quot;20dp&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/tvTimer&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;00:00:00&quot;\n        android:textSize=&quot;40sp&quot;\n        android:padding=&quot;20dp&quot; /&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;horizontal&quot;\n        android:padding=&quot;10dp&quot;&gt;\n\n        &lt;NumberPicker\n            android:id=&quot;@+id/npHour&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            /&gt;\n\n        &lt;NumberPicker\n            android:id=&quot;@+id/npMinute&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            /&gt;\n\n        &lt;NumberPicker\n            android:id=&quot;@+id/npSecond&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot; /&gt;\n    &lt;/LinearLayout&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/btnStart&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;START&quot; /&gt;\n    &lt;Button\n        android:id=&quot;@+id/btnPause&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;PAUSE&quot; /&gt;\n    &lt;Button\n        android:id=&quot;@+id/btnResume&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;RESUME&quot; /&gt;\n    &lt;Button\n        android:id=&quot;@+id/btnStop&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;STOP&quot; /&gt;\n\n&lt;/LinearLayout&gt;\n\n\nclass TimerReceiver : BroadcastReceiver() {\n    override fun onReceive(context: Context, intent: Intent?) {\n\n        val channelId = &quot;alert_channel&quot;\n        val manager = context.getSystemService(NotificationManager::class.java)\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            val channel = NotificationChannel(\n                channelId,\n                &quot;Timer Alert&quot;,\n                NotificationManager.IMPORTANCE_HIGH\n            )\n            manager.createNotificationChannel(channel)\n        }\n\n        // Vibration pattern\n        val vibration = longArrayOf(0, 500, 300, 500, 300)\n\n        val notification = NotificationCompat.Builder(context, channelId)\n            .setContentTitle(&quot;Time's Up!&quot;)\n            .setContentText(&quot;Your timer has finished.&quot;)\n            .setSmallIcon(R.drawable.ic_timer)\n            .setPriority(NotificationCompat.PRIORITY_HIGH)\n            .setVibrate(vibration)\n            .setSound(Uri.parse(&quot;android.resource://${context.packageName}/raw/alarm_sound&quot;))\n            .build()\n\n        manager.notify(2001, notification)\n    }\n}\n\nclass TimerService : Service() {\n\n    companion object {\n        const val ACTION_TIMER_UPDATE = &quot;com.demo.background.froground.service.TIMER_UPDATE&quot;\n    }\n\n    private var totalTime = 0\n    private var remainingTime = 0\n    private var isPaused = false\n\n    private val handler = Handler(Looper.getMainLooper())\n\n    private val countdownRunnable = object : Runnable {\n        override fun run() {\n            if (!isPaused) {\n                remainingTime--\n                Log.d(&quot;TimerService&quot;, &quot;Tick, remainingTime = $remainingTime&quot;)\n\n                updateNotification()\n                sendTimeToUI()\n\n                if (remainingTime &lt;= 0) {\n                    Log.d(&quot;TimerService&quot;, &quot;Timer finished, calling finishTimer()&quot;)\n                    finishTimer()\n                    return\n                }\n            }\n            handler.postDelayed(this, 1000)\n        }\n    }\n\n    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\n        when (intent?.getStringExtra(&quot;action&quot;)) {\n            &quot;start&quot; -&gt; {\n                val duration = intent.getIntExtra(&quot;duration&quot;, 0)\n                Log.d(&quot;TimerService&quot;, &quot;Start timer with $duration seconds&quot;)\n                startTimer(duration)\n            }\n            &quot;pause&quot; -&gt; {\n                isPaused = true\n                Log.d(&quot;TimerService&quot;, &quot;Pause timer&quot;)\n            }\n            &quot;resume&quot; -&gt; {\n                isPaused = false\n                Log.d(&quot;TimerService&quot;, &quot;Resume timer&quot;)\n            }\n            &quot;stop&quot; -&gt; {\n                Log.d(&quot;TimerService&quot;, &quot;Stop timer service&quot;)\n                stopTimer()\n            }\n        }\n        return START_NOT_STICKY\n    }\n\n    private fun stopTimer() {\n        handler.removeCallbacks(countdownRunnable)  // STOP THREAD\n        isPaused = false\n        remainingTime = 0\n\n        stopForeground(true)\n        stopSelf()\n    }\n\n    private fun startTimer(seconds: Int) {\n        totalTime = seconds\n        remainingTime = seconds\n        isPaused = false\n\n        startForeground(1001, createNotification(&quot;Timer running&quot;))\n        handler.post(countdownRunnable)\n    }\n\n    private fun updateNotification() {\n        val text = formatTime(remainingTime)\n        val notification = createNotification(text)\n        val manager = getSystemService(NOTIFICATION_SERVICE) as NotificationManager\n        manager.notify(1001, notification)\n    }\n\n    private fun sendTimeToUI() {\n        val intent = Intent(ACTION_TIMER_UPDATE)\n        intent.setPackage(packageName)\n        val formatted = formatTime(remainingTime)\n        intent.putExtra(&quot;time&quot;, formatted)\n        Log.d(&quot;TimerService&quot;, &quot;Sending broadcast: $formatted&quot;)\n        sendBroadcast(intent)\n    }\n\n    private fun finishTimer() {\n        stopForeground(true)\n\n        // If you have TimerReceiver, it can handle final alarm/notification\n        val intent = Intent(this, TimerReceiver::class.java)\n        intent.setPackage(packageName)\n        sendBroadcast(intent)\n\n        stopSelf()\n    }\n\n    private fun createNotification(text: String): Notification {\n        val channelId = &quot;timer_channel&quot;\n\n        val manager = getSystemService(NotificationManager::class.java)\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            val channel = NotificationChannel(\n                channelId, &quot;Timer Service&quot;,\n                NotificationManager.IMPORTANCE_LOW\n            )\n            manager.createNotificationChannel(channel)\n        }\n\n        return NotificationCompat.Builder(this, channelId)\n            .setContentTitle(&quot;Timer&quot;)\n            .setContentText(text)\n            .setSmallIcon(R.drawable.ic_timer)\n            .setOngoing(true)\n            .build()\n    }\n\n    private fun formatTime(sec: Int): String {\n        val h = sec / 3600\n        val m = (sec % 3600) / 60\n        val s = sec % 60\n        return String.format(&quot;%02d:%02d:%02d&quot;, h, m, s)\n    }\n\n    override fun onBind(intent: Intent?) = null\n}\n\n\n\n  private lateinit var tvTimer: TextView\n    private lateinit var npHour: NumberPicker\n    private lateinit var npMinute: NumberPicker\n    private lateinit var npSecond: NumberPicker\n\n    private val timerReceiver = object : BroadcastReceiver() {\n        override fun onReceive(context: Context?, intent: Intent?) {\n            val time = intent?.getStringExtra(&quot;time&quot;) ?: return\n            Log.d(&quot;MainActivity&quot;, &quot;Received TIMER_UPDATE: $time&quot;)\n            tvTimer.text = time\n        }\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        tvTimer = findViewById(R.id.tvTimer)\n        npHour = findViewById(R.id.npHour)\n        npMinute = findViewById(R.id.npMinute)\n        npSecond = findViewById(R.id.npSecond)\n\n        // OPTIONAL: set defaults\n        npHour.minValue = 0\n        npHour.maxValue = 23\n        npMinute.minValue = 0\n        npMinute.maxValue = 59\n        npSecond.minValue = 0\n        npSecond.maxValue = 59\n\n        // Android 14+ compatible broadcast registration\n        ContextCompat.registerReceiver(\n            this,\n            timerReceiver,\n            IntentFilter(TimerService.ACTION_TIMER_UPDATE),\n            ContextCompat.RECEIVER_NOT_EXPORTED\n        )\n\n        val btnStart = findViewById&lt;Button&gt;(R.id.btnStart)\n        val btnPause = findViewById&lt;Button&gt;(R.id.btnPause)\n        val btnResume = findViewById&lt;Button&gt;(R.id.btnResume)\n        val btnStop = findViewById&lt;Button&gt;(R.id.btnStop)\n\n        btnStart.setOnClickListener {\n            // For debugging, you can ignore pickers and force 20 sec:\n            // val totalSeconds = 20\n\n            val totalSeconds = npHour.value * 3600 +\n                    npMinute.value * 60 +\n                    npSecond.value\n\n            Log.d(&quot;MainActivity&quot;, &quot;Start pressed, totalSeconds = $totalSeconds&quot;)\n\n            val intent = Intent(this, TimerService::class.java)\n            intent.putExtra(&quot;action&quot;, &quot;start&quot;)\n            intent.putExtra(&quot;duration&quot;, totalSeconds)\n\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                startForegroundService(intent)\n            }else{\n                startService(intent)\n            }\n        }\n\n        btnPause.setOnClickListener {\n            val intent = Intent(this, TimerService::class.java)\n            intent.putExtra(&quot;action&quot;, &quot;pause&quot;)\n            startService(intent)\n        }\n\n        btnResume.setOnClickListener {\n            val intent = Intent(this, TimerService::class.java)\n            intent.putExtra(&quot;action&quot;, &quot;resume&quot;)\n            startService(intent)\n        }\n\n        btnStop.setOnClickListener {\n            val intent = Intent(this, TimerService::class.java)\n            intent.putExtra(&quot;action&quot;, &quot;stop&quot;)\n            startService(intent)\n\n            val nm = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n            nm.cancelAll()\n\n            tvTimer.text = &quot;00:00:00&quot;\n        }\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        try {\n            unregisterReceiver(timerReceiver)\n        } catch (e: Exception) {\n            Log.w(&quot;MainActivity&quot;, &quot;Receiver already unregistered: ${e.message}&quot;)\n        }\n    }\n\n    &lt;uses-permission android:name=&quot;android.permission.SCHEDULE_EXACT_ALARM&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot;/&gt;\n\n    &lt;!-- Foreground service for playing alarm/timer sounds --&gt;\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE_MEDIA_PLAYBACK&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE_DATA_SYNC&quot; /&gt;\n\n    &lt;!-- Normal foreground service permission --&gt;\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot;/&gt;\n\n\n   &lt;service\n            android:name=&quot;.TimerService&quot;\n            android:exported=&quot;false&quot;\n            android:foregroundServiceType=&quot;dataSync&quot; /&gt;\n\n        &lt;receiver\n            android:name=&quot;.TimerReceiver&quot;\n            android:exported=&quot;true&quot; /&gt;\n\ncom.github.chrisbanes.photoview.PhotoView\n</code></pre>\n", "tags": ["java", "android", "android-studio"]}
{"id": "ef4fc331-da62-4ec7-9bc7-6fa5eb682927", "text": "Q: About &quot;alter session set container = orclpdb&quot; in Oracle 19c A: <p>As your edited post, you are create a user (schema), not table.</p>\n<p>When you create user in CDB not PDB, you have to create a <a href=\"https://docs.oracle.com/database/121/ADMQS/GUID-DA54EBE5-43EF-4B09-B8CC-FAABA335FBB8.htm#:%7E:text=A%20common%20user%20is%20a,%2Dsupplied%20or%20user%2Dcreated.\" rel=\"nofollow noreferrer\">common user</a> (start with C##, can exists for both CDB and all PDBs).</p>\n<p>So either you change user to C##tester, or you should switch to pdb <code>orclpdb</code> as your <code>ALTER SESION</code> statement to create a user only for that PDB.</p>\n<p>And your problem is that you're not yet familier with new Oracle CDB, you should read more doc about that.</p>\n", "tags": ["sql", "oracle-database"]}
{"id": "04e42ab5-c41e-44ac-95f7-8dcde572be01", "text": "Q: Class Diagram for Course Registration A: <p>Yes, that's fine this way. You could alternatively use the association class notation like this:</p>\n\n<p><a href=\"https://i.sstatic.net/eIAJL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/eIAJL.png\" alt=\"enter image description here\"></a></p>\n\n<p>Some side notes: </p>\n\n<ul>\n<li>labeling associations is not <em>that</em> helpful except you are on a business level analysis. Rather use role names on either end where appropriate.</li>\n</ul>\n\n<hr>\n\n<p><strong>Edit</strong> I somehow overlooked that you're designing tables. So my previous comment</p>\n\n<ul>\n<li>remove all the <code>id</code> attributes. Each object will have its unique id assigned by the runtime system. Use such an id only if it's of public meaning (e.g. a passport id or a student's registration number). And then use that specific name (e.g. <code>passportId</code>) rather than a <code>&lt;class&gt;id</code>.</li>\n</ul>\n\n<p>goes just for basic class design. If you already have a (derived) table design you can just go with those ids.</p>\n", "tags": ["uml", "class-diagram"]}
