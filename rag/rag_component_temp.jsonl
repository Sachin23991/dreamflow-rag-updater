{"id": "6c143312-e6ff-4eeb-ab5a-4c35d4a66fba", "text": "Q: matplotlib conditional background color in python A: <p>Building on jakevdp's answer, if the time axis is irregular or there are different time axes involved then the time coordinates can be passed in explicitly:</p>\n<pre><code>import matplotlib as mpl\n\nax = df[&quot;A&quot;].plot()\n\ndt = df.index[1] - df.index[0]\nX = mpl.dates.date2num(np.hstack([df.index[:1] - dt/2, df.index + dt/2]))\nC = df[&quot;B&quot;].values\nax.pcolormesh(X, ax.get_ylim(), C[np.newaxis],\n              cmap='RdYlGn', alpha=0.3)\n</code></pre>\n<p>Note that <code>pcolorfast</code> doesn't seem to respect the <code>alpha</code> value with irregular X axis, so I switched to <code>pcolormesh</code>.</p>\n<p>The color mapping can be tweaked by passing <code>vmin=a, vmax=b</code> to <code>pcolormesh</code>.</p>\n", "tags": ["python", "pandas", "matplotlib"]}
{"id": "d40eb50e-0df1-4c52-8a7d-339fd2941045", "text": "Q: Display contents of allocated memory byte by byte? A: <p>From the output posted in the question (16 bytes), it appears your platform has these features:</p>\n<ul>\n<li><code>char</code> most likely has 8 bits;</li>\n<li>the <code>char</code> type is signed;</li>\n<li>pointers have 32-bit (and probably <code>int</code> too);</li>\n<li>the signed integers use 2's complement to represent negative numbers. (This is mandatory with the latest C23 Standard and almost universal on existing systems);</li>\n<li><code>int</code> is stored in memory in little-endian order (<code>len = 3</code> is represented in memory as <code>3,0,0,0</code>).</li>\n</ul>\n<p>This explains one of the issues in your code:</p>\n<ul>\n<li><code>char</code> is signed and negative <code>char</code> values (with the high bit set) passed to <code>printf</code> are promoted to <code>int</code> by replicating the 8-th bit 24 times: <code>c8</code> becomes <code>ffffffc8</code>. <code>printf</code> then outputs the value in hex as an <code>unsigned int</code>.</li>\n</ul>\n<p>Yet it does not explain the output you posted:</p>\n<ul>\n<li>the output should show 12 zeroes at the end, corresponding to the 3 pointers initialized to <code>NULL</code>, which is represented by all bits zero on most platforms.  Instead of this, the pointer values show as <code>1d922c8</code>, <code>1d92308</code> and <code>1d92348</code>, which look like actual addresses exactly 64 bytes apart. This is very surprising and strongly indicate that the output posted is not produced by the code posted.</li>\n</ul>\n", "tags": ["c", "pointers", "casting"]}
{"id": "bb7f40b3-974d-4367-aac5-4976df2cfda3", "text": "Q: Avoiding templates when working with different std::vectors A: <p>imho things are much simpler if instead of</p>\n<blockquote>\n<ul>\n<li>There is a class A and B where B derives from A.</li>\n</ul>\n</blockquote>\n<p>You write</p>\n<pre><code>struct A {};\nstruct B : A{};\n</code></pre>\n<p>The latter puts less cognitive load on the reader to imagine your code and its even less to type.</p>\n<p>Same for the other bullets.</p>\n", "tags": ["c++", "templates", "stdvector", "pointer-arithmetic"]}
{"id": "3a4d8128-d529-42c8-add3-c0ebb1a79d8b", "text": "Q: Convert a 2d array into a parent-child structure A: <p>I think it should be like this </p>\n\n<pre><code>$a = array\n(\n    array\n        (\n           \"third_party_id\" =&gt; 2,\n            \"third_party_name\" =&gt; 'aardvarkg',\n            \"parameter_id\" =&gt; 221,\n            \"parameter_name\" =&gt; 'new2',\n\n              \"param\" =&gt;  array(\n        \"param_value\" =&gt; 1),\n              \"sub_param\" =&gt; array(\n        \"sub_param_name\" =&gt; 'new2_new2',\n        \"sub_param_value\" =&gt; '1_1',\n        \"sub_bidder_id\" =&gt; 72)\n    )\n\n);\n  print_r($a);\n</code></pre>\n", "tags": ["php", "arrays", "multidimensional-array", "parent-child", "hierarchical"]}
{"id": "b00030e0-6d47-4d9c-9b69-4e835c88985e", "text": "Q: How to add trend line to high charts A: <p>the easiest way is write a trendline function for your data, data means x, y in this case, or points in 2D math,</p>\n<pre><code>&lt;html&gt;\n   &lt;head&gt;\n      &lt;title&gt;Highcharts Trendline&lt;/title&gt;\n &lt;script src=&quot;https://code.highcharts.com/highcharts.js&quot;&gt;&lt;/script&gt;\n&lt;script src=&quot;https://code.highcharts.com/modules/exporting.js&quot;&gt;&lt;/script&gt;\n&lt;script src=&quot;https://code.highcharts.com/modules/export-data.js&quot;&gt;&lt;/script&gt;\n&lt;script src=&quot;https://code.highcharts.com/modules/accessibility.js&quot;&gt;&lt;/script&gt;\n&lt;script src=&quot;https://code.highcharts.com/themes/adaptive.js&quot;&gt;&lt;/script&gt;\n&lt;style&gt;\n\n#container {\n    height: 700px;\n    min-width: 310px;\n    center\n}\n.highcharts-data-table table {\n    min-width: 310px;\n    max-width: 800px;\n    margin: 1em auto;\n}\n\n.highcharts-data-table table {\n    font-family: Verdana, sans-serif;\n    border-collapse: collapse;\n    border: 1px solid var(--highcharts-neutral-color-10, #e6e6e6);\n    margin: 10px auto;\n    text-align: center;\n    width: 100%;\n    max-width: 500px;\n}\n\n.highcharts-data-table caption {\n    padding: 1em 0;\n    font-size: 1.2em;\n    color: var(--highcharts-neutral-color-60, #666);\n}\n\n.highcharts-data-table th {\n    font-weight: 600;\n    padding: 0.5em;\n}\n\n.highcharts-data-table tbody tr:nth-child(even) {\n    background: var(--highcharts-neutral-color-3, #f7f7f7);\n}\n&lt;/style&gt;\n\n   &lt;/head&gt;\n   \n   &lt;body&gt;\n      &lt;div id = &quot;container&quot;&gt;&lt;/div&gt;\n      &lt;script language = &quot;JavaScript&quot;&gt;\nconst dataset = [[1, 99.75], [2, 99.77], [3, 99.78], [4, 99.84], [5, 99.82], [6, 99.82], [7, 99.76], [8, 99.78], [9, 99.8], [10, 99.65], [11, 99.94], [12, 99.8]];\nfunction getTrendLine(data) {\n    const n = data.length;\n\n    let sumX = 0,\n        sumY = 0,\n        sumXY = 0,\n        sumX2 = 0;\n\n    // Calculate the sums needed for linear regression\n    for (let i = 0; i &lt; n; i++) {\n        const [x, y] = data[i];\n        sumX += x;\n        sumY += y;\n        sumXY += x * y;\n        sumX2 += x ** 2;\n    }\n\n    // Calculate the slope of the trend line\n    const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX ** 2);\n\n    // Calculate the intercept of the trend line\n    const intercept = (sumY - slope * sumX) / n;\n\n    const trendline = []; // Array to store the trend line data points\n\n    // Find the minimum and maximum x-values from the scatter plot data\n    const minX = Math.min(...data.map(([x]) =&gt; x));\n    const maxX = Math.max(...data.map(([x]) =&gt; x));\n\n    // Calculate the corresponding y-values for the trend line using the slope\n    // and intercept\n    trendline.push([minX, minX * slope + intercept]);\n    trendline.push([maxX, maxX * slope + intercept]);\n\n    return trendline;\n}\n\nHighcharts.chart('container', {\n    title: {\n        text: 'Scatter with trend line'\n    },\n    xAxis: {\n        min: 0,\n        //max: 227\n    categories: ['18-Jul-14', '19-Jul-14', '20-Jul-14', '21-Jul-14', '22-Jul-14', '23-Jul-14',\n                    '24-Jul-14', '25-Jul-14', '26-Jul-14', '27-Jul-14', '28-Jul-14', '29-Jul-14']\n            },\n    yAxis: {\n        min: 90\n    },\n    series: [{\n        type: 'line',\n        name: 'Trend',\n        data: getTrendLine(dataset),\n        marker: {\n            enabled: false\n        },\n        states: {\n            hover: {\n                lineWidth: 0\n            }\n        },\n        enableMouseTracking: false\n    }, {\n        type: 'scatter',\n        name: 'RNA',\n        data: dataset,\n        marker: {\n            radius: 3\n        }\n    }]\n});\n\n      &lt;/script&gt;\n   &lt;/body&gt;\n   \n&lt;/html&gt;\n</code></pre>\n<p>so there are many ways to write this trend function, depends on what math is required on [x, y] points dataset</p>\n", "tags": ["javascript", "html", "css", "highcharts"]}
{"id": "a5fbe6f5-0e09-42ab-8c65-2613fd272cf9", "text": "Q: MercadoPago Subscriptions Checkout init_point specify external reference A: <p>i thought this could be done by passing the external_reference when creating a pending subscription (without a plan) then with webhooks getting the subscription id and then getting the subscription but what happens is that external_reference is not returned so i don't really have a clue which entity that subscription represents in my system.</p>\n<p>I don't know if i am missing something here, hope it helps somehow. Please let me know.</p>\n", "tags": ["mercadopago", "mercadopagosdk"]}
{"id": "dd93cc3c-07fa-4899-bbe8-62410716f429", "text": "Q: CMReadySampleBuffer.copyPCMData() fails with -12731 (kCMSampleBufferError_RequiredParameterMissing) error A: <p>It's great to see a new question on here!</p>\n<p>There are two sources of <code>copyPCMData()</code> returning <code>-12731 = kCMSampleBufferError_RequiredParameterMissing</code> in your code:</p>\n<ol>\n<li>The <code>AVAudioFile</code> initializer you used gives you an interleaved <code>fileFormat</code> but a <em>deinterleaved</em> <code>processingFormat</code> which does not match <code>AVAssetReaderTrackOutput</code>'s configuration (it's not obvious, I've <a href=\"https://stackoverflow.com/a/60802378/22147\">mentioned this before</a>)</li>\n<li>You're not setting the <code>AVAudioPCMBuffer.frameLength</code> which results in a 0 <code>AudioBuffer.mDataByteSize</code></li>\n</ol>\n<p>With the following changes, the code works for me:</p>\n<pre><code>- let outputFile = try AVAudioFile(forWriting: outputURL, settings: outputSettings)\n+ let outputFile = try AVAudioFile(forWriting: outputURL, settings: outputSettings, commonFormat: .pcmFormatFloat32, interleaved: true) // note the inverted senses of interleaved vs AVLinearPCMIsNonInterleaved!\n\n...\n\n+ pcmBuffer.frameLength = AVAudioFrameCount(sampleBuffer.sampleCount)\n  try blockSampleBuffer.copyPCMData(fromRange: 0..&lt;sampleBuffer.sampleCount,\n                                         into: pcmBuffer.mutableAudioBufferList)\n</code></pre>\n", "tags": ["ios", "swift", "audio", "avfoundation", "core-media"]}
