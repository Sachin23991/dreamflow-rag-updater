{"id": "1a5d3fb3-e2ce-4d80-97d4-2ee0fa1283d3", "text": "Q: Update a value in a mapping table using SQL A: <p>thank you for all the responses! in craig response I should be doing a select first then do an insert.</p>\n", "tags": ["sql", "postgresql"]}
{"id": "1b1cf6fd-9787-4df6-92ae-2b761ef24750", "text": "Q: How to write lexer for python indentation with antlr4? A: <p>The trick is to <strong>override <code>nextToken()</code></strong> and maintain an indentation stack. Here's a minimal working example:</p>\n<h3>Lexer Grammar</h3>\n<pre><code>lexer grammar Python3Lexer;\n\ntokens { INDENT, DEDENT }\n\n@lexer::members {\n    private java.util.Stack&lt;Integer&gt; indents = new java.util.Stack&lt;Integer&gt;() {{ push(0); }};\n    private java.util.LinkedList&lt;Token&gt; tokens = new java.util.LinkedList&lt;&gt;();\n    \n    @Override\n    public Token nextToken() {\n        if (!tokens.isEmpty()) return tokens.poll();\n        \n        Token next = super.nextToken();\n        \n        if (next.getType() == EOF) {\n            while (indents.size() &gt; 1) {\n                indents.pop();\n                tokens.add(makeDedent());\n            }\n            if (!tokens.isEmpty()) {\n                tokens.add(next);\n                return tokens.poll();\n            }\n        }\n        return next;\n    }\n    \n    private Token makeDedent() {\n        return new CommonToken(DEDENT, &quot;&lt;DEDENT&gt;&quot;);\n    }\n}\n\nNEWLINE: ('\\r'? '\\n') [ ]* {\n    String spaces = getText().replaceAll(&quot;[\\r\\n]&quot;, &quot;&quot;);\n    int level = spaces.length();\n    int current = indents.peek();\n    \n    if (level &gt; current) {\n        indents.push(level);\n        tokens.add(new CommonToken(INDENT, &quot;&lt;INDENT&gt;&quot;));\n    } else {\n        while (indents.peek() &gt; level) {\n            indents.pop();\n            tokens.add(makeDedent());\n        }\n    }\n};\n\nFOR: 'for';\nIN: 'in';\nCOLON: ':';\nNAME: [a-zA-Z_]+;\n\nWS: [ \\t]+ -&gt; skip;\n</code></pre>\n<p><strong>Parser</strong></p>\n<pre><code>parser grammar Python3Parser;\noptions { tokenVocab=Python3Lexer; }\nprog: stmt+ EOF;\nstmt: NAME '(' NAME ')' NEWLINE | FOR NAME IN NAME COLON NEWLINE INDENT stmt+ DEDENT;\n</code></pre>\n<p>Hope it helps!</p>\n", "tags": ["antlr"]}
{"id": "930db1cc-8d38-455a-a077-e27eedd88f8a", "text": "Q: Include template as verbatim A: <p>The other answers here got me on the right track, but not all the way there, as many of the logical parts of the template weren't rendered with the tag (blocks, if/else statements, etc).</p>\n<p>This solution simply gets the full contents of the template as a string.</p>\n<pre class=\"lang-py prettyprint-override\"><code>from django import template\nfrom django.template.loader import get_template\n\n\nregister = template.Library()\n\n\n@register.simple_tag()\ndef verbatim_include(name):\n    return get_template(name).template.source.strip()\n</code></pre>\n", "tags": ["django", "django-templates"]}
{"id": "e29f29e7-2ee5-4ec3-bea8-40197bb99c51", "text": "Q: How to safely override Laravel&#39;s CacheManager to support tenant-aware cache in Stancl Tenancy? A: <p>If you want automatic and consistent caching for your Eloquent queries, you can use the package Smart Cache:</p>\n<p><a href=\"https://github.com/ibra379/smart-cache\" rel=\"nofollow noreferrer\">https://github.com/ibra379/smart-cache</a></p>\n<p>It provides a simple API like <code>Model::smartCache()-\\&gt;smartGet()</code> that transparently caches query results and automatically invalidates the cache when the model changes.</p>\n<p>You don\u2019t even need to modify your existing queries \u2014 just add <code>smartCache()</code> and <code>smartGet() </code>and everything works automatically. No manual cache keys or <code>Cache::remember()</code> needed.</p>\n", "tags": ["php", "laravel", "caching", "multi-tenant", "tenancyforlaravel"]}
{"id": "352f6b11-2a60-46b4-8768-aa6ed5e34080", "text": "Q: microsoft office/access - problem with filepath using call shell from vba A: <p>This works for me.</p>\n<pre><code>Public Function TxtFileOpen(sPath As String)\nDim a As Object\nSet a = CreateObject(&quot;Shell.Application&quot;)\na.ShellExecute sPath\nSet a = Nothing\nEnd Function\n</code></pre>\n", "tags": ["ms-access", "vba", "ms-office"]}
{"id": "e47b7742-7232-4248-93fc-a601bb37524c", "text": "Q: JavaScript error + Object doesn&#39;t support property or method &#39;pubads&#39; A: <p>It seems that you try use module before its loading, and you even force such behavior with &quot;async=true&quot; so it seems to be copy-paste.</p>\n<p>By your hands you can observe &quot;load&quot; event of your hand-made script tag and react on it.</p>\n<p>But my suggestion is to download, learn and read standard script for such tasks - REQUIRE.JS - <a href=\"http://requirejs.org/\" rel=\"nofollow noreferrer\">http://requirejs.org/</a></p>\n", "tags": ["javascript"]}
{"id": "63f2a60a-a0b3-4490-bc6c-ff13949c93b4", "text": "Q: Make varnish serve request from cache (cookies are cleaned) A: <p>Varnish doesn't look at the contents of the <code>Cookie</code> request header, but rather checks if the header is present.</p>\n\n<p>What you need to do is to check if the <code>Cookie</code> header is empty, and if so, just remove the entire thing.</p>\n\n<p>Just add this after your <code>regsub</code> statement:</p>\n\n<pre><code>if (req.http.Cookie ~ \"^\\s*$\") {\n    unset req.http.Cookie;\n}\n</code></pre>\n\n<h1>Make the process a bit more flexible</h1>\n\n<p>In reality you'll probably will not remove all cookies, but just the ones that are not essential to your application.</p>\n\n<p>You can use this statement to remove all cookies, except that ones you need for your application:</p>\n\n<pre><code>sub vcl_recv {\n  if (req.http.Cookie) {\n    set req.http.Cookie = \";\" + req.http.Cookie;\n    set req.http.Cookie = regsuball(req.http.Cookie, \"; +\", \";\");\n    set req.http.Cookie = regsuball(req.http.Cookie, \n        \";(SESS[a-z0-9]+|NO_CACHE)=\", \"; \\1=\");\n    set req.http.Cookie = regsuball(req.http.Cookie, \";[^ ][^;]*\", \"\");\n    set req.http.Cookie = regsuball(req.http.Cookie, \"^[; ]+|[; ]+$\", \"\");\n\n    if (req.http.Cookie ~ \"^\\s*$\") {\n      unset req.http.Cookie;\n    }\n    else {\n      return (pass);\n    }\n  }\n}\n</code></pre>\n\n<p>This snippet will remove all cookies, expect that ones that match the <code>SESS[a-z0-9]+|NO_CACHE</code> regex.</p>\n\n<h1>Use <code>vmod_cookie</code></h1>\n\n<p>There is a cleaner way to approach cookie substitution in Varnish and it involves using the <code>vmod_cookie</code> module in Varnish. You can find it here: <a href=\"https://github.com/varnishcache/varnish-cache/tree/master/lib/libvmod_cookie\" rel=\"nofollow noreferrer\">https://github.com/varnishcache/varnish-cache/tree/master/lib/libvmod_cookie</a></p>\n\n<p>If you upgrade to Varnish <em>version 6.4</em>, the <code>vmod_cookie</code> will be part of the core Varnish installation.</p>\n\n<p>This is the equivalent using <code>vmod_cookie</code>:</p>\n\n<pre><code>vcl 4.1;\nimport cookie;\n\nsub vcl_recv {\n    cookie.parse(req.http.cookie);\n    cookie.keep_re(\"SESS[a-z0-9]+,NO_CACHE\");\n    set req.http.cookie = cookie.get_string();\n    if (req.http.cookie ~ \"^\\s*$\") {\n        unset req.http.cookie;\n    }\n}\n</code></pre>\n", "tags": ["varnish", "varnish-vcl", "varnish-4"]}
{"id": "4235ece6-d71f-40c9-9e2e-984bfa54d937", "text": "Q: Python fastest way to write file A: <p>The problem is that you're calling <code>pickle.dump()</code> each time through the <code>for</code> loop. Each time writes a bigger value of <code>saveData</code>, so they take longer and longer.</p>\n<p>You only need to write it once, at the very end, which you already do. Get rid of the call in the loop.</p>\n", "tags": ["python", "python-3.x", "pickle"]}
