{"id": "00d91f46-90cf-4b18-8f48-8a44623718ae", "text": "Q: Cannot get basic request/response in .NET 5 web site to work A: <p>As you haven't shared the full <code>Configure</code> method in <code>Startup.cs</code> file, it's not clear how you are trying the code. Additionally, you didn't share what exactly is not working.</p>\n<p>However, if you would like to make your shared code working you should implement that in following manner:</p>\n<p><code>Startup.cs file:</code></p>\n<pre class=\"lang-cs prettyprint-override\"><code>public class Startup\n        {\n            public Startup(IConfiguration configuration)\n            {\n                Configuration = configuration;\n            }\n    \n            public IConfiguration Configuration { get; }\n    \n            // This method gets called by the runtime. Use this method to add services to the container.\n            public void ConfigureServices(IServiceCollection services)\n            {\n    \n                services.AddControllers();\n                services.AddSwaggerGen(c =&gt;\n                {\n                    c.SwaggerDoc(&quot;v1&quot;, new OpenApiInfo { Title = &quot;Dotnet5App&quot;, Version = &quot;v1&quot; });\n                });\n            }\n    \n            // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.\n            public void Configure(IApplicationBuilder app, IWebHostEnvironment env)\n            {\n                if (env.IsDevelopment())\n                {\n                    app.UseDeveloperExceptionPage();\n                    //app.UseSwagger();\n                   // app.UseSwaggerUI(c =&gt; c.SwaggerEndpoint(&quot;/swagger/v1/swagger.json&quot;, &quot;Dotnet5App v1&quot;));\n                }\n    \n                app.UseHttpsRedirection();\n    \n                app.UseAuthorization();\n    \n                app.UseEndpoints(endpoints =&gt;\n                {\n                    endpoints.MapControllers();\n                    endpoints.MapGet(&quot;/&quot;, async context =&gt;\n                    {\n                        HttpRequest request = context.Request;\n                        request.EnableBuffering();   //&lt;-- add to try to make it work\n                        string message = &quot;Unknown&quot;;\n                        try\n                        {\n                            var reader = request.BodyReader;\n                            await reader.ReadAsync();   //&lt;-- add to try to make it work\n                            message = &quot;Content type: &quot; + (request.ContentType == null ? &quot;Null&quot; : request.ContentType) + &quot;&lt;br&gt;&quot; +\n                                &quot;Request size: &quot; + (request.ContentLength == null ? &quot;Null&quot; : request.ContentLength.ToString());\n                        }\n                        catch (Exception e)\n                        {\n                            message = &quot;Error: &quot; + e.Message;\n                        }\n                        await context.Response.WriteAsync(page(message));\n                    });\n                    \n                    endpoints.MapPost(&quot;/&quot;, async context =&gt;\n                    {\n                        HttpRequest request = context.Request;\n                        //request.Query[&quot;query&quot;].ToString()\n                        request.EnableBuffering();   //&lt;-- add to try to make it work\n                        string message = &quot;Unknown&quot;;\n                        try\n                        {\n                            var reader = request.BodyReader;\n                            await reader.ReadAsync();   //&lt;-- add to try to make it work\n                            message = &quot;Content type: &quot; + (request.ContentType == null ? &quot;Null&quot; : request.ContentType) + &quot;&lt;br&gt;&quot; +\n                                &quot;Request size: &quot; + (request.ContentLength == null ? &quot;Null&quot; : request.ContentLength.ToString());\n                        }\n                        catch (Exception e)\n                        {\n                            message = &quot;Error: &quot; + e.Message;\n                        }\n                        await context.Response.WriteAsync(page(message));\n                    });\n                });\n            }\n            public string page(string message)\n            {\n                return\n                    @&quot;&lt;html xmlns=&quot;&quot;http://www.w3.org/1999/xhtml&quot;&quot;&gt;\n                &lt;meta httm-equiv='Content-Type' content='text/html; charset=iso-8859-1' /&gt;\n                &lt;meta http-equiv=&quot;&quot;expires&quot;&quot; content=&quot;&quot;0&quot;&quot; /&gt;\n                &lt;title&gt;\n                TANCS TEST(PRODUCITON DATA)\n                &lt;/title &gt;\n                &lt;body&gt;\n                &lt;form method=&quot;&quot;post&quot;&quot;&gt;\n                Enter a value: &lt;input type=&quot;&quot;text&quot;&quot; id=&quot;&quot; value&quot;&quot; name=&quot;&quot;query&quot;&quot; width=20 value=&quot;&quot;xyz&quot;&quot;&gt;\n                &lt;input id=&quot;&quot;Save&quot;&quot; type=&quot;&quot;submit&quot;&quot;&gt;\n                &lt;/form&gt;\n                &quot; + message + @&quot;\n                &lt;/body&gt;\n                &lt;/html&gt;&quot;;\n            }\n        }\n</code></pre>\n<p><code>Note:</code></p>\n<p>You may have already noticed that I have added one additional <code>MapPost</code> because when if you wanted to submit value using <code>MapGet</code> by default there will be no <code>content type</code> as its query string. So you need to add <code>MapPost</code> method for handling <code>submit</code> action.</p>\n<p>Another point is <code>method=&quot;&quot;post&quot;&quot;</code> because you are submitting <code>post</code> request so you need to add this <code>method=&quot;&quot;post&quot;&quot;</code> attribute on your <code>form</code> request. Finally if you want to get the <code>request size</code> you have to set <code>name=&quot;&quot;query&quot;&quot;</code> on your form as you can see on my code.</p>\n<p>Additional point is, comment the <code>app.UseSwagger();</code> and <code>app.UseSwaggerUI</code> so that <code>UseSwaggerUI</code> will not be prompted on <code>launch page</code> instead it will launch <code>page method</code> which containing the HTML file you wanted to display.</p>\n<p>If you want to develop it further steps you can also check this <a href=\"https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api?view=aspnetcore-6.0&amp;tabs=visual-studio&amp;viewFallbackFrom=aspnetcore-5.0#add-the-api-code\" rel=\"nofollow noreferrer\"><code>official document</code></a> here as well.</p>\n<p><code>launchSettings.json:</code></p>\n<p>When you have created new <code>dotnet5</code> project by default it will added <code>swagger</code> on <code>launchUrl</code> which can see on <code>launchSettings.json</code> so here you should modify the <code>application launchUrl</code> as the port you want for example <code>https://localhost:44363</code> instead of <code>swagger</code></p>\n<p><code>Output:</code></p>\n<p>After implementing above modification run your project and you should get output as bellow:</p>\n<p><a href=\"https://i.sstatic.net/uP0ce.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/uP0ce.gif\" alt=\"enter image description here\" /></a></p>\n<p>This is the output of your code so far you have shared with us. This is how you can get the Content type and Request size using the minimal web API. You can get more details in our <a href=\"https://learn.microsoft.com/en-us/aspnet/core/web-api/route-to-code?view=aspnetcore-5.0#write-json-response\" rel=\"nofollow noreferrer\">official document here</a>.</p>\n", "tags": ["asp.net-core"]}
{"id": "b03e886c-b99c-4781-955f-b91db7659fc1", "text": "Q: Display data in chart form A: <p>You can use Chart.js to handle this kind of scenario. You could try the below sample to achieve what you want. Additionally, you can have a look on <a href=\"https://www.chartjs.org/docs/latest/configuration/title.html\" rel=\"nofollow noreferrer\">official document</a> for any kind of customization.</p>\n<p><strong>HTML:</strong></p>\n<pre class=\"lang-cs prettyprint-override\"><code>&lt;canvas id=&quot;myChart&quot; width=&quot;400&quot; height=&quot;400&quot;&gt;&lt;/canvas&gt;\n</code></pre>\n<p><strong>Chart.js Script</strong></p>\n<pre class=\"lang-cs prettyprint-override\"><code>var ctx = document.getElementById(&quot;myChart&quot;).getContext(&quot;2d&quot;);\n\nvar data = {\n  labels: [&quot;2020&quot;, &quot;2021&quot;, &quot;2022&quot;],\n  datasets: [{\n    label: &quot;Green&quot;,\n    backgroundColor: &quot;#3A5721&quot;,\n    data: [3, 7, 4]\n  }, {\n    label: &quot;Orange&quot;,\n    backgroundColor: &quot;#F6833B&quot;,\n    data: [4, 3, 5]\n  }, {\n    label: &quot;Yellow&quot;,\n    backgroundColor: &quot;yellow&quot;,\n    data: [7, 2, 6]\n  }]\n};\n\nvar myBarChart = new Chart(ctx, {\n  type: 'bar',\n  data: data,\n  options: {\n    barValueSpacing: 20,\n    scales: {\n      yAxes: [{\n        ticks: {\n          min: 0,\n        }\n      }]\n    }\n  }\n});\n</code></pre>\n<p><strong>Output:</strong></p>\n<p><a href=\"https://i.sstatic.net/8NBaL.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/8NBaL.gif\" alt=\"enter image description here\" /></a></p>\n<p><strong>JS Fiddle Example:</strong></p>\n<p>You have have look on the real life example and source file example on <a href=\"https://jsfiddle.net/faridkiron/7ab4xhpv/6/\" rel=\"nofollow noreferrer\">jsfiddle.net</a>.</p>\n<p><strong>Js Reference Required:</strong></p>\n<p>You need following reference on your project.</p>\n<p><code>https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.3.0/Chart.bundle.js</code>.</p>\n", "tags": ["asp.net-core", "crystal-reports"]}
{"id": "3417b6e4-2097-4368-922c-ebc9213384f8", "text": "Q: In Swift how do I display a percentage value rounded up or down with no decimal places A: <pre><code>let value : Double = 0.618\nlet decimalPlaces : Int = 0\nlet formattedPercent : String = value.formatted(.percent.precision(.fractionLength(decimalPlaces))) // Includes percent sign\n</code></pre>\n<p><a href=\"https://developer.apple.com/documentation/foundation/measurement/formatted()\" rel=\"nofollow noreferrer\">https://developer.apple.com/documentation/foundation/measurement/formatted()</a></p>\n<p><a href=\"https://developer.apple.com/documentation/foundation/decimal/formatstyle/percent\" rel=\"nofollow noreferrer\">https://developer.apple.com/documentation/foundation/decimal/formatstyle/percent</a></p>\n", "tags": ["swift"]}
{"id": "47ba716f-9d69-4c03-b067-66321f0e1690", "text": "Q: passing structures to functions A: <p>----------passing structures to functions by value and by reference.-----</p>\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n//structure definition\nstruct student{\nint age;\nint roll;\n};\nstruct employee{\nint age;\nint salary;\n};\n//function declaration-pass by value\nvoid struct_func(struct student s1);\n//function definition\nvoid struct_func(struct student s1){\n    printf(&quot; student age is %d and roll no is %d\\n&quot;,s1.age,s1.roll);\n}\n//function declaration-pass by reference\nvoid struct_func1(struct employee *x);\n//function definition\nvoid struct_func1(struct employee *x){\nprintf(&quot; employee age is %d and salary is %d&quot;,x-&gt;age,x-&gt;salary);\n}\nint main(){\nstruct student s1;\nstruct employee x;\nx.age=55;\nx.salary=25000;\ns1.age=25;\ns1.roll=3456;\nstruct employee *struct_ptr;\nstruct_ptr=&amp;x;\nstruct_func(s1);\nstruct_func1(&amp;x);\nreturn 0;\n}\n</code></pre>\n", "tags": ["c", "function", "structure"]}
{"id": "840bf39d-60f5-4388-b6e4-6650ec6b350d", "text": "Q: Ant &lt;script&gt; task failing with GraalJS after migrating to Java 17 A: <p>Add a full [MRE] and stack trace to the question.</p>\n", "tags": ["java", "ant", "graaljs"]}
{"id": "253ad734-c8c3-453d-aba6-0493b5c26ff2", "text": "Q: Initializing non-showing JComponent lazily A: <p>Not particularly pretty, but it works as expected.</p>\n<pre class=\"lang-java prettyprint-override\"><code>        table.addHierarchyListener(new HierarchyListener() {\n            @Override\n            public void hierarchyChanged(HierarchyEvent e) {\n                boolean showingChanged = (e.getChangeFlags() &amp; HierarchyEvent.SHOWING_CHANGED) != 0;\n                boolean firstShown = showingChanged &amp;&amp; table.isShowing();\n                if (!firstShown) return;\n                table.removeHierarchyListener(this);\n                loadTableData();\n            }\n        });\n</code></pre>\n", "tags": ["java", "swing"]}
{"id": "b08dfdb0-724e-4477-8e45-d16c928e6256", "text": "Q: moving from C, how to implement doubly linked list in C++ using the c++ features? A: <p>That's what I am trying to say, learn to use those first :)</p>\n", "tags": ["c++", "c++17", "idioms"]}
{"id": "424834d0-c62c-48ae-9081-e32e4d01203b", "text": "Q: Replacing several rows of data in a column efficiently using condition in a pipeline A: <p>Data (with seed) for reproducibility:</p>\n<pre class=\"lang-r prettyprint-override\"><code>set.seed(42)\ndf &lt;- data.frame(Form=rep(c(&quot;Fast&quot;, &quot;Medium&quot;, &quot;Slow&quot;), each  = 3), Parameter =rep(c(&quot;Fmax&quot;, &quot;TMAX&quot;, &quot;B&quot;), times =3), Estimate = sample(1:10, 9, replace = TRUE))\ndf\n#     Form Parameter Estimate\n# 1   Fast      Fmax        1\n# 2   Fast      TMAX        5\n# 3   Fast         B        1\n# 4 Medium      Fmax        9\n# 5 Medium      TMAX       10\n# 6 Medium         B        4\n# 7   Slow      Fmax        2\n# 8   Slow      TMAX       10\n# 9   Slow         B        1\n</code></pre>\n<p>Solution:</p>\n<pre class=\"lang-r prettyprint-override\"><code>df |&gt;\n  mutate(\n    .by = Parameter,\n    Estimate = if_else(&quot;Slow&quot; %in% Form &amp; Form == &quot;Medium&quot;, \n                       Estimate[Form == &quot;Slow&quot;], Estimate)\n  )\n#     Form Parameter Estimate\n# 1   Fast      Fmax        1\n# 2   Fast      TMAX        5\n# 3   Fast         B        1\n# 4 Medium      Fmax        2\n# 5 Medium      TMAX       10\n# 6 Medium         B        1\n# 7   Slow      Fmax        2\n# 8   Slow      TMAX       10\n# 9   Slow         B        1\n\n</code></pre>\n<p>I'm inferring that this should be done per-<code>Parameter</code> and not just row-relative, ergo the <code>.by = Parameter</code>.</p>\n", "tags": ["r", "dataframe", "replace", "tidyverse", "mutate"]}
