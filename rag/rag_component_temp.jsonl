{"id": "7208856a-ab40-45ab-a2ac-6f9f7d37d19f", "text": "Q: Use if.. else if.. or Hashmap to switch a long list of strings? A: <p>Following Jarod42's suggestion (thanks for the stringswitch link by the way), I wonder whether it would be possible to build some kind of compile time <strong>minimal</strong> perfect hash function, supposing that all the N test strings are known at compile time. Such a hash function would ensure that each test string can be hashed into a unique integer in range [0:N[. In such a case, the problem would consist in hashing a test string into its hash code <code>h</code> in range [0:N[ and then find the corresponding entry at index <code>h</code> in a mere array of size N, an operation doable in O(1).</p>\n<p>Note that building minimal perfect hash function is not that trivial so doing it at compile time would be quite a huge meta-programming challenge (if even possible in the end). Likely easier, one could build the hash function outside the program and only implement hash querying at compile time from the data structure computed during the hash building (still not easy I suppose).</p>\n<hr />\n<p><strong>Update</strong></p>\n<p>It is much easier to compute a <strong>perfect</strong> hash function that is <strong>not minimal</strong> with an integer span not too big compared to <code>[0:N[</code>. Using the idea from <a href=\"https://stackoverflow.com/a/55843687/2229039\">this post</a>, one can indeed build at compile time an array acting like a map (<a href=\"https://godbolt.org/z/rGTb7Ko9M\" rel=\"nofollow noreferrer\">example</a>). Note however that it might be long/difficult for the compiler to make it compiled (e.g. changing <code>-fconstexpr-ops-limit</code> possiblity needed) so computing the hash index outside once (if the keys are known and don't change) could still be helpful.</p>\n<p>Note that I made no performance test at all with this approach, so no idea if it can beat the other ones. Note also that having a perfect hash function is perhaps interesting but a not perfect hash function with a very limited risk of hash collisions may be acceptable in the first place.</p>\n<hr />\n<p><strong>Update</strong></p>\n<p><a href=\"https://godbolt.org/z/eGx5dzoxb\" rel=\"nofollow noreferrer\">Here</a> is an simple attempt to encapsulate this idea. Obviously, finding the hash index at compile time for a small range is a hard task; in the provided example, it is possible to find at runtime other couples span/index with lower spans.</p>\n", "tags": ["c++", "performance", "switch-statement"]}
{"id": "d6bb47e9-1c45-4c2c-b777-519c7ae91520", "text": "Q: How to install and build valgrind from source on Ubuntu 18.04? A: <p>You mention AVX. In that case I would recommend that you build Valgrind from the sourceware git repo. Follow the instructions <a href=\"https://www.valgrind.org/downloads/repository.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Next you will probably need to apply the patch attached to <a href=\"https://bugs.kde.org/show_bug.cgi?id=383010\" rel=\"nofollow noreferrer\">this</a> bugzilla item. The patch will also most likely apply to the 3.16 source as both are quite recent at the time of writing (late May / early June 2020).</p>\n\n<p>If this succeeds, it would be very helpful if you could provide some feedback, either here or via a comment in the bugzilla item.</p>\n", "tags": ["ubuntu", "valgrind"]}
{"id": "314f4776-4d92-4b9f-abce-5c0a525239a5", "text": "Q: How I can get the controllers battery level of Meta Quest in an android app A: <p>There's a Bluetooth SIG's standard Battery Service characteristic (UUID <code>0x2A19</code>), which reports the percentage. It's availablity can be tested with other apps, for example: Nordic Semiconductor <a href=\"https://play.google.com/store/apps/details?id=no.nordicsemi.android.mcp\" rel=\"nofollow noreferrer\">nRF Connect</a>.</p>\n<p>If available, take the base UUID <code>00000000-0000-1000-8000-00805F9B34FB</code> combined with <code>0x2A19</code>, which is the <code>org.bluetooth.characteristic.battery_level</code>. There's a lot of services, eg. <code>0000180F-0000-1000-8000-00805F9B34FB</code> would be the Battery Service itself.</p>\n<pre><code>/* org.bluetooth.characteristic.battery_level */\nUUID.fromString(&quot;00002A19-0000-1000-8000-00805F9B34FB&quot;);\n</code></pre>\n<hr />\n<p>This would be the relevant <a href=\"https://github.com/oesmith/gatt-xml/blob/master/org.bluetooth.service.battery_service.xml\" rel=\"nofollow noreferrer\">specs</a> for the Battery Service and it's characteristics.<br/>\nWhile I've even found a quite suitable <a href=\"https://medium.com/@androidcrypto/add-a-battery-service-listener-to-a-android-bluetooth-low-energy-client-part-3-c70e16ed130a\" rel=\"nofollow noreferrer\">tutorial</a>, which explains the client-side ...</p>\n", "tags": ["java", "android", "metaquest"]}
{"id": "9f109f14-b2e7-4923-85cf-eb55bf453669", "text": "Q: How do I blur an electron BrowserWindow with transparency A: <p>Edit:<br />\nTime has passed since writing this and electron acrylic window was released, but since has been archived as Electron now does support it natively. Please see <a href=\"https://stackoverflow.com/a/77835944/8806870\">this thread</a></p>\n<p><em>Original answer:</em><br />\nElectron does not allow you to blur on anything running behind it. It only allows you to blur the content on your webpage/app. Anything in your css styling will only be applied to the foreground contents. I know because I too have tried and failed.</p>\n", "tags": ["css", "node.js", "electron", "transparent", "blur"]}
{"id": "0b2d98a3-1e62-4d5e-a248-aaa5a506939a", "text": "Q: Android Side Sheet Dialog Dismiss on Content View Click A: <p>I think this is also a bug. See <a href=\"https://github.com/material-components/material-components-android/pull/4351\" rel=\"nofollow noreferrer\">https://github.com/material-components/material-components-android/pull/4351</a> for more details.</p>\n", "tags": ["android", "material-ui", "material-design", "android-dialog", "material-components-android"]}
{"id": "1d7b7834-43de-4190-8f65-8d82ec78b499", "text": "Q: Include a C header with complex float types in C++ A: <p>I figured out a solution based on the original question comments: Adding <code>#define complex _Complex</code> in the C++ conditional in the C headers then an <code>#undef complex</code> in the end of this conditional to avoid interfering with C++ own complex type. The file <code>c_source.h</code> then becomes:</p>\n<pre><code>#include &lt;complex.h&gt;\n\n#ifdef __cplusplus\n#define complex _Complex\nextern &quot;C&quot;\n{\n#endif\n\n    double complex arg_d(double complex z);\n\n#ifdef __cplusplus\n}\n#undef complex\n#endif\n</code></pre>\n<p>This should work if your C++ compiler provides the <code>_Complex</code> as a nonstandard extension. <code>g++</code> appears to provide this extension so it should work.</p>\n", "tags": ["c++", "c", "binding", "complex-numbers"]}
{"id": "1cb513b1-e02f-449f-bc77-2a45331375b5", "text": "Q: iOS 26 SwiftUI app when keyboard is shown, the keyboard&#39;s toolbar covers the text input (it worked on iOS 18) A: <p>Try adding <code>ToolbarSpacer</code> either side of the <code>keyboardButtons</code>, to fill out the width of the toolbar. The sizing needs to be <code>.fixed</code>:</p>\n<pre class=\"lang-swift prettyprint-override\"><code>.toolbar {\n    if #available(iOS 26.0, *) {\n        ToolbarSpacer(.fixed, placement: .keyboard)\n    }\n    ToolbarItemGroup(placement: .keyboard) {\n        keyboardButtons\n    }\n    if #available(iOS 26.0, *) {\n        ToolbarSpacer(.fixed, placement: .keyboard)\n    }\n}\n</code></pre>\n<p><img src=\"https://i.sstatic.net/MB3Zzjmpm.png\" alt=\"Screenshot\" /></p>\n<p>Ps. I could only reproduce the problem on a simulator by toggling the visibility of the keyboard using <kbd>\u2318</kbd><kbd>K</kbd>. I found that if the keyboard shows automatically, the content scrolls up correctly, even without the spacer. So be sure to test on a real device (and definitely not with Preview).</p>\n", "tags": ["ios", "swift", "swiftui", "ios26"]}
{"id": "a02449f4-1129-4e91-9c1b-048d8a416d90", "text": "Q: Why does WhatsApp Web IndexedDB return &#39;@lid&#39; IDs instead of phone numbers for some group participants? A: <p>There's a method for getting a number, but it only works for unsaved numbers.</p>\n<p>const chat = await message.getChat();</p>\n<p>const phone = chat.name.replace(/\\D/g, '');</p>\n", "tags": ["javascript", "google-chrome-extension", "whatsapp"]}
