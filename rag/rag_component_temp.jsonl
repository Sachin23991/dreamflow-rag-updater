{"id": "bd0b6b7b-8a12-4b84-903c-9fb5b35016d5", "text": "Q: matplotlib has no attribute &#39;pyplot&#39; A: <p>plt.grid()\nor\nplt.grid(True, linestyle='--', alpha=0.7)</p>\n", "tags": ["python", "matplotlib"]}
{"id": "5992cb3e-2d83-4f11-ab68-8b2e14db2274", "text": "Q: Replacing several rows of data in a column efficiently using condition in a piepline A: <p>Data (with seed) for reproducibility:</p>\n<pre class=\"lang-r prettyprint-override\"><code>set.seed(42)\ndf &lt;- data.frame(Form=rep(c(&quot;Fast&quot;, &quot;Medium&quot;, &quot;Slow&quot;), each  = 3), Parameter =rep(c(&quot;Fmax&quot;, &quot;TMAX&quot;, &quot;B&quot;), times =3), Estimate = sample(1:10, 9, replace = TRUE))\ndf\n#     Form Parameter Estimate\n# 1   Fast      Fmax        1\n# 2   Fast      TMAX        5\n# 3   Fast         B        1\n# 4 Medium      Fmax        9\n# 5 Medium      TMAX       10\n# 6 Medium         B        4\n# 7   Slow      Fmax        2\n# 8   Slow      TMAX       10\n# 9   Slow         B        1\n</code></pre>\n<p>Solution:</p>\n<pre class=\"lang-r prettyprint-override\"><code>df |&gt;\n  mutate(\n    .by = Parameter,\n    Estimate = if_else(all(c(&quot;Medium&quot;, &quot;Slow&quot;) %in% Form) &amp; Form == &quot;Medium&quot;, \n                       Estimate[Form == &quot;Slow&quot;], Estimate)\n  )\n#     Form Parameter Estimate\n# 1   Fast      Fmax        1\n# 2   Fast      TMAX        5\n# 3   Fast         B        1\n# 4 Medium      Fmax        2\n# 5 Medium      TMAX       10\n# 6 Medium         B        1\n# 7   Slow      Fmax        2\n# 8   Slow      TMAX       10\n# 9   Slow         B        1\n\n</code></pre>\n<p>I'm inferring that this should be done per-<code>Parameter</code> and not just row-relative, ergo the <code>.by = Parameter</code>.</p>\n", "tags": ["r", "dataframe", "replace", "tidyverse", "mutate"]}
{"id": "d27da13b-d193-49da-808d-312784af762b", "text": "Q: moving from C, how to implement doubly linked list in C++ using the c++ features? A: <p>In 99.9% of the cases I would agree with you on this. But as a training exercise on how to use C++ to create a data structure it is not really a bad start. It teaches about how to use classes to encapsulate memory management (so other code doesn't have to worry about memory leaks etc.). It touches on &quot;ownership&quot; who owns what data and when are raw pointers still ok (when they don't own anything) etc. But yes he should definitely start with learning how to use <a href=\"https://en.cppreference.com/w/cpp/container.html\" rel=\"nofollow noreferrer\">containers</a>  and <a href=\"https://en.cppreference.com/w/cpp/algorithm.html\" rel=\"nofollow noreferrer\">algorithms</a> first.  I would say implementing data structures is a bit more of an advanced use case and it helps a lot if you already know how algorithms and containers (iterators/ranges) work together.</p>\n", "tags": ["c++", "c++17", "idioms"]}
{"id": "b95ee564-6084-4a61-a81d-bf451c595758", "text": "Q: Store output diskspace df -h JSON A: <blockquote>\n<p>I am looking to record the <strong>available &amp; used disk space</strong>.</p>\n</blockquote>\n<p>It's 2025/2026 and to my knowledge <code>df</code> has no JSON output -- otherwise this should not have been presented to me as a top search link -- but lsblk does and it has the information you asked for.</p>\n<pre><code>\u276f lsblk -o NAME,LABEL,FSAVAIL,FSUSED --paths\nNAME                                    LABEL         FSAVAIL FSUSED\n/dev/nvme5n1\n\u251c\u2500/dev/nvme5n1p1                                           1G   6.1M\n\u251c\u2500/dev/nvme5n1p2                                         1.6G 211.6M\n\u2514\u2500/dev/nvme5n1p3\n  \u2514\u2500/dev/mapper/dm_crypt-0\n    \u2514\u2500/dev/mapper/ubuntu--vg-ubuntu--lv                445.2G 421.1G\n</code></pre>\n<p>Execute: <code>lsblk -o NAME,LABEL,FSAVAIL,FSUSED --paths --json</code></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n   &quot;blockdevices&quot;: [\n      {\n         &quot;name&quot;: &quot;/dev/nvme5n1&quot;,\n         &quot;label&quot;: null,\n         &quot;fsavail&quot;: null,\n         &quot;fsused&quot;: null,\n         &quot;children&quot;: [\n            {\n               &quot;name&quot;: &quot;/dev/nvme5n1p1&quot;,\n               &quot;label&quot;: null,\n               &quot;fsavail&quot;: &quot;1G&quot;,\n               &quot;fsused&quot;: &quot;6.1M&quot;\n            },{\n               &quot;name&quot;: &quot;/dev/nvme5n1p2&quot;,\n               &quot;label&quot;: null,\n               &quot;fsavail&quot;: &quot;1.6G&quot;,\n               &quot;fsused&quot;: &quot;211.6M&quot;\n            },{\n               &quot;name&quot;: &quot;/dev/nvme5n1p3&quot;,\n               &quot;label&quot;: null,\n               &quot;fsavail&quot;: null,\n               &quot;fsused&quot;: null,\n               &quot;children&quot;: [\n                  {\n                     &quot;name&quot;: &quot;/dev/mapper/dm_crypt-0&quot;,\n                     &quot;label&quot;: null,\n                     &quot;fsavail&quot;: null,\n                     &quot;fsused&quot;: null,\n                     &quot;children&quot;: [\n                        {\n                           &quot;name&quot;: &quot;/dev/mapper/ubuntu--vg-ubuntu--lv&quot;,\n                           &quot;label&quot;: null,\n                           &quot;fsavail&quot;: &quot;445.2G&quot;,\n                           &quot;fsused&quot;: &quot;421.1G&quot;\n                        }\n                     ]\n                  }\n               ]\n            }\n         ]\n      }\n   ]\n}\n</code></pre>\n", "tags": ["json", "bash"]}
{"id": "a8365bf9-3000-4372-b609-77d1ca4969fe", "text": "Q: Postgres 18 syntax A: <p>You have to use different syntax with a composite type:</p>\n<pre><code>RETURNING (coalesce(NEW, OLD)).* INTO v_organisation\n</code></pre>\n<p>But not that the variable will be empty if you <code>DO NOTHING</code>. If you don't like that, you could perform an <code>UPDATE</code> that does nothing:</p>\n<pre><code>INSERT INTO ... VALUES (...)\nON CONFLICT (organisation_name)\n   WHERE is_deleted IS NOT TRUE\nDO UPDATE\n   SET is_deleted = organisations.is_deleted\nRETURNING (coalesce(NEW, OLD)).* INTO v_organisation\n</code></pre>\n", "tags": ["postgresql"]}
{"id": "555eb9ac-edb1-4c95-9a78-12e4c5597a6e", "text": "Q: Promise rejection not getting caught A: <blockquote>\n  <p>onRejected never handles rejected promises from the same .then(onFulfilled) callback and .catch takes both.</p>\n</blockquote>\n\n<pre class=\"lang-js prettyprint-override\"><code>const getPromise = () =&gt; new Promise((resolve, reject) =&gt; {  Math.round(Math.random()) ?     resolve('resolve #1') :     reject('reject #1')})\n\ngetPromise().then(result =&gt; {  throw new Error('reject #2')}, error =&gt; {  // Handles only 'reject #1'})\n\ngetPromise().then(result =&gt; {  throw new Error('reject #2')})  .catch(error =&gt; {    // Handles both 'reject #1',     // and 'reject #2'  }))\n</code></pre>\n\n<p>Above description was from this link: <a href=\"https://www.freecodecamp.org/news/the-real-difference-between-catch-vs-onrejected-15cab8978e92/\" rel=\"nofollow noreferrer\">The real difference between catch vs onRejected</a></p>\n", "tags": ["javascript"]}
{"id": "204285d1-451a-4544-bded-37e2d62d3e14", "text": "Q: print two diamonds side by side A: <p>Here.  I used the Manhattan distance.  We go though each row n*2 times.  At each point (x,y) we check to see if we print a star of the diamond.  For a solid diamond we check if we are &lt;= to the radius.  For a hollow diamond == to the radius.  For an inverse diamond we check &gt;=.  If the dot meets the criteria, we print a star.  else a space.  at the end of each row we print a newline. The second diamond has a center for column that is n further out.  The row center is the same for both diamonds.  If neither diamond is going to be a yes for this x,y we print a space. It this case I used == on the 2nd diamond check so the second diamond is hollow.</p>\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main() { \n   int n,row,col,c; \n   cout&lt;&lt;&quot;\\n\\nEnter number of rows: &quot;;\n   cin&gt;&gt;n;\n   n|=1; // make odd\n   c = n/2; // radius of Diamond\n   for (row=0;row&lt;n;row++) { \n      for (col=0;col&lt;n*2;col++) { \n         if ((abs(row-c)+abs(col-c) &lt;= c) | // 1st Diamond? \n             (abs(row-c)+abs(col-(c+n)) == c)) // 2nd diamond? \n            cout&lt;&lt;'*'; // star at this x,y\n         else \n            cout&lt;&lt;' '; // blank at x,y\n      }\n      cout&lt;&lt;endl; // end of row \n   }\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>$ g++ -o test diamondTwo.cpp \n$ ./test \n\n\nEnter number of rows: 11\n     *          *     \n    ***        * *    \n   *****      *   *   \n  *******    *     *  \n *********  *       * \n************         *\n *********  *       * \n  *******    *     *  \n   *****      *   *   \n    ***        * *    \n     *          *     \n</code></pre>\n", "tags": ["c++", "shapes"]}
{"id": "b2a9cb44-6700-4594-8a24-1de9a93b7b73", "text": "Q: Why the default implementation of foo.pb.go use global registry, can I modify it to avoid namesapce conflict? A: <p>Since the file starts with</p>\n<pre class=\"lang-golang prettyprint-override\"><code>// Code generated by protoc-gen-go. DO NOT EDIT.\n</code></pre>\n<p>it's probably not okay to modify it ;)</p>\n<pre><code>option go_package = &quot;./example&quot;;\n</code></pre>\n<p><code>./example</code> is not a valid go package. It should probably be</p>\n<pre><code>option go_package = &quot;Hello/test_proto/pkg2/example&quot;;\n</code></pre>\n<p>with \u201cHello\u201d being your module name. You'll seriously mess up <a href=\"https://pkg.go.dev/google.golang.org/protobuf/types/descriptorpb#DescriptorProto\" rel=\"nofollow noreferrer\">descriptorpb.DescriptorProto</a>, <a href=\"https://pkg.go.dev/google.golang.org/protobuf/reflect/protoreflect\" rel=\"nofollow noreferrer\">protoreflect</a> and <a href=\"https://pkg.go.dev/google.golang.org/protobuf/types/known/anypb#Any\" rel=\"nofollow noreferrer\">Any</a> if you edit generated files.</p>\n<p>Use different files when you need different structures. And use valid Go package names in <code>option go_package</code>.</p>\n<hr />\n<p><strong>Edit</strong>:</p>\n<p>The package used in generated code, <a href=\"https://pkg.go.dev/google.golang.org/protobuf/runtime/protoimpl\" rel=\"nofollow noreferrer\"><code>protoimpl</code></a> warns: <em>\u201cThis package should only ever be imported by generated messages. The compatibility agreement covers nothing except for functionality needed to keep existing generated messages operational. Breakages that occur due to unauthorized usages of this package are not the author's responsibility.\u201d</em></p>\n<p>You can use your own registry, but not with generated code. For example <a href=\"https://pkg.go.dev/google.golang.org/protobuf/types/known/anypb#hdr-Unmarshaling_an_Any\" rel=\"nofollow noreferrer\"><code>any.UnmarshalNew</code></a>: <em>\u201cUnmarshalNew <strong>uses the global type registry</strong> to resolve the message type and construct a new instance of that message to unmarshal into.\u201d</em></p>\n<p>Or <a href=\"https://pkg.go.dev/google.golang.org/protobuf@v1.34.2/proto#UnmarshalOptions\" rel=\"nofollow noreferrer\"><code>proto.UnmarshalOptions</code></a>: <em>\u201cResolver is used for looking up types when unmarshaling extension fields. If nil, <strong>this defaults to using protoregistry.GlobalTypes</strong>.\u201d</em></p>\n<p>Since this is called recursively, you can't mix types between registries, and you have to provide your own registry with every call.</p>\n<p>I expect the breakage to be subtle at first, but you are clearly violating the assumption the generated code makes.</p>\n<p>See also <a href=\"https://stackoverflow.com/q/78388572/1232928\"><em>\u201cHow does the protoregistry.GlobalTypes load the types?\u201d</em></a> for strange results when types are missing from the global registry.</p>\n", "tags": ["go", "protocol-buffers", "protocols"]}
