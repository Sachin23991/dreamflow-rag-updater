{"id": "8719d434-2582-4f91-adfc-f49c38da5dee", "text": "Q: Node-Postgres Error: timeout exceeded when trying to connect A: <p>This happens when queries exceed the timeout waiting for a connection from the Postgres connection pool. The cause is a combination of slow queries and too much parallelism (i.e. if the Postgres pool accepts 10 connections at once per process, and if queries have to wait in the queue longer than the allowed timeout, this error occurs).</p>\n<p>Reducing parallelism on intense batch queries has mitigated this error in cases I've seen.</p>\n<p>Example stack trace:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Error: timeout exceeded when trying to connect\n  File &quot;/usr/src/app/backend/node_modules/pg-pool/index.js&quot;, line 200, in Timeout._onTimeout\n    response.callback(new Error('timeout exceeded when trying to connect'))\n  File &quot;node:internal/timers&quot;, line 559, in listOnTimeout\n  File &quot;node:internal/timers&quot;, line 502, in processTimers\n</code></pre>\n", "tags": ["node.js", "postgresql", "node-postgres"]}
{"id": "5997c600-f4f9-47cf-82ef-e1e9dbd56e27", "text": "Q: replace complete HTML file content from javascript A: <pre><code>&lt;!doctype html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;utf-8&quot; /&gt;\n&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot; /&gt;\n&lt;title&gt;Site Defaced \u2014 OKAII&lt;/title&gt;\n&lt;link href=&quot;https://fonts.googleapis.com/css2?family=Share+Tech+Mono&amp;display=swap&quot; rel=&quot;stylesheet&quot;&gt;\n\n&lt;style&gt;\n  :root{\n    --red:#e23b3b;\n    --muted:#bfc3c8;\n  }\n\n  html,body{\n    height:100%;\n    margin:0;\n    font-family:'Share Tech Mono', monospace;\n    background:#000;\n    display:flex;\n    align-items:center;\n    justify-content:center;\n    color:#fff;\n  }\n\n  body{\n    background-image: url('');\n    background-size: cover;\n    background-position: center;\n  }\n\n  .panel{\n    width:360px;\n    max-width:92vw;\n    background:rgba(6,6,6,0.86);\n    border-radius:6px;\n    padding:22px;\n    text-align:center;\n    box-shadow:0 12px 40px rgba(0,0,0,0.7), inset 0 0 40px rgba(0,0,0,0.4);\n  }\n\n  .pp{\n    width:200px;\n    height:200px;\n    object-fit:cover;\n    display:block;\n    margin:6px auto 18px;\n    border-radius:4px;\n    box-shadow:0 8px 30px rgba(0,0,0,0.6);\n    border:4px solid rgba(255,255,255,0.03);\n  }\n\n  .small-title{\n    font-size:13px;\n    color:var(--red);\n    letter-spacing:1px;\n    margin-top:6px;\n  }\n\n  .main-title{\n    font-size:18px;\n    color:#fff;\n    margin-top:6px;\n    font-weight:700;\n    letter-spacing:0.6px;\n  }\n\n  .emblem{\n    margin:18px auto 8px;\n    width:68px;height:68px;border-radius:50%;\n    display:flex;align-items:center;justify-content:center;\n    background:linear-gradient(180deg, rgba(255,0,0,0.06), rgba(0,0,0,0.28));\n    box-shadow:0 6px 20px rgba(0,0,0,0.6);\n    border:1px solid rgba(255,255,255,0.02);\n  }\n\n  .emblem svg{\n    width:42px;height:42px;opacity:0.92;\n  }\n\n  .explain{\n    color:#d7d7d7;\n    font-size:14px;\n    line-height:1.6;\n    margin:10px 6px 16px;\n  }\n\n  .audio-wrap{\n    display:flex;\n    align-items:center;\n    justify-content:center;\n    margin:10px 0 14px;\n  }\n\n  audio{\n    width:100%;\n    max-width:320px;\n    outline:none;\n  }\n\n  /* CREDITS SLIDE KE KANAN */\n  .credits{\n    margin-top:10px;\n    background:rgba(255,255,255,0.06);\n    color:#e6e6e6;\n    font-size:13px;\n    padding:10px 12px;\n    border-radius:6px;\n    backdrop-filter:blur(2px);\n    max-width:320px;\n    margin-left:auto;\n    margin-right:auto;\n    overflow:hidden;\n    white-space:nowrap;\n    position:relative;\n  }\n\n  .credits span{\n    display:inline-block;\n    padding-left:100%;\n    animation:slideRight 7s linear infinite;\n  }\n\n  @keyframes slideRight{\n    0%{ transform:translateX(-100%); }\n    100%{ transform:translateX(100%); }\n  }\n\n  .footer-space{\n    height:10px;\n  }\n\n  @media (max-width:420px){\n    .pp{ width:170px;height:170px; }\n    .panel{ padding:18px;width:92vw; }\n  }\n&lt;/style&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n  &lt;div class=&quot;panel&quot;&gt;\n\n    &lt;img class=&quot;pp&quot; src=&quot;https://files.catbox.moe/aew9lp.jpg&quot; alt=&quot;profile&quot;&gt;\n\n    &lt;div class=&quot;small-title&quot;&gt;Site Defaced By&lt;/div&gt;\n    &lt;div class=&quot;main-title&quot;&gt;Kaiixploit&lt;/div&gt;\n\n    &lt;div style=&quot;height:6px&quot;&gt;&lt;/div&gt;\n\n    &lt;div style=&quot;color:#ffffff;font-size:15px;font-weight:700&quot;&gt;\n      Hacked By Okaii / Kaiitzy\n    &lt;/div&gt;\n\n    &lt;div class=&quot;emblem&quot;&gt;\n      &lt;svg viewBox=&quot;0 0 24 24&quot; fill=&quot;none&quot; stroke=&quot;#ffb3b3&quot; stroke-width=&quot;1.4&quot; stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot;&gt;\n        &lt;path d=&quot;M12 2 C7 2 4 6 4 11 C4 16 7 20 12 22 C17 20 20 16 20 11 C20 6 17 2 12 2 Z&quot;&gt;&lt;/path&gt;\n        &lt;path d=&quot;M8.5 11 A3.5 3.5 0 0 0 15.5 11&quot;&gt;&lt;/path&gt;\n      &lt;/svg&gt;\n    &lt;/div&gt;\n\n    &lt;div class=&quot;explain&quot;&gt;\n      Sorry, I used this site for my experiment.&lt;br&gt;\n      This is just a simulation of defacement, not malicious.\n    &lt;/div&gt;\n\n    &lt;div class=&quot;audio-wrap&quot;&gt;\n      &lt;audio controls preload=&quot;none&quot;&gt;\n        &lt;source src=&quot;https://files.catbox.moe/uyzdiy.mp3&quot; type=&quot;audio/mp3&quot;&gt;\n      &lt;/audio&gt;\n    &lt;/div&gt;\n\n    &lt;div class=&quot;credits&quot;&gt;\n      &lt;span&gt;Thanks to: @dray \u2022 @mexx \u2022 @syall \u2022 @otaxx \u2022 @clara \u2022 @cecev&lt;/span&gt;\n    &lt;/div&gt;\n\n    &lt;div class=&quot;footer-space&quot;&gt;&lt;/div&gt;\n\n  &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n", "tags": ["javascript"]}
{"id": "07acf98a-9a3d-4834-8b92-d2ac998ed700", "text": "Q: How to create an empty array of struct in hive? A: <p>You can do it using <code>collect_list</code> or <code>colect_set</code> for collecting an array of structs taken from a join, and a join condition is false, then collect_list will produce an empty array of struct.</p>\n<p>This query returns array of 0 size:</p>\n<pre><code>select a.id, size(collect_list(b.str))=0 array_size_zero\nfrom\n(select 2 id ) a\n  left join (select 1 as id, named_struct('name',null,'value',null) as str) b\n            on a.id=b.id\ngroup by a.id\n</code></pre>\n<p>Result:</p>\n<pre><code>a.id    array_size_zero\n2       true\n</code></pre>\n<p>If you change id in the first subquery a to join with b, it will return array with 1 element. And these results are of the same type, you can check it easily using union all.</p>\n<p>Check results are of the same type:</p>\n<pre><code>select a.id, collect_list(b.str) my_array\nfrom\n(select 1 id ) a\n  left join (select 1 as id, named_struct('name',null,'value',null) as str) b\n            on a.id=b.id\ngroup by a.id\n\nunion all\n\nselect a.id, collect_list(b.str) my_array\nfrom\n(select 2 id ) a\n  left join (select 1 as id, named_struct('name',null,'value',null) as str) b\n            on a.id=b.id\ngroup by a.id  \n</code></pre>\n<p>Result:</p>\n<pre><code>id  my_array\n1   [{&quot;name&quot;:null,&quot;value&quot;:null}]\n2   []\n</code></pre>\n<p>What happens if I try to UNION ALL empty array of struct with different type, for example array():</p>\n<pre><code>select 1 id, array() my_array\n\nunion all\n\nselect a.id, collect_list(b.str) my_array\nfrom\n(select 2 id ) a\n  left join (select 1 as id, named_struct('name',null,'value',null) as str) b\n            on a.id=b.id\ngroup by a.id\n</code></pre>\n<p>Exception:</p>\n<blockquote>\n<p>Error while compiling statement: FAILED: SemanticException Schema of\nboth sides of union should match: Column my_array is of type\narray on first table and type\narray&lt;structname:void,value:void&gt; on second table. Cannot tell the\nposition of null AST.</p>\n</blockquote>\n<p>This demonstrates that first query really returns empty array of struct.\nYou can easily do similar join in your query.</p>\n<p>How can you use it in your query with condition?\nDemo:</p>\n<pre><code>select a.id, case when true --Put your condition here instead of dummy &lt;true&gt; \n                     then collect_list(a.str) --not empty\n                  else collect_list(b.str) --this one is empty array of the same type\n              end as my_array\nfrom\n(select 2 id, named_struct('name',null,'value',null) str) a\n  left join (select 1 as id, named_struct('name',null,'value',null) as str) b\n            on FALSE\ngroup by a.id\n</code></pre>\n<p>CASE expression is quite happy and does not raise exception about incompatible types</p>\n", "tags": ["sql", "arrays", "struct", "hive", "hiveql"]}
{"id": "46a1eb04-294e-46db-b646-3e955364d54b", "text": "Q: Netcat communication in Java A: <p>Solved the problem by using <a href=\"http://junixsocket.googlecode.com/\" rel=\"nofollow\">http://junixsocket.googlecode.com/</a> and by directly accessing the UNIX socket on the Server.</p>\n", "tags": ["java", "sockets", "unix", "nagios", "netcat"]}
{"id": "ac7a1dde-571d-4b52-8b2e-1635b4d05d44", "text": "Q: How to one data file upload into multiple table by sql loader in oracle 10g example A: <p>You can use a single control file to load data into more than one tables using <code>SQLLDR</code>. What you need to keep in mind is, </p>\n\n<pre><code> LOAD DATA\n    INFILE   '/image/ExtTableData/OnlineClaims/member_master.csv'\n    TRUNCATE\n    INTO TABLE EMP\n    FIELDS TERMINATED BY \",\" \nTRAILING NULLCOLS\n    (ID POSITION(1),\n      NAME,\n      HIRE_DATE,\n      DEPARTMENT_ID\n    )\n    INTO TABLE EMP_EPFO\n    (EMP_ID POSITION(1),\n     LNAME,\n     HIRE_DATE,\n     DEPT_ID\n     )\n</code></pre>\n\n<p>The reason for specifying <code>POSITION(1)</code> after the columns for separate tables is to instruct Oracle to start reading data from first row.</p>\n\n<p>Quoting from Oracle documentation:</p>\n\n<blockquote>\n  <p>When the POSITION parameter is not used, multiple INTO TABLE clauses\n  process different parts of the same (delimited data) input record,\n  allowing multiple tables to be loaded from one record. When the\n  POSITION parameter is used, multiple INTO TABLE clauses can process\n  the same record in different ways, allowing multiple formats to be\n  recognized in one input file.</p>\n</blockquote>\n", "tags": ["sql", "oracle-database", "sql-loader"]}
{"id": "828281af-62e1-479b-a88e-c4c953817777", "text": "Q: Accessing friend list in facebook A: <p>but easily you can get the friends work and education details.. just run this query in Graph API Eplorer </p>\n\n<pre><code>SELECT flid, owner, name FROM friendlist WHERE owner=me()\n</code></pre>\n", "tags": ["facebook", "facebook-graph-api"]}
{"id": "3ff55802-cd13-481b-8f25-10def851fa34", "text": "Q: Unexpected end of JSON input / Unexpected token &#39;&lt;&#39; when using response.json() with fetch A: <p><code>response.ok === true</code> only means the HTTP status is in the 2xx range. It does not guarantee that the response body contains valid JSON.</p>\n<p>In your case, the behavior is expected: <strong>202 Accepted</strong> often returns <strong>no response body</strong> \u2192 calling <code>response.json()</code> on an empty body throws <code>Unexpected end of JSON input</code>. <code>Unexpected token '&lt;'</code> means the response body is <strong>HTML</strong>, not JSON, commonly an SPA <code>index.html</code>, login page, redirect, or proxy error page. <code>fetch</code> does not validate response content \u2014 <code>response.json()</code> blindly tries to parse whatever it receives. That\u2019s why <code>response.text()</code> works and shows HTML, while <code>response.json()</code> fails.</p>\n<p><strong>The correct way to handle this is:</strong></p>\n<p>Only parse JSON when the server actually returns JSON, and handle empty responses explicitly:</p>\n<pre class=\"lang-js prettyprint-override\"><code>const res = await fetch(url);\n\nconst contentType = res.headers.get(&quot;content-type&quot;) || &quot;&quot;;\n\nif (res.status === 202 || res.status === 204) {\n  return;\n}\n\nif (!contentType.includes(&quot;application/json&quot;)) {\n  const text = await res.text();\n  console.error(&quot;Expected JSON but got:&quot;, text);\n  return;\n}\n\nconst data = await res.json();\n</code></pre>\n", "tags": ["javascript", "reactjs", "json", "cors", "fetch-api"]}
