{"id": "4b8cfcee-036b-40f9-81c9-3837f8af2a01", "text": "Q: How to iterate flat_map in range-based for loop updating values? A: <p>The <code>reference</code> type in <code>std::flat_map</code> is <code>std::pair&lt;const key_type&amp;, mapped_type&amp;&gt;</code> which is different from that in <code>std::map</code> / <code>std::unordered_map</code> where it is <code>std::pair&lt;const Key, T&gt;&amp;</code>. Note that the references are <em>in</em> the <code>pair</code> in a <code>flat_map</code>. So, you need to take <code>k</code> and <code>v</code> by value:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>for (auto [k, v] : m) {\n    v++;\n}\n</code></pre>\n<p>Both <code>k</code> and <code>v</code> are here references to the values inside your <code>flat_map</code>.</p>\n<p>The reason for this is simply that a <code>flat_map</code> does not store <code>std::pair&lt;const key_type, mapped_type&gt;</code>s internally. It has two separate <em>SequenceContainer</em> s for keys and values and creates the <code>pair</code> when you dereference the iterator.</p>\n", "tags": ["c++", "stdmap", "c++23", "range-based-loop"]}
{"id": "fc19e018-be9c-4d54-b934-d584c9c22929", "text": "Q: How to customize serialization of an enum, in order to make the serialized form readable in Java 1.4? A: <blockquote>\n  <p>I believe this is because the older\n  version is compiled with Java 1.4. I\n  get:</p>\n</blockquote>\n\n<p>No. There were no enums in Java 1.4.1. They were introduced in 1.5. What appears to have happened is that something that was serialized as a String was subsequently changed to an Enum.</p>\n\n<blockquote>\n  <p>Ideally I would like to replace the\n  enum with a String</p>\n</blockquote>\n\n<p>Your proposed change just reverses that.</p>\n\n<blockquote>\n  <p>and somehow fix the\n  existing object.</p>\n</blockquote>\n\n<p>You can't fix the existing serialized object, but you can make the current class compatible with it, by reverting the source, or figuring out what it must have been and declaring an identical serialVersionUID.</p>\n", "tags": ["java", "serialization", "enums"]}
{"id": "d8c52659-4210-4594-8479-50ecffa93a79", "text": "Q: Can I prevent specific directory files from being locked by the dotnet.exe process on IIS Windows server? A: <pre><code>taskkill /F /IM dotnet.exe\n</code></pre>\n<p>Haters gonna hate. Just kill it with fire after every build.</p>\n", "tags": [".net-core", "iis", "aws-code-deploy", "aws-code-deploy-appspec"]}
{"id": "82451377-182e-4cba-a1f6-2e8839e9e657", "text": "Q: Git flow command error: &#39;flow&#39; is not a git command A: <p>Git flow is deprecated in latest Git version. So need to use git flow avh.</p>\n<p>Steps - Admin Powershell<br />\ncd C:\\</p>\n<p>git clone <a href=\"https://github.com/petervanderdoes/gitflow-avh.git\" rel=\"nofollow noreferrer\">https://github.com/petervanderdoes/gitflow-avh.git</a></p>\n<p>Download and extract getopt.exe and libintl-8.dll files from <a href=\"https://s3.amazonaws.com/gitflow-avh-edition/gitflow-getopt-windows.zip\" rel=\"nofollow noreferrer\">https://s3.amazonaws.com/gitflow-avh-edition/gitflow-getopt-windows.zip</a> and copy these in bin folder of you Git Installed directory - like in C:\\Program Files\\Git\\bin</p>\n<p>Admin Powershell -<br />\nC:\\&gt; cd .\\gitflow-avh\\contrib\\<br />\nRun -<br />\n.\\msysgit-install.cmd &quot;C:\\Program Files\\Git&quot;</p>\n<p>Add installed Git bin path to environment system variables -<br />\nC:\\Program Files\\Git\\bin</p>\n", "tags": ["github", "git-svn", "git-branch", "git-flow"]}
{"id": "c81de244-3c28-4a83-98eb-dd7ca1ff8a55", "text": "Q: Binary serialization of floating point data containing NaNs - is normalization required? A: <p>There is no single standard quiet NaN. There are many possible quiet NaNs, and many possible signaling NaNs.</p>\n<p>The 2019 revision of the IEEE 754 standard specifies that any NaN where the most-significant bit of the significand is 1 is quiet, and any NaN where that bit is 0 is a signaling NaN. This standardizes the behavior most hardware already implemented.</p>\n<p>Some old hardware behaves differently, with 1 for signaling and 0 for quiet. If you need to ensure that quiet NaNs stay quiet and signaling NaNs stay signaling when crossing between that hardware and other hardware, a normalized NaN serialization will not be enough. Loading a serialized bit pattern that represents a quiet NaN on other hardware will produce a signaling NaN on this hardware. Your deserialization logic will need to detect this and replace the bit pattern (and be careful not to accidentally produce an infinity instead of a NaN - simply flipping the bit might produce an infinity).</p>\n", "tags": ["ieee-754"]}
{"id": "32c463d0-2b82-4d8a-a265-0a7acc7b4ed8", "text": "Q: Does C++ support named parameters? A: <p>There are a few alternatives at the moment.</p>\n<ul>\n<li><p><a href=\"https://en.cppreference.com/w/cpp/language/aggregate_initialization.html#Designated_initializers\" rel=\"nofollow noreferrer\">Designated initializer</a>, already covered by <a href=\"https://stackoverflow.com/a/38076918/5267751\">this answer</a>.</p>\n<pre><code>f({.a = 1, .b = 2});\n</code></pre>\n<p>Implemented by making the function take a struct. Requires C++20. Note that multiple fields may be combined into one register. <a href=\"https://godbolt.org/z/bjbrKKv7x\" rel=\"nofollow noreferrer\">Example</a>, <a href=\"https://stackoverflow.com/a/42413484/5267751\">notes on ABI</a>.</p>\n</li>\n<li><p>clang-tidy's <a href=\"https://clang.llvm.org/extra/clang-tidy/checks/bugprone/argument-comment.html\" rel=\"nofollow noreferrer\"><code>bugprone-argument-comment</code></a>.</p>\n<pre><code>void f(bool foo);\n\n...\n\nf(/*bar=*/true);\n// warning: argument name 'bar' in comment does not match parameter name 'foo'\n</code></pre>\n<p>Enforced by external tool, not the compiler.</p>\n</li>\n<li><p><a href=\"https://isocpp.org/wiki/faq/ctors#named-parameter-idiom\" rel=\"nofollow noreferrer\">The &quot;Named Parameter Idiom&quot;</a> (<a href=\"https://stackoverflow.com/a/4209583/5267751\">credit</a>).</p>\n<pre><code>File f = OpenFile(&quot;foo.txt&quot;).readonly().blockSize(1024);\n</code></pre>\n<p>Implemented by defining the <code>readonly</code> and <code>blockSize</code> etc. methods on <code>OpenFile</code> struct. Disadvantage: needs lots of boilerplate.</p>\n</li>\n<li><p><a href=\"https://www.boost.org/doc/libs/1_49_0/libs/parameter/doc/html/index.html\" rel=\"nofollow noreferrer\">The Boost Parameter library</a></p>\n<pre><code>window* w = new_window(&quot;alert box&quot;, movable_=false);\n</code></pre>\n<p>Implemented by defining global variables such as <code>movable_</code>, one per parameter name, and overload <code>operator=</code>.</p>\n</li>\n<li><p>The <code>{fmt}</code> library implements a custom mechanism (<a href=\"https://stackoverflow.com/a/30789206/5267751\">credit</a>):</p>\n<pre><code>print(&quot;You clicked {button} at {x},{y}.&quot;,\n      &quot;button&quot;_a=&quot;b1&quot;, &quot;x&quot;_a=50, &quot;y&quot;_a=30);\n</code></pre>\n<p>Implemented by user-defined literal <code>_a</code> and overload <code>operator=</code>. No need for global variables.</p>\n<p>Currently there's no support for implementing your own function taking named arguments.</p>\n<p>If <code>{fmt}</code> library exposes <code>fmt::detail::fixed_string</code> and <code>fmt::detail::static_named_arg</code> publicly,\nthe following can be used.</p>\n<pre><code>#define FMT_USE_NONTYPE_TEMPLATE_ARGS 1  // optional, usually auto-detected\n#include &quot;fmt/format.h&quot;\n\ntemplate &lt;fmt::detail::fixed_string S, typename T&gt;\nusing static_named_arg = fmt::detail::static_named_arg&lt;T,\nstd::remove_cvref_t&lt;decltype(*S.data)&gt;,\nsizeof(S.data) / sizeof(S.data[0]), S&gt;;\n\nvoid g(static_named_arg&lt;&quot;first&quot;, int&gt; a_wrapper, static_named_arg&lt;&quot;second&quot;, char&gt; b_wrapper) {\n    auto a = a_wrapper.value;\n    auto b = b_wrapper.value;\n    using namespace fmt::literals;\n    fmt::print(&quot;{first} + {second}&quot;, &quot;first&quot;_a=a, &quot;second&quot;_a=b);\n}\n\nvoid h() {\n    using namespace fmt::literals;\n    g(&quot;first&quot;_a=1, &quot;second&quot;_a=char(2));\n}\n</code></pre>\n<p>For now, this can be used as inspiration how you could implement such a thing yourself.</p>\n<p>Possible caveat: the type is always <code>T const&amp;</code> using <code>{fmt}</code>'s implementation. Move semantic is not supported.</p>\n</li>\n</ul>\n", "tags": ["c++", "named-parameters"]}
{"id": "75edc936-6d36-40df-8c81-83b2dfe63721", "text": "Q: How do I delete one element from a DataFrame? A: <p>While modifying entries can be safe, it's specifically unsafe to change the length or ordering of objects you're iterating over because it effectively changes your position in them without notifying the iteration process, leading to errors.. however, if you're streaming the results into some other container (for example reading a list and then just creating a new list <a href=\"https://stackoverflow.com/questions/1207406/how-to-remove-items-from-a-list-while-iterating\">How to remove items from a list while iterating?</a>), you can safely make changes!</p>\n<p>Given the source is a CSV, consider just fixing the bad line yourself, but for a programmatic or more general approach, you can change rows dynamically, potentially using something like a StringIO to hold the contents before it's converted to a DataFrame if you have sufficient system memory <a href=\"https://stackoverflow.com/questions/34447448/stringio-and-pandas-read-csv\">StringIO and pandas read_csv</a></p>\n<pre class=\"lang-py prettyprint-override\"><code>from io import StringIO\nimport pandas as pd\n\nwith open(&quot;some_input.csv&quot;) as fh:  # files are iterable by-lines\n    with StringIO() as buffer:      # effectively an in-memory file\n        for lineno, line in enumerate(fh, 1):  # line numbers generally indexed from 1\n            # detect bad lineno or line\n            ...\n\n            buffer.write(line)  # should include the newline\n        buffer.seek(0)  # rewind the file pointer\n        df = pd.read_csv(buffer)\n</code></pre>\n<p>Note that this does require enough system memory to have the contents twice at least briefly! .. if you don't have enough memory, you may need to do something like subclassing open and wrapping its read method, which may be much more involved as you'll have to identify the line yourself amongst fixed-size buffers and likely manage the file pointer so <code>pd.read_csv()</code> stays happy with how much data it receives after each <code>.read()</code> call.. such is the price of saving memory</p>\n", "tags": ["python", "pandas", "dataframe"]}
