{"id": "eef3fdbe-b875-429d-bd71-36e3c1ad1cc4", "text": "Q: Evaluation of expression in operator position of a list A: <p>What you have is</p>\n<pre><code> ((car '(car)) '(a b))\n===\n ((car (list 'car)) '(a b))\n===\n ('car '(a b))\n===\n ('car (list 'a 'b))\n===\n ((quote car) (list (quote a) (quote b)))\n</code></pre>\n<p>but you wanted</p>\n<pre><code>( car '(a b))\n===\n( car (list 'a 'b))\n===\n( car (list (quote a) (quote b)))\n</code></pre>\n<p>without the quotation mark in front of <code>car</code>.</p>\n<p><em>(capital letters are used as placeholders, in what follows).</em></p>\n<p>In Scheme code, everything is built from symbols. Code forms are evaluated. Result of evaluating <code>(A B)</code> is the result of application of 1. result of evaluation of A, which must be a procedure, and 2. result of evaluation of B, which is used as an argument.</p>\n<p>Evaluating <code>(quote C)</code> results in the symbol <code>C</code>, as is.</p>\n<p>Evaluating <code>C</code> results in the value of the variable denoted  by the symbol <code>C</code>.</p>\n<p>If in application <code>(A B)</code> the result of evaluating <code>A</code> (or <em>&quot;value of <code>A</code>&quot;</em>, for short) is not a procedure, the application can not be performed and error is reported.</p>\n<p>The symbol <code>car</code> is not a procedure.</p>\n\n", "tags": ["scheme", "lisp", "evaluation", "guile"]}
{"id": "a68631ca-6e46-4d59-b993-e0a4410dc0ef", "text": "Q: Make __has_include portable in C A: <p><code>__has_include</code> was added to C23; see <a href=\"https://en.cppreference.com/w/c/preprocessor/include\" rel=\"nofollow noreferrer\">here</a>.</p>\n", "tags": ["c", "include"]}
{"id": "89b57e0d-bf11-457c-a77f-caca421ba8fd", "text": "Q: TypeScript: How to strictly type a dynamic object keyed by enum values without using any? A: <p>You have created an <a href=\"https://meta.stackoverflow.com/questions/435293/opinion-based-questions-alpha-experiment-on-stack-overflow\">open-ended question</a>, a new/experimental feature of Stack Overflow which invites discussions and opinions, as opposed to specific factual answers. This post looks to me like you want a single correct answer and you created an open-ended question without really meaning to. Are you trying to just get advice and talk about your issue? Or are you looking for a single correct answer?</p>\n<hr />\n<p>Here's my advice-style opinion:</p>\n<p>I'd say that <code>statusMap</code> is of type <code>Record&lt;Status, StatusConfig&gt;</code>.</p>\n<p>But it's not clear to me why you're using an enum in the first place given that you are apparently happy using the enum values as strings directly. TypeScript usually doesn't want you to ever treat enum values as string/number literals. Like,</p>\n<pre><code>const s: Status = &quot;active&quot;; // error!\n</code></pre>\n<p>is an error. Enum values are meant to be opaque and only accessible through the enum object, so you'd instead write</p>\n<pre><code>const s: Status = Status.Active; // okay\n</code></pre>\n<p>There is an exception made for object keys, but I still prefer to be consistent and write:</p>\n<pre><code>const statusMap: Record&lt;Status, StatusConfig&gt; = {\n    [Status.Active]: { label: 'Active', color: 'green' },\n    [Status.Inactive]: { label: 'Inactive', color: 'red' },\n    [Status.Pending]: { label: 'Pending', color: 'orange' }\n};\n</code></pre>\n<hr />\n<p>And since this is for opinions, I'd even say that enums in general are probably best avoided, since they are a TypeScript-only runtime feature that never made it (so far at least) into JavaScript. Instead I'd write</p>\n<pre><code>const Status = {\n    Active: 'active',\n    Inactive: 'inactive',\n    Pending: 'pending',\n} as const;\ntype Status = (typeof Status)[keyof typeof Status];\n</code></pre>\n<p>which behaves quite similarly but is just JavaScript with static types. And here the type of <code>Status.Active</code> really is just the string literal type <code>&quot;active&quot;</code>. Meaning that</p>\n<pre><code>const s: Status = &quot;active&quot;; // okay!\n</code></pre>\n<p>is not an error.</p>\n<p><a href=\"https://www.typescriptlang.org/play/?#code/KYOwrgtgBAygLgQzmAzlA3gKCjqBBAYzgEsA3YKAXigHIEizgaAabXASRHpPKtuK4NyLNjgAKoACYCA5nxoAHKbJEBfTJjgBPJbETIUAYQD2IAGbE51LLigAbBACNgdgFxQUcAE6yA3KKgCYztjL3dPHxAZf1V-TDtgOA93eCRUfzRqACJuRizfKAB6QqhgLy9QgEJMTL00lAA6Qh5gAuKoYwBrBC0NBKTPeoBZBAV3ACVgIK9JAB5Ug2Y6gxNzSwA+OMGDEYU+G1xc8nd0eycXdxpmxhZA4NDLmS9gUBooVVZbASPgE7PnNy0Tg-W5BEJhWjPSRvD4BJQgaRRP4OAGXCQIlRLMEPWihBBRJjvTCxDTbVC7fYBADaC1QTSEwAAusjzoCrgzQfcITQni8QDDPrgafo6cCGcyMP8LkDBC1OeDLlCBdTaY10YiZBLTijpTR1Zi7grcV58TJCeoSZguBBgCgFPQKEMtGJnmYyqACBQDjggiBPMtUJTbLZrsdaCDBcGoGKWpdvhzI8H9UjaPCNSJbKooAg0L7PP5bNpdKq+AAKIvAYxmAMoACUVM6wC0VagFZbqsZcQCeYGKRFtRyDPyRRKXR61W7pn9ZJQuwmU1Cc1VS1VqwsMnWQaj2YZLNRtFDTCxXMez1e70TX1ljD3upjN2PRpoSovAVsadkt7ZyZk8pxNDxAkYQCElVCAA\" rel=\"nofollow noreferrer\">Playground link to code</a></p>\n", "tags": ["typescript"]}
{"id": "1ea02599-4589-4620-9c5a-4ac2114ccbcb", "text": "Q: Dynamic grouping over parameter in athena quik suite SQL A: <p>It is not possible to set a list of columns as a parameter, only through a dynamic query.<br />\nHowever, you can provide a list of possible column combinations and use the case expression to calculate the grouping code for each case.</p>\n<pre><code>with param as( -- column list cases \n--  select 'id,column1,column2' as cl\n  select 'id,column1' as cl\n--  select '' as cl\n)\nselect min(id) id,grCode\n  ,string_agg(distinct cast(column1 as varchar),',') column1list\n  ,string_agg(distinct cast(column2 as varchar),',') column12ist\n  ,count(*) cnt\nfrom(\nselect *\n  ,case when cl='id' then concat('(',id,')') \n        when cl='id,column1' then concat('(',id,',',column1,')') \n        when cl='id,column1,column2' then concat('(',id,',',column1,',',column2,')') \n   end grCode\nfrom test\ncross join param\n)\ngroup by id,grCode\norder by grCode\n</code></pre>\n<div class=\"s-table-container\"><table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: right;\">id</th>\n<th style=\"text-align: left;\">grcode</th>\n<th style=\"text-align: left;\">column1list</th>\n<th style=\"text-align: left;\">column12ist</th>\n<th style=\"text-align: right;\">cnt</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: right;\">1</td>\n<td style=\"text-align: left;\">(1,1)</td>\n<td style=\"text-align: left;\">1</td>\n<td style=\"text-align: left;\">4,5</td>\n<td style=\"text-align: right;\">2</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">1</td>\n<td style=\"text-align: left;\">(1,2)</td>\n<td style=\"text-align: left;\">2</td>\n<td style=\"text-align: left;\">6</td>\n<td style=\"text-align: right;\">1</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">2</td>\n<td style=\"text-align: left;\">(2,2)</td>\n<td style=\"text-align: left;\">2</td>\n<td style=\"text-align: left;\">7</td>\n<td style=\"text-align: right;\">1</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">2</td>\n<td style=\"text-align: left;\">(2,3)</td>\n<td style=\"text-align: left;\">3</td>\n<td style=\"text-align: left;\">8,9</td>\n<td style=\"text-align: right;\">2</td>\n</tr>\n</tbody>\n</table></div>\n<p><a href=\"https://dbfiddle.uk/1IXQDxZi\" rel=\"nofollow noreferrer\">fiddle with PostgreSql</a></p>\n", "tags": ["sql", "amazon-web-services", "amazon-quicksight"]}
{"id": "36de347f-f95e-493f-97a5-54414bed8501", "text": "Q: Plotting Y data vs X data with alternating colors for each section in Python A: <p>Okay with  your answers (esspecally @AndrasDeak--\u0421\u043b\u0430\u0432\u0430\u0423\u043a\u0440\u0430\u0457\u043d\u0456) I finally come to this following code:</p>\n<p>what I did: sorting by depth + breaking lines at section boundaries = clean, readable plots (thats new). Without these steps, matplotlib connects points in raw row order, which almost always looks chaotic.</p>\n<pre><code>import pandas as pd\nimport matplotlib.pyplot as plt\n\n\n\ntd3 = pd.read_csv(&quot;data&quot;)\n\ntd3 = td3.dropna(subset=[&quot;Depth CSF-B (m)&quot;, &quot;Magnetic susceptibility (instr. units)&quot;])\ntd3 = td3[td3[&quot;Depth CSF-B (m)&quot;] &lt;= 100]\ntd3[&quot;Depth CSF-B (m)&quot;] = td3[&quot;Depth CSF-B (m)&quot;].astype(float)\ntd3[&quot;Magnetic susceptibility (instr. units)&quot;] = td3[&quot;Magnetic susceptibility (instr. units)&quot;].astype(float)\ntd3 = td3.sort_values(&quot;Depth CSF-B (m)&quot;).reset_index(drop=True)\n\nplt.figure(figsize=(8,5))\ncolors = [&quot;black&quot;, &quot;darkblue&quot;]\ncurrent_color_idx = 0\n\nx_vals = []\ny_vals = []\ncurrent_sect = td3.iloc[0][&quot;Sect&quot;]\n\nfor _, row in td3.iterrows():\n    if row[&quot;Sect&quot;] != current_sect:\n   \n        plt.plot(x_vals, y_vals, color=colors[current_color_idx % 2])\n        current_color_idx += 1\n        x_vals = []\n        y_vals = []\n        current_sect = row[&quot;Sect&quot;]\n    \n    x_vals.append(row[&quot;Depth CSF-B (m)&quot;])\n    y_vals.append(row[&quot;Magnetic susceptibility (instr. units)&quot;])\n\nplt.plot(x_vals, y_vals, color=colors[current_color_idx % 2])\n\nplt.xlabel(&quot;Depth CSF-B (m)&quot;)\nplt.ylabel(&quot;Magnetic susceptibility (instr. units)&quot;)\nplt.xlim(0, 100)\nplt.title(&quot;Magnetic Susceptibility vs Depth (0\u2013100 m)&quot;)\nplt.tight_layout()\nplt.show()\n</code></pre>\n<p><a href=\"https://i.sstatic.net/rUBDD2Yk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/rUBDD2Yk.png\" alt=\"enter image description here\" /></a></p>\n", "tags": ["python", "matplotlib"]}
{"id": "4d0ca657-e09c-475c-a96a-56c115623ba1", "text": "Q: Scale form at design time, but only control positions (to give more air) A: <p>A flow panel with the child controls having AlignWithMargins = True lets the margin settings of the control work space and move with the flowpanel's flowstyle setting.</p>\n", "tags": ["delphi", "delphi-13-florence", "delphi-12.3"]}
{"id": "7ed64e0b-1bf1-4faf-8cc1-be5bfa6765e5", "text": "Q: Merging two large sorted files into one unique file A: <p>You can use the <code>-m</code> parameter of sort for this.</p>\n<p>From the man page:</p>\n<pre><code>   -m, --merge\n          merge already sorted files; do not sort\n</code></pre>\n<p>You use it like:</p>\n<pre><code>sort -m file1.txt file2.txt file3.txt &gt; result.txt\n</code></pre>\n<p>If both files contain dublicates, you can still specify the <code>-u</code> flag, eg:</p>\n<pre><code>sort -mu file1.txt file2.txt file3.txt &gt; result.txt\n</code></pre>\n<p>(Note that this does generate a slowdown of 3 times as slow, even in the case there are no duplicates)</p>\n", "tags": ["linux", "merge", "unique", "mergesort", "comm"]}
{"id": "54062554-cdfb-4357-9d98-35d60dc15ef6", "text": "Q: How do I strip subdirectories when using maven dependency plugin A: <p>You can cut the top-level folder(s) as follows:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.9.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;unpack&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;unpack&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;artifactItems&gt;\n                    &lt;artifactItem&gt;\n                        ...\n                        &lt;fileMappers&gt;\n                            &lt;org.codehaus.plexus.components.io.filemappers.RegExpFileMapper&gt;\n                                &lt;!-- Cut top-level folder &lt;whatever&gt;/ --&gt;\n                                &lt;pattern&gt;^[^/]+/&lt;/pattern&gt;\n                                &lt;replacement&gt;./&lt;/replacement&gt;\n                            &lt;/org.codehaus.plexus.components.io.filemappers.RegExpFileMapper&gt;\n                        &lt;/fileMappers&gt;\n                    &lt;/artifactItem&gt;\n                &lt;/artifactItems&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>For deeper structures you can adjust pattern with the depth <code>(^[^/]+/){5}</code> you need.</p>\n", "tags": ["java", "maven", "maven-dependency-plugin"]}
{"id": "233db56a-b398-4e0d-bc30-94cafeafa9c5", "text": "Q: imap_utf8 not always converting utf-8 text A: <p>The imap_utf8 function is designed to convert MIME-encoded text (like =?charset?encoding?encoded-text?=) to UTF-8.</p>\n<p>The issue you have encountered may be due to the input string, which may contain intended double quotes (U+0022 or &quot;fancy quotes&quot; like U+201C), is not a correctly formatted MIME header string according to RFC standards</p>\n<p>One of the possible causes of the above is due to improper encoding by the sending client.</p>\n<p>One of the workarounds is to use a function applying <code>imap_mime_header_decode</code> and <code>mb_convert_encoding</code> to perform the parsing job in a function, such as:</p>\n<pre><code>function custom_imap_utf8_decode($mime_encoded_text) {\n    $decoded_elements = imap_mime_header_decode($mime_encoded_text);\n    $decoded_string = '';\n\n    foreach ($decoded_elements as $element) {\n        // Convert the text to UTF-8 from its original charset, if necessary\n        if ($element-&gt;charset != 'utf-8' &amp;&amp; $element-&gt;charset != 'default') {\n            $decoded_string .= mb_convert_encoding($element-&gt;text, 'UTF-8', $element-&gt;charset);\n        } else {\n            $decoded_string .= $element-&gt;text;\n        }\n    }\n    return $decoded_string;\n}\n</code></pre>\n<p>So the following is a working example code:</p>\n<pre><code>&lt;?php\n$original = '&quot;=?utf-8?Q?part1=40part2.com?=&quot; &lt;part1@part2.com&gt;' ;\n\n\nfunction custom_imap_utf8_decode($mime_encoded_text) {\n    $decoded_elements = imap_mime_header_decode($mime_encoded_text);\n    $decoded_string = '';\n\n    foreach ($decoded_elements as $element) {\n        // Convert the text to UTF-8 from its original charset, if necessary\n        if ($element-&gt;charset != 'utf-8' &amp;&amp; $element-&gt;charset != 'default') {\n            $decoded_string .= mb_convert_encoding($element-&gt;text, 'UTF-8', $element-&gt;charset);\n        } else {\n            $decoded_string .= $element-&gt;text;\n        }\n    }\n    return $decoded_string;\n}\n\n//$converted = imap_utf8($original) ;\n$converted = custom_imap_utf8_decode($original);\n\n\n//printf(&quot;Original: %s\\nConverted: %s\\n&quot;, $original, $converted) ;\necho &quot;Original:&quot;. $original;\necho &quot;&lt;br&gt;&quot;;\necho &quot;Converted:&quot;. $converted; \n?&gt;\n</code></pre>\n<p>The result will be:</p>\n<p><a href=\"https://i.sstatic.net/HsPLS2Oy.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/HsPLS2Oy.jpg\" alt=\"enter image description here\" /></a></p>\n", "tags": ["php", "utf-8", "imap", "decode"]}
