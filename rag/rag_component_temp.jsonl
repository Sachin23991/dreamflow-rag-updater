{"id": "a436b3e6-833f-4edd-b189-2c0a123354f9", "text": "Q: How to move files to different folders based on their prefix? A: <pre class=\"lang-sh prettyprint-override\"><code>#! /bin/bash\nfor f in *_*_*_*_*.gz; do\n    i=&quot;${f#*_}&quot;; i=&quot;${i%%_*}&quot;\n    d=&quot;rep$i&quot;\n    echo &quot;Move '$f' to '$d'&quot;\n    mkdir -p &quot;$d&quot; \\\n    &amp;&amp; mv &quot;$f&quot; &quot;$d&quot;\ndone\n</code></pre>\n", "tags": ["bash", "awk", "mv"]}
{"id": "e92e3ff2-9ecc-45ed-a1d8-a5e715c80eb8", "text": "Q: Multiple layers in a tilemap created from an array? A: <p>You have to create your layer using <code>createBlankLayer</code>, not <code>createLayer</code>.</p>\n<pre class=\"lang-ts prettyprint-override\"><code>const map = this.scene.make.tilemap({\n  tileWidth: 16,\n  tileHeight: 16,\n  data: new Array(60).fill(new Array(60).fill(0)),\n});\nmap.addTilesetImage('&lt;tileset&gt;')\n\nconst layer1 = map.createBlankLayer('layer1', '&lt;tileset&gt;')\nconst layer2 = map.createBlankLayer('layer2', '&lt;tileset&gt;')\n\nlayer1.putTileAt(1, 0, 0)\nlayer2.putTileAt(1, 1, 0)\n</code></pre>\n", "tags": ["javascript", "phaser-framework", "tile"]}
{"id": "50e5bf17-243d-4c3f-a30e-ce116da6b105", "text": "Q: Pure Type Punning In C A: <p>The line</p>\n<pre class=\"lang-c prettyprint-override\"><code>short data = *(short*)(page+6);\n</code></pre>\n<p>will invoke undefined behavior due to violating the <a href=\"https://stackoverflow.com/q/98650/12149471\">strict aliasing rule</a>, because the bytes stored at <code>page[6]</code> and <code>page[7]</code> have the &quot;effective type&quot; <code>char</code>, so you are not allowed read them by dereferencing a pointer to <code>short</code>. These bytes have the &quot;effective type&quot; <code>char</code> because <a href=\"https://www.iso-9899.info/n3220.html#6.5.1p6\" rel=\"nofollow noreferrer\">\u00a76.5.1 \u00b66 sentence 3 of the N3220 draft of the C23 standard</a> states the following:</p>\n<blockquote>\n<p>If a value is copied into an object having no declared type using memcpy or memmove, or is copied as an array of character type, then the effective type of the modified object for that access and for subsequent accesses that do not modify the value is the effective type of the object from which the value is copied, if it has one.</p>\n</blockquote>\n<p>The proper way to read these byte values as a <code>short</code> is the following:</p>\n<pre class=\"lang-c prettyprint-override\"><code>short data;\n\nmemcpy( &amp;data, page + 6, sizeof data );\n</code></pre>\n<p>As far as I can tell, this is the only strict aliasing violation in your code. Reading the first four bytes as an <code>int</code> is not a problem, because that is the &quot;effective type` of the first four bytes.</p>\n<p>The line</p>\n<pre class=\"lang-c prettyprint-override\"><code>*(short*)(page+6) = 0x7777;\n</code></pre>\n<p>is well-defined, because you are writing, not reading, so this will change the &quot;effective type&quot; of the bytes <code>page[6]</code> and <code>page[7]</code> from <code>char</code> to <code>short</code>.</p>\n<p>If you want to ensure that your code works despite violating the strict aliasing rule, then, if you are using the compilers GCC or Clang, you can compile with the <code>-fno-strict-aliasing</code> command-line option. This will prevent your compiler from making optimizations that rely on the strict aliasing rule, which may reduce performance, but will ensure that your code behaves correctly even when violating the strict aliasing rule.</p>\n<hr />\n<p>In the comments section of this answer, it is claimed that my answer above is wrong, because a string literal does not have a &quot;declared type&quot;. I tend to disagree with this statement, for the following reason:</p>\n<p>Although the C standard uses the term &quot;declared type&quot;, it does not define this term.</p>\n<p><a href=\"https://www.iso-9899.info/n3220.html#6.4.5p6\" rel=\"nofollow noreferrer\">\u00a76.4.5 \u00b66 sentence 3 of the N3220 draft of the C23 standard</a> states the following:</p>\n<blockquote>\n<p>For character string literals, the array elements have type char</p>\n</blockquote>\n<p>So the standard explicitly states that all elements of a string literal are of &quot;type&quot; <code>char</code>. In my opinion, this implies that the &quot;declared type&quot; of the array elements is <code>char</code>.</p>\n<p>According to the (non-normative) <a href=\"https://www.iso-9899.info/n3220.html#FOOTNOTE.84\" rel=\"nofollow noreferrer\">footnote #84 of N3220</a>, allocated objects have no declared type. It does not state whether string literals have a declared type or not.</p>\n", "tags": ["c", "pointers", "gcc"]}
{"id": "c6a433b4-f7da-400b-9f4a-3dbd6885e551", "text": "Q: How do I solve &quot;error: externally-managed-environment&quot; every time I use pip 3? A: <p><strong>WARNING:</strong> Note that the approach described in this answer isn't safe, consider the relevant comments received in this post from <a href=\"https://stackoverflow.com/users/1762051\">Alok</a> and <a href=\"https://stackoverflow.com/users/3469861\">JackLeEmmerdeur</a>:</p>\n<blockquote>\n<p>This deletion of file is not safe. This can lead to Broken Package\nManagement, Conflicting Installations and Permission Issues</p>\n</blockquote>\n<p>I've got this error since Python 3.11+ and bypassed it using the following command:</p>\n<pre class=\"lang-none prettyprint-override\"><code>sudo mv /usr/lib/python3.11/EXTERNALLY-MANAGED /usr/lib/python3.11/EXTERNALLY-MANAGED.old\n</code></pre>\n", "tags": ["python", "pip", "debian", "failed-installation"]}
{"id": "4766e93a-7bc7-43b7-bc3a-a3d542079f4c", "text": "Q: The link in html file in AlertDialog isn&#39;t clickable A: <p>First, follow the steps mentioned below:</p>\n<ol>\n<li>create a custom layout for <code>AlertDialog</code>.</li>\n</ol>\n<p><code>dialog_news.xml</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:paddingHorizontal=&quot;16dp&quot;\n    android:paddingVertical=&quot;20dp&quot;&gt;\n\n    &lt;androidx.appcompat.widget.AppCompatTextView\n        android:id=&quot;@+id/title&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:textSize=&quot;24sp&quot;\n        android:textStyle=&quot;bold&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;androidx.appcompat.widget.AppCompatTextView\n        android:id=&quot;@+id/message&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;16dp&quot;\n        android:textSize=&quot;14sp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/title&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<ol start=\"2\">\n<li>Create an <code>interface</code> to listen hyperlink clicks.</li>\n</ol>\n<p><code>OnHyperLinkActionListener.kt</code></p>\n<pre><code>interface OnHyperLinkActionListener {\n\n    fun onOpenUrl(url: String)\n}\n</code></pre>\n<ol start=\"3\">\n<li>Create another class for extension function for <code>Spanned</code>.</li>\n</ol>\n<p><code>SpannedExt.kt</code></p>\n<pre><code>fun &lt;S : CharacterStyle, T : CharacterStyle&gt; Spanned.replaceSpans(\n    sourceType: KClass&lt;S&gt;,\n    converter: (S) -&gt; T,\n): Spanned {\n    val result = SpannableStringBuilder(this)\n    val spans = result.getSpans(0, result.length, sourceType.java)\n    for (span in spans) {\n        val start = result.getSpanStart(span)\n        val end = result.getSpanEnd(span)\n        val flags = result.getSpanFlags(span)\n        result.removeSpan(span)\n        result.setSpan(converter(span), start, end, flags)\n    }\n    return result\n}\n</code></pre>\n<ol start=\"4\">\n<li>Create a util class to parse the <code>String</code> into <code>HTML</code> and handle the click on URL.</li>\n</ol>\n<p><code>StringToRichTextMapper.kt</code></p>\n<pre><code>private const val KEY_ACTION_HYPER_LINK_W3SCHOOLS = &quot;HYPER_LINK_W3SCHOOLS&quot;\n\nclass StringToRichTextMapper(\n    private val actionListener: OnHyperLinkActionListener,\n) : (String) -&gt; CharSequence {\n\n    override operator fun invoke(text: String): CharSequence {\n        return text\n            .parseAsHtml()\n            .replaceSpans(URLSpan::class) { it.toCustomUrlSpan() }\n    }\n\n    private fun URLSpan.toCustomUrlSpan(): URLSpan =\n        when (url) {\n            KEY_ACTION_HYPER_LINK_W3SCHOOLS -&gt; UnderlineURLSpan(\n                &quot;https://www.w3schools.com/&quot;,\n                actionListener\n            )\n\n            else -&gt; NoUnderlineURLSpan(&quot;&quot;, actionListener)\n        }\n\n    private class NoUnderlineURLSpan(\n        url: String,\n        private val actionListener: OnHyperLinkActionListener\n    ) : URLSpan(url) {\n\n        override fun updateDrawState(ds: TextPaint) {\n            super.updateDrawState(ds)\n            ds.isUnderlineText = false\n        }\n\n        override fun onClick(widget: View) {\n            actionListener.onOpenUrl(url = url)\n        }\n    }\n\n    private class UnderlineURLSpan(\n        url: String,\n        private val actionListener: OnHyperLinkActionListener,\n    ) : URLSpan(url) {\n\n        override fun updateDrawState(ds: TextPaint) {\n            super.updateDrawState(ds)\n            ds.isUnderlineText = true\n        }\n\n        override fun onClick(widget: View) {\n            actionListener.onOpenUrl(url = url)\n        }\n    }\n}\n</code></pre>\n<ol start=\"5\">\n<li>Finally, update the <code>showNews(...)</code> and add another function to open URLs in your <code>MainActivity</code>.</li>\n</ol>\n<pre><code>public void showNews() {\n        AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);\n        View dialogView = getLayoutInflater().inflate(R.layout.dialog_news, null, false);\n        builder.setView(dialogView);\n        AppCompatTextView titleTv = dialogView.findViewById(R.id.title);\n        AppCompatTextView messageTv = dialogView.findViewById(R.id.message);\n        titleTv.setText(&quot;Application News&quot;);\n\n        StringBuilder text = new StringBuilder();\n\n        BufferedReader reader = null;\n        try {\n            reader = new BufferedReader(new InputStreamReader(getAssets().open(&quot;html/&quot; + &quot;news.html&quot;)));\n            String mLine;\n            while ((mLine = reader.readLine()) != null) {\n                text.append(mLine);\n                text.append('\\n');\n            }\n        } catch (IOException e) {\n            Toast.makeText(getApplicationContext(), &quot;Error reading file!&quot;, Toast.LENGTH_LONG).show();\n            e.printStackTrace();\n        } finally {\n            if (reader != null) {\n                try {\n                    reader.close();\n                } catch (IOException e) {\n                    Log.e(&quot;showNews&quot;, &quot;Error reading file&quot;);\n                }\n            }\n        }\n\n        messageTv.setMovementMethod(LinkMovementMethod.getInstance());\n        messageTv.setText(new StringToRichTextMapper(new OnHyperLinkActionListener() {\n            @Override\n            public void onOpenUrl(@NonNull String url) {\n                handleUrl(url);\n            }\n        }).invoke(text.toString()));\n\n        builder.setPositiveButton(&quot;Okay&quot;, (dialog, which) -&gt; {\n//                prefs.putInt(&quot;news&quot;, number);\n//                prefs.apply();\n            dialog.dismiss();\n        });\n\n        builder.show();\n    }\n\n    private void handleUrl(String url) {\n        try {\n            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));\n            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n            startActivity(intent);\n        } catch (ActivityNotFoundException e) {\n            Toast.makeText(this, &quot;No application found to open the link&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n</code></pre>\n", "tags": ["java", "android", "html", "android-alertdialog"]}
