{"id": "e20dd1ec-31cd-469a-8499-2cfec00671f4", "text": "Q: Count Common Values between Different 2D Arrays A: <p>You're converting the same <code>V_R[j]</code> to a <code>set</code> every time through the <code>for i</code> loop. It would be better to convert the elements of <code>V_R</code> to sets once, then loop over that.</p>\n<pre><code>def f_m_common(V_R, V_A):\n    r = len(V_A)\n    c = len(V_R)\n    M_Common = np.zeros((r, c), dtype = np.uint8)\n\n    rows, cols = M_Common.shape \n\n    l_R = [set(V_R[i]) for i in range(cols)]\n\n    for i in range(rows):\n        set_1= set(V_A[i])\n\n        for j, set_2 in enumerate(l_r):\n            common_elements = set_1.intersection(set_2)\n            M_Common [i][j] = len(common_elements )\n        \n    return M_Common \n</code></pre>\n", "tags": ["python", "arrays", "numpy", "intersection"]}
{"id": "89ab6a04-fb33-4cc7-8b02-9eac749bb7ff", "text": "Q: Haskell Data.Set has `unions`, but not `intersections`? Why? A: <p>As others commented earlier, the problem with a function</p>\n<pre><code>intersections :: Ord a =&gt; [Set a] -&gt; Set a\n</code></pre>\n<p>is that this cannot sensibly implement the empty-list case. Unlike for the union-monoid, whose identity is simply the empty set, the identity element of the intersection-monoid would be the <em>complete set</em> - but that's not something <code>Data.Set</code> can represent for most data types (the complete set would in general be infinite, and <code>Ord</code> does not provide any way of obtaining it).</p>\n<p>That problem can be circumvented by only allowing <em>nonempty</em> lists as inputs, though. Back in early 2016 there was no standard type for nonempty lists, but <a href=\"https://hackage-content.haskell.org/package/base-4.18.1.0/docs/Data-List-NonEmpty.html#t:NonEmpty\" rel=\"nofollow noreferrer\">it has been added</a> since<sup>\u2020</sup>. And with that, the function can be implemented perfectly well as</p>\n<pre><code>intersections :: Ord a =&gt; NonEmpty (Set a) -&gt; Set a\n</code></pre>\n<p>and that is indeed <a href=\"https://hackage-content.haskell.org/package/containers-0.8/docs/Data-Set.html#v:intersections\" rel=\"nofollow noreferrer\">provided by the <code>containers</code> library</a> as of version 0.8.</p>\n<hr>\n<p><sup>\u2020</sup><sub>Curiously, <a href=\"https://hackage-content.haskell.org/package/base-4.9.0.0\" rel=\"nofollow noreferrer\">base-4.9.0.0</a> added <code>Data.List.NonEmpty</code> in <em>the same month</em> this question was posted, May 2016. I don't know if there is any causal connection here - probably not, seeing as <code>containers</code> only added the <code>intersections</code> function in March 2025.</sub></p>\n", "tags": ["haskell"]}
{"id": "ccacce17-01e5-49f7-9627-cd10dec02a75", "text": "Q: Return rows from a group of rows if a specific value does not exist within the group A: <p>This task is usually best solved through the &quot;WHERE NOT EXIST(...)&quot; condition.</p>\n<p>Condition textual:<br />\n&quot;for each Name, Activity and Date&quot;<br />\n&quot;when 'No Activity' is not in the Activity column for those dates&quot;<br />\nOr:<br />\nfor each name,date<br />\nnot exists row with &quot;this name,date&quot; and Activity='No Activity'</p>\n<pre><code>WHERE NOT EXISTS(\n   select 1/*any value*/ from test t2 \n   where t2.name=t.name -- for each name\n     and t2.date=t.date -- for each date\n     and t2.Activity='No Activity' -- status\n  )\n</code></pre>\n<p>Query</p>\n<pre><code>SELECT Name, Activity, Date \nFROM test t\nWHERE not EXISTS(\n   select 1 from test t2 \n   where t2.name=t.name and t2.date=t.date and t2.Activity='No Activity' \n  )\n</code></pre>\n<div class=\"s-table-container\"><table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">Name</th>\n<th style=\"text-align: left;\">Activity</th>\n<th style=\"text-align: left;\">Date</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">Allen</td>\n<td style=\"text-align: left;\">On Call</td>\n<td style=\"text-align: left;\">12/18/2025</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">Kevin</td>\n<td style=\"text-align: left;\">PTO</td>\n<td style=\"text-align: left;\">12/18/2025</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">Melissa</td>\n<td style=\"text-align: left;\">PTO</td>\n<td style=\"text-align: left;\">12/15/2025</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">Melissa</td>\n<td style=\"text-align: left;\">PTO</td>\n<td style=\"text-align: left;\">12/15/2025</td>\n</tr>\n</tbody>\n</table></div>\n<p><a href=\"https://dbfiddle.uk/ITVshp_L\" rel=\"nofollow noreferrer\">fiddle</a></p>\n", "tags": ["sql", "sql-server"]}
{"id": "043eb24e-e176-43d7-a96f-b27ae38fca80", "text": "Q: How to calculate group pct_change in Polars? A: <p>Here are two options. One using <code>window</code> functions, and one using <code>group_by + explode</code>.</p>\n<p>You should benchmark and see which is faster on your use case.</p>\n<h2>preparing data</h2>\n<pre class=\"lang-py prettyprint-override\"><code>df = pl.DataFrame({\n    &quot;asset&quot;:[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;b&quot;,&quot;c&quot;],\n    &quot;v&quot;:[1,2,3,4,5,6,7,8],\n    &quot;date&quot;:[&quot;2017&quot;,&quot;2011&quot;,&quot;2012&quot;,&quot;2013&quot;,&quot;2014&quot;,&quot;2015&quot;,&quot;2016&quot;,&quot;2010&quot;]\n})\n</code></pre>\n<h2>using window functions</h2>\n<pre class=\"lang-py prettyprint-override\"><code>(  \n  df.sort(&quot;asset&quot;, &quot;date&quot;)\n    .with_columns(\n       pl.col(&quot;v&quot;).pct_change().over(&quot;asset&quot;).alias(&quot;pct_change&quot;)\n    )\n)\n</code></pre>\n<h2>using group_by + explode</h2>\n<pre><code>(df.group_by(&quot;asset&quot;)\n   .agg(\n       pl.all().first(),\n       pl.col(&quot;v&quot;).sort_by(&quot;date&quot;).pct_change().alias(&quot;pct_change&quot;)\n   ).explode(&quot;pct_change&quot;)\n)\n</code></pre>\n<h2>Result</h2>\n<pre><code>shape: (8, 4)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 asset \u2506 v   \u2506 date \u2506 pct_change \u2502\n\u2502 ---   \u2506 --- \u2506 ---  \u2506 ---        \u2502\n\u2502 str   \u2506 i64 \u2506 str  \u2506 f64        \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 a     \u2506 4   \u2506 2013 \u2506 null       \u2502\n\u2502 a     \u2506 1   \u2506 2017 \u2506 -0.75      \u2502\n\u2502 b     \u2506 2   \u2506 2011 \u2506 null       \u2502\n\u2502 b     \u2506 5   \u2506 2014 \u2506 1.5        \u2502\n\u2502 b     \u2506 7   \u2506 2016 \u2506 0.4        \u2502\n\u2502 c     \u2506 8   \u2506 2010 \u2506 null       \u2502\n\u2502 c     \u2506 3   \u2506 2012 \u2506 -0.625     \u2502\n\u2502 c     \u2506 6   \u2506 2015 \u2506 1.0        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>\n", "tags": ["python", "dataframe", "apply", "window-functions", "python-polars"]}
{"id": "c8744b37-445a-4e40-92a7-8ce698bc83a8", "text": "Q: Custom document icon not showing in macOs Document based app A: <p>Starting from your demo project:</p>\n<ol>\n<li>Add the document icon &quot;petIconDemo&quot; to the project. Choose macOS Generic Icon, don't add an image.</li>\n<li>Select the project, select the app target and go to the Info tab.</li>\n<li>Edit the Document Type.\n<a href=\"https://i.sstatic.net/Ol67FQf1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/Ol67FQf1.png\" alt=\"Document Type\" /></a></li>\n<li>Edit the Exported Type Identifier. Choose Icon Fill from the drop down menu.\n<a href=\"https://i.sstatic.net/MB35FlOp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/MB35FlOp.png\" alt=\"Exported Type Identifier\" /></a></li>\n</ol>\n<p>P.S. Don't edit the info.plist file unless you really know what you're doing.</p>\n", "tags": ["macos", "swiftui"]}
{"id": "29a4a02e-3690-469a-a9c8-ee301f1e2121", "text": "Q: Horizontal ScrollBar not visible in ScrollView A: <p>Two issues in your code:</p>\n<ul>\n<li>With ScrollBar there are ScrollBar instances already there for ScrollBar.horizontal which you should customize, else, you will have correctly instantiate a new one from ground up</li>\n<li>You should set a horizontal's ScrollBar's height not width, e.g.</li>\n</ul>\n<pre class=\"lang-none prettyprint-override\"><code>ScrollView {\n    width: 200\n    height: 200\n    ScrollBar.horizontal.policy: ScrollBar.AlwaysOn\n    ScrollBar.horizontal.height: 16\n    Column {\n        width: 300\n        TextArea {\n            id: editor\n            width: parent.width\n            wrapMode: TextArea.Wrap\n            text: &quot;C++ (C Plus Plus) is a powerful, general-purpose, object-oriented programming language, an extension of the C language, known for its speed, efficiency, and low-level memory control, making it ideal for high-performance applications like operating systems, game engines, graphics, and resource-intensive software&quot;\n        }\n    }\n}\n</code></pre>\n<p>You can <a href=\"https://stephenquan.github.io/qmlonline/?zcode=AAAC33icfVKxbtwwDN39FUSmBLGNpAU6eEs9B03QoJ1ZmbbZk0RBkuO4xf176bv04OsB5SCIj+TjEyl2QWKG5/w8sdkVfObWrfgcxabiCQeC3wWofTWK2G9M8zuw2sxdHhv4cHd3gkbiYczn2LH2M8Z6lMi/lB1tHcSyWZpN8MHOuKQv/v91fxvcfzrltWIn5ze6Nto+bnSs9kJv+SES/pO9GncNUMdZ4kXonSxgJJ/rg3eZEzE8SkfNqUf9XaGLvKzRBq7a21u4buHJTulw3AAnQAgyU+wnW8JAniLaKkwxSKIS5MdPMrnSUagI6iBEGSI6x34Ai36YdFsloAdtQD6xeJAe8kjQbuI7L7OHXiJwTpACUVcC9T0bpTXLStCBlbmy9EoWHDmJC5jjlyjB4W7tx1nHRWgPRKNupAoqW6JDbwgwBF0uZpWQwPKOQDSsvlamJWVySd+HjoD8wJ5WT0c1sknH/pGSTNFQxf7wlFeCJH2edf5XZwPdF+e3PUCxL/4Ah1bg+w==\" rel=\"nofollow noreferrer\">Try it Online!</a></p>\n<p>References:</p>\n<ul>\n<li><a href=\"https://doc.qt.io/qt-6/qml-qtquick-controls-scrollview.html#scroll-bars\" rel=\"nofollow noreferrer\">https://doc.qt.io/qt-6/qml-qtquick-controls-scrollview.html#scroll-bars</a></li>\n</ul>\n", "tags": ["qml"]}
{"id": "4622f42b-0988-45a0-a64c-553a64f68453", "text": "Q: Workarounds for using __has_include when it may or may not be defined - Is it valid to pass __has_include as a macro argument? A: <p>My preference is to define my own compatibility macros (or <code>static</code> inline functions) that do not have reserved names.</p>\n<p>GCC <a href=\"https://gcc.gnu.org/onlinedocs/cpp/_005f_005fhas_005fattribute.html\" rel=\"nofollow noreferrer\">already supports short-circuiting conditionals</a>, for example (simplified):</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#if defined(__has_cpp_attribute) &amp;&amp; __has_cpp_attribute(gnu::musttail)\n#  define MUSTTAIL [[gnu::musttail]]\n#elif defined(__has_c_attribute) &amp;&amp; __has_c_attribute(gnu::musttail)\n#  define MUSTTAIL [[gnu::musttail]]\n#elif defined(__has_attribute) &amp;&amp; __has_attribute(musttail)\n#  define MUSTTAIL __attribute__((musttail))\n#else\n#  define MUSTTAIL /**/\n#endif\n\n</code></pre>\n<p>This lets you flatten conditionals like this one, and it doesn\u2019t break anything.  Compilers ought to support this extension and the next versions of the C and C++ standards really should make it official.</p>\n<p>Since I do have to support compilers that don\u2019t allow this (or throw a diagnostic), what I currently have in my common first header is:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#if defined(__has_cpp_attribute)\n#  if __has_cpp_attribute(clang::musttail)\n#    define MUSTTAIL [[clang::musttail]]\n#  elif __has_cpp_attribute(gnu::musttail)\n#    define MUSTTAIL [[gnu::musttail]]\n#  endif // C++11 or later\n#elif defined(__has_c_attribute)\n#  if __has_c_attribute(clang::musttail)\n#    define MUSTTAIL [[clang::musttail]]\n#  elif __has_cpp_attribute(gnu::musttail)\n#    define MUSTTAIL [[gnu::musttail]]\n#  endif // C23 or later\n#endif\n\n#ifndef MUSTTAIL\n#  if ((defined(__GNUC__) &amp;&amp; __GNUC__ &gt;= 15) || \\\n       (defined(__clang__) &amp;&amp; __clang_major__ &gt;= 13) || \\\n       (defined(__INTEL_LLVM_COMPILER) &amp;&amp; __INTEL_LLVM_COMPILER &gt;= 20210400))\n// The last clause is unnecessary, since ICX defines __clang__ &gt;= 13.\n#    define MUSTTAIL __attribute__((musttail))\n#  endif // Clang, ICX, ICPX or GCC with standard attributes disabled.\n#endif\n\n#ifndef MUSTTAIL\n#  define MUSTTAIL /**/\n#endif // Did not detect support: define as whitespace.\n\n</code></pre>\n<p>Similarly, if I need to write portable code that aligns a pointer upward to the next aligned address, I\u2019ll write a wrapper for it and then an implementation for each platform I need to support that calls <code>std::align</code> on C++11, <code>__builtin_align_up</code> on Clang, casts to <code>uintptr_t</code>, or whatever else is appropriate.</p>\n<p>In this use case, you would preferably have the <code>#ifndef</code> blocks like the second section look for a macro that would be defined if and only if the header had been included.  There might be an appropriate one in the header already.  Otherwise, I would fall back on nested conditionals like in the first section above (<code>#ifdef __has_include</code> around a bunch of <code>#elif __has_include(&quot;bar.h&quot;)</code> blocks).  Currently, some of my projects check <code>__cplusplus</code> and include either <code>&lt;stddef.h&gt;</code>, <code>&lt;stdint.h&gt;</code>, etc., or else <code>&lt;cstddef&gt;</code> and <code>&lt;cstdint&gt;</code> with <code>using</code> declarations.  This guarantees that <code>size_t</code> is properly declared, and also <code>std::size_t</code> on C++, no matter which headers any other library I bring in includes.</p>\n<p>Another option here is to write a wrapper around one of the functions you care about and use that as your condition.  This macro can even have the same name as the function.</p>\n<pre class=\"lang-c prettyprint-override\"><code>\n#ifdef __has_include\n#  if __has_include(&quot;strncmpi.h&quot;)\n#    include &quot;strncmpi.h&quot;\n// Ensure that strncmpi is also declared as a macro, for later tests.\n#    define strncmpi(s1, s2, n) strncmpi((s1), (s2), (n))\n#  if __has_include(&lt;strings.h&gt;) // Use the BSD equivalent.\n#    define strncmpi(s1, s2, n) strncasecmp((s1), (s2), (n))\n#  endif\n#endif\n\n#if !defined(strncmpi) &amp;&amp; defined(__WIN32)\n#  include &lt;shlwapi.h&gt; // Use the Windows equivalent.\n#  define strncmpi(s1, s2, n) StrCmpNIA((s1), (s2), (n))\n#endif\n\n</code></pre>\n", "tags": ["c++", "c", "language-lawyer", "c-preprocessor"]}
{"id": "d21920b9-9120-446e-9ab5-f9390585dd48", "text": "Q: Rainbow lens style effect using SVG/CSS A: <p>Brilliant! I tweaked some of the values a smidge to fit my tastes a bit more, notably I upped the blur to <code>5px</code> and added the second dimension to the scale so they didn't grow as wide.</p>\n<pre><code>        scale(${1 + li * .5}, ${1 + li * .05})\n</code></pre>\n<p>I also gave each <code>&lt;use&gt;</code> a class of <code>beam</code>. Then I added a little twinkle by updating the opacity for the various beams:</p>\n<pre><code>\n.beam {\n    opacity: 0.45;\n    transition: opacity 0.35s ease-out;\n}\n</code></pre>\n<pre class=\"lang-js prettyprint-override\"><code>\n\nconst beams = Array.from(document.querySelectorAll(&quot;svg .beam&quot;));\n\nsetInterval(() =&gt; {\n    const used = new Set();\n\n    while (used.size &lt; 6) {\n        used.add(Math.floor(Math.random() * beams.length));\n    }\n\n    used.forEach(i =&gt; {\n        const beam = beams[i];\n        beam.style.opacity = .7;\n\n        setTimeout(() =&gt; {\n            beam.style.opacity = 0.45;\n        }, 350);\n    });\n}, 450);\n</code></pre>\n<p>Final result:<br />\n<img src=\"https://i.sstatic.net/M6YYzi1p.png\" alt=\"enter image description here\" /></p>\n", "tags": ["css", "svg", "sass", "background"]}
