{"id": "e67e6f5d-4ba6-4b82-ac86-76b678ab7697", "text": "Q: How to find corrupted date entry when date column type is (object) A: <p>Convert the dates to datatime and coerce errors. Then filter rows where an error occurred to either be fixed or dropped or further manipulated.</p>\n<pre><code>import pandas as pd\n\ndata = {\n    'Event': ['Meeting A', 'Meeting B', 'Presentation C', 'Workshop D'],\n    'Date': ['2023-01-15', '2923-01-18', '2023-02-01', '2023-02-05']\n}\n\ndf = pd.DataFrame(data)\n\ndf['dt_date'] = pd.to_datetime(df['Date'], errors = 'coerce') # Note: '2923-01-18' throws error without coerce\n\ndf[df['dt_date'].isna()]\n\n</code></pre>\n<h2>df with datetime column</h2>\n<div class=\"s-table-container\"><table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: right;\"></th>\n<th style=\"text-align: left;\">Event</th>\n<th style=\"text-align: left;\">Date</th>\n<th style=\"text-align: left;\">dt_date</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: right;\">0</td>\n<td style=\"text-align: left;\">Meeting A</td>\n<td style=\"text-align: left;\">2023-01-15</td>\n<td style=\"text-align: left;\">2023-01-15 00:00:00</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">1</td>\n<td style=\"text-align: left;\">Meeting B</td>\n<td style=\"text-align: left;\">2923-01-18</td>\n<td style=\"text-align: left;\">NaT</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">2</td>\n<td style=\"text-align: left;\">Presentation C</td>\n<td style=\"text-align: left;\">2023-02-01</td>\n<td style=\"text-align: left;\">2023-02-01 00:00:00</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">3</td>\n<td style=\"text-align: left;\">Workshop D</td>\n<td style=\"text-align: left;\">2023-02-05</td>\n<td style=\"text-align: left;\">2023-02-05 00:00:00</td>\n</tr>\n</tbody>\n</table></div>\n<h2>returned df from isna query</h2>\n<div class=\"s-table-container\"><table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: right;\"></th>\n<th style=\"text-align: left;\">Event</th>\n<th style=\"text-align: left;\">Date</th>\n<th style=\"text-align: left;\">dt_date</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: right;\">1</td>\n<td style=\"text-align: left;\">Meeting B</td>\n<td style=\"text-align: left;\">2923-01-18</td>\n<td style=\"text-align: left;\">NaT</td>\n</tr>\n</tbody>\n</table></div>\n<h3>More targeted option</h3>\n<p>Based on details, exact value causing error is <code>2821-11-10</code>. You can get that row with <code>df[df['Date'] == &quot;2821-11-10&quot;]</code> or change that value with a replace function like <code>df['date_clean'] = df['Date'].replace(&quot;2821-11-10&quot;, &quot;2021-11-10&quot;)</code>.</p>\n<p>I recommend taking the first approach to identify how many errors exist in the data and then handling the fixing/replacing.</p>\n", "tags": ["python", "pandas", "dataframe", "datetime"]}
{"id": "5d8e6428-92b7-443c-92a2-4740aeaf4903", "text": "Q: Behavior of .groupby and .transform - length mismatch A: <p>Try this</p>\n<pre class=\"lang-py prettyprint-override\"><code>df = df.groupby(['group'])['b'].transform(lambda x: [np.unique(x.astype(str))] * len(x))\n\n# or without numpy\n\ndf['c'] = df.groupby(['group'])['b'].transform(lambda x: [list(set(x))] * len(x))\n</code></pre>\n<p><code>transform</code> returns the # of records in a group and expect the same # of records (or single value) to be returned. That is 1st group x expects 3 elements, 2nd group y expects 2 elements, and so on.</p>\n<p>However, your code <code>np.unique(x.astype(str))</code> is returning the # of unique elements(<code>[1,2]</code>) for group x which is 2 elements. Thus, the error message <code>Length of values (2) does not match length of index (3)</code></p>\n<p>Instead, you want the same list for all records in a group x, so you want to return 3 elements that looks like <code>[[1, 2], [1, 2], [1, 2]]</code>.</p>\n", "tags": ["python", "pandas", "dataframe", "group-by"]}
{"id": "455b45f4-86b6-41c0-a420-c304e78d0077", "text": "Q: Groupby transform to list in pandas does not work A: <p>I come up one fix with below. PS : it should something wrong with <code>transform</code> , when the object type is <code>list</code> <code>tuple</code> or <code>set</code>..</p>\n\n<pre><code>df.groupby('a')['b'].transform(lambda x : [x.tolist()]*len(x))\nOut[226]: \n0    [1, 4, 7]\n1    [1, 4, 7]\n2    [1, 4, 7]\n3    [2, 5, 8]\n4    [2, 5, 8]\n5    [2, 5, 8]\n6    [3, 6, 9]\n7    [3, 6, 9]\n8    [3, 6, 9]\nName: b, dtype: object\n</code></pre>\n", "tags": ["python", "pandas", "dataframe", "group-by"]}
{"id": "8adddb1c-f8ab-4abf-8d7b-5ccf8236c334", "text": "Q: Writing an extension method to create a ZipArchiveEntry A: <p>@JonasH The entryName parameter is the contract, the user decides what the entry should be named, including the extension, or lack thereof.</p>\n", "tags": ["c#"]}
{"id": "1c8819cc-b90e-494c-9532-cfa121dd3341", "text": "Q: Is it possible to prefill a input() in Python 3&#39;s Command Line Interface? A: <p>I recommend using the <a href=\"https://python-prompt-toolkit.readthedocs.io/en/latest/pages/asking_for_input.html#passing-a-default\" rel=\"nofollow noreferrer\"><code>prompt_toolkit</code></a></p>\n<p>Usage example:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from prompt_toolkit import prompt\n\n_inp_tag_val_from = prompt(&quot;tag change from value\\&gt; &quot;, default=f&quot;{g.sea_tag_val_from}&quot;)\n</code></pre>\n", "tags": ["python", "input", "python-3.x", "command-line-interface"]}
