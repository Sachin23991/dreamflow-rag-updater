{"id": "5dc4401f-3617-486b-856e-cd56833484dd", "text": "Q: TypeScript can&#39;t infer type after destructuring union type A: <p>First I performed some minor refactorings to your code:</p>\n<ul>\n<li>I renamed the <code>type</code> property to <code>fooType</code>, because I don't like to use reserved keywords as property names.</li>\n<li>I changed some details to the generic type logic of the <code>Bar</code> type and the <code>getBar</code> function.</li>\n<li>I reimplemented your <code>getBar</code> function to my own insights.</li>\n<li>I added some logic to the body of the <code>doBar</code> function so that I could see what happened.</li>\n</ul>\n<p>The end result is this:</p>\n<pre class=\"lang-ts prettyprint-override\"><code>type Foo = &quot;A&quot; | &quot;B&quot;;\n\ntype Bar&lt;TFoo extends Foo&gt; = TFoo extends &quot;A&quot;\n  ? { fooType: TFoo; foobar: number }\n  : { fooType: TFoo; foobar: string };\n\nfunction getBar&lt;T extends Foo&gt;(fooType: T): Bar&lt;T&gt; {\n  return {\n    ...Object.create(null),\n    fooType: fooType,\n    foobar: (fooType === &quot;A&quot;)\n      ? 42\n      : &quot;Hello world&quot;\n  };\n}\n\nfunction doBar&lt;T extends Foo&gt;(bar: Bar&lt;T&gt;) {\n  // Do something with bar\n  console.log(bar.fooType);\n  console.log(bar.foobar);\n}\n\nconst { fooType: myType, foobar: myFoobar } = getBar(&quot;B&quot;);\ndoBar({ fooType: myType, foobar: myFoobar });\n</code></pre>\n<p>I think that this code does what you expect. Please don't ask me which step in my refactoring process caused the error to disappear, because I can't tell you. But now that you have some working code, you might be able to investigate it in somewhat more detail yourself.</p>\n<h2>Edit</h2>\n<p>You changed your question shortly after I posted my answer. In that change, you made some rigorous updates to your code in such a way that the initial intent is not reflected in the updated code anymore.</p>\n<p>For the sake of clarity and completeness of my answer, I also post your original code (before it was mutilated by you), so that at least my answer will remain consistent:</p>\n<pre class=\"lang-ts prettyprint-override\"><code>type Foo = &quot;A&quot; | &quot;B&quot;;\n\ntype Bar&lt;TFoo&gt; = TFoo extends &quot;A&quot;\n  ? { type: TFoo; foobar: number }\n  : { type: TFoo; foobar: string };\n\nfunction getBar(type: Foo): Bar&lt;Foo&gt; {\n  if (type === &quot;A&quot;) {\n    return { type, foobar: 42 };\n  } else {\n    return { type, foobar: &quot;hello world&quot; };\n  }\n}\n\nfunction doBar&lt;T extends Foo&gt;(bar: Bar&lt;T&gt;) {\n  // Do something with bar\n}\n\nconst { type: typeA, foobar: foobarA } = getBar(&quot;A&quot;);\ndoBar({ type: typeA, foobar: foobarA }); // Typescript Error\n\nconst barA = getBar(&quot;A&quot;);\ndoBar(barA); // No Typescript Error\n</code></pre>\n<p>I also repeat your updated code below, again to make sure that my answer will remain consistent in the future.</p>\n<pre class=\"lang-ts prettyprint-override\"><code>type Bar =\n  | { type: &quot;A&quot;; foobar: number }\n  | { type: &quot;B&quot;; foobar: string }\n\ndeclare const bar: Bar;\n\nconst { type, foobar } = bar;\nconst typeError: Bar = { type, foobar };\n\nconst noError: Bar = bar;\n</code></pre>\n<p>When looking at this new code, I am wondering what your intention is. This code seems to be just fine, right? For testing purposes, I only had to change this line:</p>\n<pre class=\"lang-ts prettyprint-override\"><code>declare const bar: Bar;\n</code></pre>\n<p>into something more concrete, like:</p>\n<pre class=\"lang-ts prettyprint-override\"><code>const bar: Bar = { type: &quot;A&quot;, foobar: 42 };\n</code></pre>\n<p>And after renaming property <code>type</code> to <code>fooType</code> again, my resulting test code thus became:</p>\n<pre class=\"lang-ts prettyprint-override\"><code>type Bar =\n  | { fooType: &quot;A&quot;; foobar: number }\n  | { fooType: &quot;B&quot;; foobar: string }\n\n//declare const bar: Bar;\nconst bar: Bar = { fooType: &quot;A&quot;, foobar: 42 };\n\nconst { fooType, foobar } = bar;\nconst typeErrorResolved: Bar = { fooType, foobar };\n\nconst noError: Bar = bar;\n\nconsole.log(typeErrorResolved.fooType);\nconsole.log(typeErrorResolved.foobar);\n</code></pre>\n<p><a href=\"https://www.typescriptlang.org/play/?#code/C4TwDgpgBAQghgJygXgFBSgHygbygMwHtCAVcCALigCIBBagbgOICNEqA7AVwFsWIkAX3RZczUuSrUYjcWwRUAzsAQBLDgHMow1AHpdAEwgBjADaJoxwh2VR5VeAgaorN4HfaxEKMUQmQpegAaOU8AFgAmbWcXa1s8PzJIEL95bR95Z1dbUEgAUQQEQgQAJQhFQlMANwgDB29kX2IkiBTWb0EY7PcOQgKihS8kRszUWJtKiAA6U0INAApciH7isorq2qnE8gBKLLjJmbnF8hXS8sqagy32hD3UIA\" rel=\"nofollow noreferrer\">Playground</a></p>\n", "tags": ["typescript"]}
{"id": "5166699f-5d5d-4253-b5c7-bae6434adce8", "text": "Q: Error creating query string: Expression &#39;@list&#39; in the SQL tree does not have a type mapping assigned A: <p>nvm: found a Bug to this Problem:</p>\n<p><a href=\"https://bugs.mysql.com/bug.php?id=119461\" rel=\"nofollow noreferrer\">https://bugs.mysql.com/bug.php?id=119461</a></p>\n", "tags": ["mysql", "entity-framework-core", ".net-10.0", "ef-core-10.0"]}
{"id": "6e0a1cf6-3a96-4e99-b421-9b4f11889c25", "text": "Q: EditForm - How can I prevent submit on pressing enter key A: <h1>Use the HTML 'form' attribute</h1>\n<h2>Background</h2>\n<p>I have been working on a blazor implementation of <a href=\"https://design-patterns.service.justice.gov.uk/components/search/\" rel=\"nofollow noreferrer\">MOJ search</a> and a page where it sits at the top of a list of selectable cards, to search the cards. Think of the cards list like a check box list. The Search component allows a user to filter the long paged list of cards. There is validation on the page to ensure the user has selected something before progressing. The validation summary must be shown above the search component though, which means the search component is inside the EditForm component containing the validation components and the card list. Pressing [Enter] in the search input must be enabled and trigger the search to filter the list, but NOT submit the card list form.</p>\n<h2>Solution</h2>\n<p>In order to achieve this I have added an additional html form, outside the main EditForm (used for the card list and validation). And then used the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Attributes/form\" rel=\"nofollow noreferrer\">HTML form attribute</a> to point the search's input and button to the &quot;remote&quot; form. The repo where this resides is currently private but is planned to be made public (hopefully soon). Note you can also use a second EditForm instead of the basic html form.</p>\n<h2>Code</h2>\n<p>Here's a dumbed down version of the search component, showing the use of the form attribute:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;input type=&quot;search&quot;\n       @onkeydown=OnKeyDown\n       form=&quot;@FormId&quot;&gt;\n&lt;button type=&quot;button&quot;\n    form=&quot;@FormId&quot;&gt;\n    Search\n&lt;/button&gt;\n@code {\n  [Parameter] public EventCallback&lt;KeyboardEventArgs&gt; OnKeyDown { get; set; }\n  [Parameter] public string? FormId { get; set; }\n}\n</code></pre>\n<h2>Unit test</h2>\n<p>Here's a unit test I wrote to ensure the search component doesn't trigger the parent form (it's in a bunit component, .razor file):</p>\n<pre class=\"lang-cs prettyprint-override\"><code>[Fact]\npublic void WhenFormIdSet_ThenDoesNotSubmitParentForm()\n{\n    // Arrange\n    var searchFormSubmitted = false;\n    var blazorFormSubmitted = false;\n    var onSubmitBlazorForm = (EditContext ctx) =&gt; { blazorFormSubmitted = true; };\n    var onSubmitSearchForm = () =&gt; { searchFormSubmitted = true; };\n    var onSearchKeyDown = (KeyboardEventArgs args) =&gt;\n    {\n        if (args.Code == Key.Enter.Code)\n            onSubmitSearchForm();\n    };\n    \n    var component = Render(\n        @&lt;div&gt;\n            &lt;form id=&quot;search-form&quot; @onsubmit=&quot;@onSubmitSearchForm&quot;&gt;&lt;/form&gt;\n            &lt;EditForm OnSubmit=&quot;@onSubmitBlazorForm&quot; Model=&quot;@this&quot;&gt;\n                &lt;GdsSearch ButtonType=&quot;button&quot; FormId=&quot;search-form&quot; OnKeyDown=&quot;onSearchKeyDown&quot; &gt;&lt;/GdsSearch&gt;\n                &lt;GdsButton Type=&quot;submit&quot;&gt;submit&lt;/GdsButton&gt;\n            &lt;/EditForm&gt;\n        &lt;/div&gt;\n    );\n    \n    // Act\n    var input = component.Find(&quot;input&quot;);\n    input.KeyDown(Key.Enter);\n\n    // Assert\n    Assert.False(blazorFormSubmitted);\n    Assert.True(searchFormSubmitted);\n}\n</code></pre>\n", "tags": ["blazor"]}
{"id": "ab1cd4ed-60aa-4176-a246-e412a9fd4b34", "text": "Q: Xcode XCTestCase - wait for setup to complete before starting tests A: <p>You could keep the <code>Task</code> created in the <em>class</em> <code>setUp</code> method in a property, and wait for it in the <em>instance</em> <code>setUp</code> method.</p>\n<pre><code>import Synchronization\n\nclass TestCase: XCTestCase {\n    static let task = Mutex&lt;Task&lt;Void, Never&gt;?&gt;(nil)\n    \n    override class func setUp() {\n        task.withLock {\n            $0 = Task {\n                await dataLibrary.load()\n            }\n        }\n    }\n    \n    override func setUp() async throws {\n        let task = TestCase.task.withLock { $0 }\n        await task?.value\n    }\n    \n    func testXXX() {\n        // ...\n    }\n}\n</code></pre>\n<p>Here I have used a <code>Mutex</code> to keep Xcode happy about the global <code>task</code> property. In practice though, I don't think Xcode will ever call the class and instance <code>setUp</code> methods concurrently, so I believe you could get away with <code>nonisolated(unsafe)</code>.</p>\n<pre><code>static nonisolated(unsafe) var task: Task&lt;Void, Never&gt;?\n\noverride class func setUp() {\n    task = Task {\n        await dataLibrary.load()\n    }\n}\n\noverride func setUp() async throws {\n    await TestCase.task?.value\n}\n</code></pre>\n", "tags": ["swift", "xcode", "xctestcase"]}
{"id": "42a19f42-5f5e-4be6-800f-45171f675c99", "text": "Q: Docker permission denied when running npm run build A: <p>This can happen if you copy files from your host to the image and you end up also copying an existing <code>node_modules/</code>.</p>\n<p>You can either:</p>\n<ul>\n<li><p>add <code>node_modules/</code> to your <a href=\"https://docs.docker.com/build/concepts/context/#dockerignore-files\" rel=\"nofollow noreferrer\"><code>.dockerignore</code></a>, or</p>\n</li>\n<li><p>delete <code>node_modules/</code> locally before building the dockerfile, or</p>\n</li>\n<li><p>avoid accidentally copying <code>node_modules/</code> to your image with wildcard copies like <code>COPY . .</code></p>\n</li>\n</ul>\n", "tags": ["node.js", "docker", "npm", "tsc", "npm-run"]}
{"id": "383b4319-e48c-4ca4-931b-8b7229e6ebf3", "text": "Q: How to zip a file using cmd line? A: <p>At the time of the Original Question the correct answer should have been use Windows JScript or VBS via command line which at the time such methods could build upto 2 GB zip using ADODB.Stream.writeFile(destination,ZIP_DATA);</p>\n<p><a href=\"https://i.sstatic.net/1nc9O.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/1nc9O.png\" alt=\"enter image description here\" /></a></p>\n<p>for a modernised copy  which still works well in Windows 10 see <a href=\"https://github.com/npocmaka/batch.scripts/blob/master/hybrids/jscript/zipjs.bat\" rel=\"nofollow noreferrer\">https://github.com/npocmaka/batch.scripts/blob/master/hybrids/jscript/zipjs.bat</a></p>\n<h2><strong>The CMD tool for zip handling on newer Windows 10,\nand carried over to Win 11 is TAR</strong>,</h2>\n<p>however it was not &quot;native&quot; command line in Windows 8 or earlier, since that system inbuilt dll feature was there as part of explorer, since I think, at least XP&quot;</p>\n<p>see <code>Tar --help</code></p>\n<p>To list use <code>Tar -tf file.zip</code></p>\n<p>To extract use <code>Tar -m -xf file.zip</code></p>\n<p>So the OP wanted save to zip</p>\n<p><strong>To compress use <code>Tar -a -cf new.zip files</code></strong></p>\n<p>Other options are available, but I think to work with &quot;nested&quot; archive files requires peeling the levels off.\nFor a practical use you can extract images and thumbnails or text from zips such as MS DocX, PptX, etc.\n<a href=\"https://i.sstatic.net/BEF58.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/BEF58.png\" alt=\"enter image description here\" /></a></p>\n<p>Overall it is better to use a universal zip tool such as the prime suggestion  7-Zip utility, but others are popular on windows especially the  Grandfather of all Windows variants WinZip (c) 1991 <a href=\"https://www.winzip.com/en/download/winzip/\" rel=\"nofollow noreferrer\">https://www.winzip.com/en/download/winzip/</a> which has specialist versions such as secured WinZip Courier and WinZip PDF!</p>\n<h2>[Later edit]</h2>\n<p>Others have shown the shortest way to write and view a ZIP is including <code>-a</code> switch such as <code>caf</code> (create archive file):</p>\n<pre><code>&gt;tar.exe caf my.zip &quot;new folder&quot;\n&gt;tar.exe tf my.zip &quot;new folder&quot;\nnew folder/\nnew folder/demo.pdf\nnew folder/demo.txt\nnew folder/fix-it.png\nnew folder/hello.txt\nnew folder/test.cmd\nnew folder/zip-it.exe\n</code></pre>\n<p>what you may note is that <code>-a</code> has limitations and is thus unlisted.<br />\nNor does the format list show zip?</p>\n<pre><code>  --format {ustar|pax|cpio|shar}  Select archive format\n</code></pre>\n<p>however -a is roughly similar to --format=zip (shorter use --fo=zip).<br />\nSo we can write office zip formats something like this, (for illustration only, the real file set is more complex but doable):</p>\n<pre><code>tar -fo=zip -cf pretend.docx &quot;word files&quot;\n</code></pre>\n<p>But we cannot do -r or -u with that combination to replace or update an edited file or files unless it is the whole collection!</p>\n<h2><code>Zip-it</code> to the rescue</h2>\n<p><a href=\"https://github.com/GitHubRulesOK/MyNotes/blob/master/SMOPs.MD#zip-it-add-to-fileextx-or-filezip\" rel=\"nofollow noreferrer\">https://github.com/GitHubRulesOK/MyNotes/blob/master/SMOPs.MD#zip-it-add-to-fileextx-or-filezip</a><br />\nTo write or add a file or folder set natively to a zip (NOT unzip which Tar does well) can be done using a Native CMD from the console such as</p>\n<pre><code>echo using System;using System.IO.Compression;class Z{static void Main(string^[^] a){if(a.Length^&lt;3){Console.WriteLine(&quot;Usage: zip-it &lt;zipfile.ext&gt; &lt;entry&gt; &lt;file to add&gt;&quot;);return;}using(var z=ZipFile.Open(a^[0^],ZipArchiveMode.Update)){var e=z.GetEntry(a^[1^]);if(e!=null)e.Delete();z.CreateEntryFromFile(a^[2^],a^[1^]);}}} &gt; &quot;%TMP%\\zip-it.cs&quot;  &amp;&amp; &quot;C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\csc.exe&quot; /nologo /platform:x86 /r:System.IO.Compression.dll /r:System.IO.Compression.FileSystem.dll /out:&quot;%CD%\\zip-it.exe&quot; &quot;%TMP%\\zip-it.cs&quot;  &amp;&amp; del &quot;%TMP%\\zip-it.cs&quot;\n</code></pre>\n<p>What this will do on MOST 10/11 Windows will write a small zip-it.exe file\n<a href=\"https://i.sstatic.net/MBKSmGNp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/MBKSmGNp.png\" alt=\"enter image description here\" /></a><br />\n<code>Usage: zip-it &lt;zipfile.ext&gt; &lt;entry&gt; &lt;file to add&gt;</code> NOTE: internally the folder division is posix style <code>/</code></p>\n<p>Now we can write or ADD smaller file collections such as:</p>\n<pre><code>zip-it word.docx word/document.xml x:\\folder\\document.xml\n</code></pre>\n<p>Still use TAR for view or extract or bulk New collections.</p>\n", "tags": ["windows", "batch-file", "command-line", "command-prompt"]}
{"id": "7a62ac03-086e-4728-a6b3-5c48f293a6e9", "text": "Q: Java make long task on button click run in a thread, then some other task after the thread is done A: <p>OK, so what I needed was:</p>\n<pre><code>bFind.addActionListener(new ActionListener() {\n    @Override\n    public void actionPerformed(ActionEvent e)\n    {\n        SwingWorker&lt;Void,Void&gt; worker = new SwingWorker&lt;Void, Void&gt;()\n        {\n            @Override\n            protected Void doInBackground() throws Exception\n            {\n                myLongProcessingTask();\n\n                return null;\n            }\n\n            @Override\n            protected void done()\n            {\n                super.done();\n                selectedIndex = -1;\n                lError.setText(&quot;&quot;);\n                nextDuplicate();\n            }\n        };\n\n        worker.execute();\n    }\n});\n</code></pre>\n", "tags": ["java", "multithreading", "swing", "user-interface", "awt"]}
{"id": "b930a6d6-42fb-46c8-b70f-0f1626157134", "text": "Q: Azure Functions SQL trigger delete operation - how to get id of deleted record? A: <p>Exactamundo.  What's the point of an SQL trigger azure function in the first place?   Because some app needs to be aware of a change that has been made in a database in the cloud.</p>\n<p>For example a frontend dashboard app shows data on a screen.   One of those items gets deleted on the backend.  The item should be removed from the screen.   How does the app know which exact item to remove if the id of the removed record has not been provided?</p>\n", "tags": ["c#", "azure", "azure-functions", "tsqlt"]}
{"id": "8cba6d15-4440-478a-ba31-2643e93616f1", "text": "Q: Swift Package Manager hangs on incremental builds (Swift 6.2, Linux Ubuntu 24.04) A: <p><strong>Solution: Upgrade to Swift 6.3-dev snapshot or newer</strong></p>\n<p>The issue was fixed in <a href=\"https://github.com/swiftlang/swift-package-manager/pull/9493\" rel=\"nofollow noreferrer\">PR #9493</a>.</p>\n<p><strong>How to fix:</strong></p>\n<ol>\n<li><strong>Use development snapshot</strong> (2025-12-15 or newer):\n<pre class=\"lang-bash prettyprint-override\"><code>wget https://download.swift.org/development/ubuntu2204/swift-DEVELOPMENT-SNAPSHOT-2025-12-19-a/swift-DEVELOPMENT-SNAPSHOT-2025-12-19-a-ubuntu22.04.tar.gz\ntar xzf swift-DEVELOPMENT-SNAPSHOT-2025-12-19-a-ubuntu22.04.tar.gz\nsudo mv swift-DEVELOPMENT-SNAPSHOT-2025-12-19-a-ubuntu22.04 /usr/share/swift\n\n</code></pre>\n</li>\n<li>Or wait for Swift 6.3 release (will include the fix)</li>\n</ol>\n<p>Verified on Ubuntu 24.04 KVM - incremental builds now work in ~2s instead of hanging indefinitely.</p>\n<p>Details: <a href=\"https://github.com/swiftlang/swift-package-manager/issues/9441\" rel=\"nofollow noreferrer\">https://github.com/swiftlang/swift-package-manager/issues/9441</a></p>\n", "tags": ["linux", "ubuntu", "swift-package-manager", "incremental-build", "swift6"]}
{"id": "c0707830-4022-4ef8-bf79-dbd508cf67cb", "text": "Q: Xcode not automatically creating bridging header? A: <p>File -&gt; New File -&gt; Header File</p>\n<p>Save it as a YourApp-Bridging-Header</p>\n<p>Than go to Build Settings, find &quot;Objective-C Bridging Header&quot; (as previously guys told) and pass way to your Bridging Header as: YourApp/YourApp-Bridging-Header.h Where 'YourApp/' is a name of app. It could contain white space, for example 'Your App/'.</p>\n<p>In my case in Xcode 7.3.1 it works</p>\n", "tags": ["ios", "objective-c", "swift", "xcode", "bridging-header"]}
