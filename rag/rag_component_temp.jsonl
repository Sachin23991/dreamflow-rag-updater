{"id": "623265b1-b658-4874-8c20-85a965c4f35d", "text": "Q: How to conditionally pass a vector to dplyr::select using quosures? A: <p>The thing that breaks your example is the conditional check:</p>\n<pre><code>exists(drop.col)\n</code></pre>\n<p>That forces evaluation of drop.col, so <code>cyl:hp</code> gets evaluated in the normal R environment (where <code>cyl/hp</code> don\u2019t exist), instead of being treated as a tidyselect expression inside <code>select()</code>.</p>\n<p>You could instead check for existence of the quosure content:</p>\n<pre><code>library(dplyr)\nlibrary(rlang)\n\nfill_temp &lt;- function(df, drop.col = NULL) {\n  q &lt;- enquo(drop.col)        # capture without forcing evaluation\n\n  if (quo_is_null(q)) return(df)  # conditional check WITHOUT evaluation\n\n  df %&gt;% select(-!!q)\n}\n\nfill_temp(mtcars, c(cyl:hp, gear))\n</code></pre>\n<p>Or with variadic arguments:</p>\n<pre><code>fill_temp &lt;- function(df, ...) {\n  qs &lt;- enquos(...)\n  if (length(qs) == 0) return(df)\n\n  df %&gt;% select(-!!!qs)\n}\n\nfill_temp(mtcars, cyl:hp, gear)\n</code></pre>\n<p>But I guess you want to evaluate partially the expression and check whether all\ngiven names exists in the df indeed.\nSo you want to evaluate expressions like <code>cyl:hy</code> etc.</p>\n<p>In this case, you can use <code>tidyselect::eval_select()</code></p>\n<pre><code>fill_temp &lt;- function(df, drop.col = NULL) {\n  q &lt;- enquo(drop.col)\n  if (quo_is_null(q)) return(df)\n\n  sel &lt;- tidyselect::eval_select(get_expr(q), df)  # resolves ranges like cyl:hp\n  if (length(sel) == 0) return(df)  # and you could do here other checks with `sel`!\n\n  df %&gt;% select(-all_of(names(sel)))\n}\n</code></pre>\n<p>You could make R give a strict error if anything is invalid:</p>\n<pre><code>library(dplyr)\nlibrary(rlang)\n\nfill_temp &lt;- function(df, ...) {\n  qs &lt;- enquos(...)\n  if (length(qs) == 0) return(df)\n\n  sel &lt;- tidyselect::eval_select(expr(c(!!!qs)), data = df, strict = TRUE)\n  df %&gt;% select(-all_of(names(sel)))\n}\n\nfill_temp(mtcars, cyl:hp, gear)\n</code></pre>\n<p>Or make it behave more gracefully - lenient - drop what exists; warn about missing explicit names</p>\n<pre><code>library(dplyr)\nlibrary(rlang)\nlibrary(tidyselect)\n\nfill_temp &lt;- function(df, drop.col = NULL, strict = TRUE) {\n  q &lt;- enquo(drop.col)\n  if (quo_is_null(q)) return(df)\n\n  sel &lt;- tryCatch(\n    eval_select(get_expr(q), data = df, strict = strict),\n    error = function(e) e\n  )\n\n  # &quot;conditional check&quot; that works for composite expressions:\n  if (inherits(sel, &quot;error&quot;)) {\n    # either return df, or stop, or warn \u2014 your choice\n    stop(&quot;Invalid column selector for this df:\\n&quot;, conditionMessage(sel), call. = FALSE)\n  }\n\n  df %&gt;% select(-all_of(names(sel)))\n}\n\nfill_temp(mtcars, c(cyl:hp, gear))\n</code></pre>\n<p>That gives the error behavior one would expect:</p>\n<pre><code>&gt; fill_temp(mtcars, c(cyl:hp, gear))\n                     mpg drat    wt  qsec vs am carb\nMazda RX4           21.0 3.90 2.620 16.46  0  1    4\nMazda RX4 Wag       21.0 3.90 2.875 17.02  0  1    4\nDatsun 710          22.8 3.85 2.320 18.61  1  1    1\nHornet 4 Drive      21.4 3.08 3.215 19.44  1  0    1\nHornet Sportabout   18.7 3.15 3.440 17.02  0  0    2\nValiant             18.1 2.76 3.460 20.22  1  0    1\nDuster 360          14.3 3.21 3.570 15.84  0  0    4\nMerc 240D           24.4 3.69 3.190 20.00  1  0    2\nMerc 230            22.8 3.92 3.150 22.90  1  0    2\nMerc 280            19.2 3.92 3.440 18.30  1  0    4\nMerc 280C           17.8 3.92 3.440 18.90  1  0    4\nMerc 450SE          16.4 3.07 4.070 17.40  0  0    3\nMerc 450SL          17.3 3.07 3.730 17.60  0  0    3\nMerc 450SLC         15.2 3.07 3.780 18.00  0  0    3\nCadillac Fleetwood  10.4 2.93 5.250 17.98  0  0    4\nLincoln Continental 10.4 3.00 5.424 17.82  0  0    4\nChrysler Imperial   14.7 3.23 5.345 17.42  0  0    4\nFiat 128            32.4 4.08 2.200 19.47  1  1    1\nHonda Civic         30.4 4.93 1.615 18.52  1  1    2\nToyota Corolla      33.9 4.22 1.835 19.90  1  1    1\nToyota Corona       21.5 3.70 2.465 20.01  1  0    1\nDodge Challenger    15.5 2.76 3.520 16.87  0  0    2\nAMC Javelin         15.2 3.15 3.435 17.30  0  0    2\nCamaro Z28          13.3 3.73 3.840 15.41  0  0    4\nPontiac Firebird    19.2 3.08 3.845 17.05  0  0    2\nFiat X1-9           27.3 4.08 1.935 18.90  1  1    1\nPorsche 914-2       26.0 4.43 2.140 16.70  0  1    2\nLotus Europa        30.4 3.77 1.513 16.90  1  1    2\nFord Pantera L      15.8 4.22 3.170 14.50  0  1    4\nFerrari Dino        19.7 3.62 2.770 15.50  0  1    6\nMaserati Bora       15.0 3.54 3.570 14.60  0  1    8\nVolvo 142E          21.4 4.11 2.780 18.60  1  1    2\n&gt; fill_temp(mtcars, c(cyl:hp, gear, abc))\nError: Invalid column selector for this df:\nCan't select columns that don't exist.\n\u2716 Column `abc` doesn't exist.\n&gt; fill_temp(mtcars, c(cyl:hpc, gear, abc))\nError: Invalid column selector for this df:\nCan't select columns that don't exist.\n\u2716 Column `hpc` doesn't exist.\n</code></pre>\n", "tags": ["r", "if-statement", "dplyr", "quosure"]}
{"id": "776578cf-6e7f-4ff0-9b0f-f01b027b78c1", "text": "Q: WPF ListView Selection with RadioButton in ItemTemplate A: <p>You can bind the <code>IsSelected</code> property of the <code>ListViewItem</code> to <code>IsChecked</code> property of <code>RadioButton</code> to achieve this. Like,</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;ListView  Grid.Column=&quot;0&quot; Grid.Row=&quot;0&quot; Grid.RowSpan=&quot;10&quot; \n           ItemsSource=&quot;{Binding LeftPaneViewModelInfoItems}&quot; \n           Background=&quot;Transparent&quot; SelectedItem=&quot;{Binding SelectedViewModelInfoItem}&quot;&gt;\n    &lt;ListView.ItemTemplate&gt;\n        &lt;DataTemplate&gt;\n            &lt;RadioButton Content=&quot;{Binding Text}&quot; \n                         Style=&quot;{StaticResource RadioButtonToggleButtonStyle}&quot; \n                         GroupName=&quot;DisplayPage&quot;\n                         IsChecked=&quot;{Binding IsSelected, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBoxItem}}}&quot;/&gt;\n        &lt;/DataTemplate&gt;\n    &lt;/ListView.ItemTemplate&gt;\n&lt;/ListView&gt;\n</code></pre>\n<p>If you want to completely remove the Selection background colouring completely, you can use below <code>ItemContainerStyle</code> along with above change.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;ListView.ItemContainerStyle&gt;\n    &lt;Style TargetType=&quot;{x:Type ListViewItem}&quot;&gt;\n        &lt;Setter Property=&quot;Background&quot; Value=&quot;Transparent&quot; /&gt;\n        &lt;Setter Property=&quot;Template&quot;&gt;\n            &lt;Setter.Value&gt;\n                &lt;ControlTemplate TargetType=&quot;{x:Type ListViewItem}&quot;&gt;\n                    &lt;ContentPresenter /&gt;\n                &lt;/ControlTemplate&gt;\n            &lt;/Setter.Value&gt;\n        &lt;/Setter&gt;\n    &lt;/Style&gt;\n&lt;/ListView.ItemContainerStyle&gt;\n</code></pre>\n", "tags": ["wpf", "mvvm", "binding", "styles", "mvvm-light"]}
{"id": "7abf493b-9321-4d48-aaa3-cb960cc0bc56", "text": "Q: Issue with upgrading aws EC2 t2 machine to t3 or t3a A: <p>I hit this issue while upgrading an old EC2 instance from t2 to t3a. Installing the linux-aws kernel, making sure cloud-init was installed, and explicitly enabling ENA fixed the instance status check failure for me:</p>\n<p>sudo apt-get install linux-aws -y sudo apt install cloud-init -y aws ec2 modify-instance-attribute --instance-id i-02225134ba5c0ba8f --ena-support</p>\n<p>After a reboot and instance type change, the instance started normally.</p>\n", "tags": ["amazon-web-services", "amazon-ec2", "ssh", "ubuntu-16.04", "ubuntu-14.04"]}
{"id": "501cd96f-a8c2-4ae8-926c-e292cafe43fc", "text": "Q: Why indexes don&#39;t improve performance? A: <p>You could significantly improve performance by combining the two CTEs together using aggregation.</p>\n<pre class=\"lang-sql prettyprint-override\"><code>WITH DeptStats AS (\n    SELECT \n        a.&quot;ID_department&quot;,\n        COUNT(*) as cnt,\n        COUNT(il.&quot;inventory_number&quot;) &gt; 0 as HasBad\n    FROM auditory a\n    JOIN equipment e ON a.&quot;number_auditory&quot; = e.&quot;number_auditory&quot;\n    LEFT JOIN (\n        SELECT DISTINCT\n          il.&quot;inventory_number&quot;\n        FROM inventorylist il\n        WHERE il.&quot;ID_total&quot; IN (2, 3)\n    ) il ON e.&quot;inventory_number&quot; = il.&quot;inventory_number&quot;\n    GROUP BY a.&quot;ID_department&quot;\n)\nSELECT \n    d.&quot;name&quot; AS &quot;division&quot;,\n    COALESCE(ds.cnt, 0) AS &quot;num of equip&quot;\nFROM department d\nLEFT JOIN DeptStats ds ON d.&quot;ID_department&quot; = ds.&quot;ID_department&quot;\nWHERE (ds.HasBad IS NULL OR NOT ds.HasBad)\nORDER BY d.&quot;name&quot;;\n</code></pre>\n<p><a href=\"https://dbfiddle.uk/lhCSXQU2\" rel=\"nofollow noreferrer\">db&lt;&gt;fiddle</a></p>\n", "tags": ["sql", "postgresql", "performance"]}
{"id": "46774f86-7625-41c7-a1c5-77c44a15ffc9", "text": "Q: Deleting tweets with JS console A: <p>as of december 2025, this worked great to delete own tweets :</p>\n<pre><code>(async () =&gt; {\n  const sleep = ms =&gt; new Promise(r =&gt; setTimeout(r, ms));\n  const processed = new WeakSet();\n\n  while (true) {\n    const tweets = Array.from(document.querySelectorAll('article'))\n      .filter(t =&gt; !processed.has(t));\n\n    if (tweets.length === 0) {\n      window.scrollBy(0, window.innerHeight);\n      await sleep(1500);\n      continue;\n    }\n\n    for (const tweet of tweets) {\n      processed.add(tweet);\n\n      const caret = tweet.querySelector('[data-testid=&quot;caret&quot;]');\n      if (!caret) continue;\n\n      caret.click();\n      await sleep(700);\n\n      const deleteSpan = Array.from(document.querySelectorAll('span'))\n        .find(s =&gt; s.textContent.trim() === 'Supprimer');\n\n      if (!deleteSpan) {\n        document.body.click(); // close menu\n        await sleep(300);\n        continue;\n      }\n\n      deleteSpan.closest('[role=&quot;menuitem&quot;]').click();\n      await sleep(600);\n\n      const confirm = document.querySelector(\n        '[data-testid=&quot;confirmationSheetConfirm&quot;]'\n      );\n      if (!confirm) continue;\n\n      confirm.click();\n      await sleep(1200);\n    }\n  }\n})();\n</code></pre>\n", "tags": ["javascript", "dom", "settimeout", "console.log"]}
{"id": "394ef25b-d9d2-464c-8bce-3c0cc1947860", "text": "Q: I get an error in my Azure Functions project in a public class. Changing to a static class is not working A: <p>Don't see any reason to make the <code>VerifyDisplayname</code> as extension method in your <code>NewFunction</code>.</p>\n<p>Remove <code>this</code> so that the <code>VerifyDisplayname</code> is not recognized as the extension method.</p>\n<pre class=\"lang-cs prettyprint-override\"><code>public static string VerifyDisplayname(string text)\n</code></pre>\n<p>Assume that the <strong><code>VerifyDisplayname</code> is not depend on the object instance</strong> if you are defining it as <code>static</code> method.</p>\n<p>Otherwise, create a static class <code>StringExtensions</code> and move the <code>VerifyDisplayname</code> in the <code>StringExtensions</code> class.</p>\n<pre class=\"lang-cs prettyprint-override\"><code>public static class StringExtensions\n{\n    public static string VerifyDisplayname(this string text)\n    {\n        // Implementation of `VerifyDisplayname` extension method\n    }\n}\n</code></pre>\n<p>Note that you only create the <code>StringExtensions</code> class with <code>VerifyDisplayname</code> extension method to avoid duplicating of creating the same method in multiple places and you want the <em>shortcut</em> when accessing the <code>string</code> (code editor prompts available properties and methods) as:</p>\n<pre class=\"lang-cs prettyprint-override\"><code>string isdisplaynamevalid = desireddisplayname.VerifyDisplayname();\n</code></pre>\n", "tags": ["c#", "azure-functions"]}
{"id": "e1967202-b8f8-4c44-9265-098e286d1efe", "text": "Q: How to implement a Laplace filter in C++ A: <pre><code>import cv2\nimport numpy as np\n\n# Files must be in the same folder as this script (.py)\nbackground_file = '1.jpg'\nobject_file = '2.jpg'\n\ndef main():\n    # --- STEP 1: LOAD IMAGES ---\n    background_img = cv2.imread(background_file)\n    object_img = cv2.imread(object_file)\n\n    if background_img is None or object_img is None:\n        print(&quot;Error: Image files not found!&quot;)\n        return\n\n    # --- STEP 2: PREPROCESSING (BLUR) ---\n    # Edge detectors (like Laplacian) are very sensitive to noise.\n    # Small dots in the sky would be detected as edges.\n    # That is why we apply a strong Gaussian blur.\n    # (5, 5) is the kernel size.\n    gray_bg = cv2.GaussianBlur(\n        cv2.cvtColor(background_img, cv2.COLOR_BGR2GRAY),\n        (5, 5),\n        0\n    )\n    gray_obj = cv2.GaussianBlur(\n        cv2.cvtColor(object_img, cv2.COLOR_BGR2GRAY),\n        (5, 5),\n        0\n    )\n\n    # --- STEP 3: LAPLACIAN FILTER (EDGE DETECTION) ---\n    # This is the core of the method.\n    # We detect rapid intensity changes (edges).\n    # CV_16S allows negative values (gradient math).\n    lap_bg_raw = cv2.Laplacian(gray_bg, cv2.CV_16S, ksize=3)\n    lap_obj_raw = cv2.Laplacian(gray_obj, cv2.CV_16S, ksize=3)\n\n    # Convert to 8-bit image (0\u2013255) for visualization\n    lap_bg = cv2.convertScaleAbs(lap_bg_raw)\n    lap_obj = cv2.convertScaleAbs(lap_obj_raw)\n\n    # PROOF: Showing that Laplacian filter is used\n    # You can clearly see white outlines on black background\n    cv2.imshow('1_Laplacian_Background', lap_bg)\n    cv2.imshow('2_Laplacian_Object', lap_obj)\n\n    # --- STEP 4: EDGE DIFFERENCE ---\n    # Subtract background edges from object edges.\n    # Common elements disappear, leaving only the object outline.\n    edge_diff = cv2.absdiff(lap_bg, lap_obj)\n\n    # Thresholding: everything above 20 becomes white\n    _, skeleton_mask = cv2.threshold(edge_diff, 20, 255, cv2.THRESH_BINARY)\n\n    # Morphological closing:\n    # Laplacian often produces broken lines.\n    # Closing connects them into continuous contours.\n    kernel = np.ones((5, 5), np.uint8)\n    skeleton_mask = cv2.morphologyEx(\n        skeleton_mask,\n        cv2.MORPH_CLOSE,\n        kernel,\n        iterations=3\n    )\n\n    # --- STEP 5: FILLING HOLES (KEY TRICK) ---\n    # At this point we only have an outline (skeleton).\n    # The inside is black and must be filled.\n    \n    # 1. Find contours on the skeleton\n    edge_contours, _ = cv2.findContours(\n        skeleton_mask,\n        cv2.RETR_EXTERNAL,\n        cv2.CHAIN_APPROX_SIMPLE\n    )\n\n    # 2. Create an empty mask\n    full_mask = np.zeros_like(skeleton_mask)\n\n    # 3. Draw contours filled (-1)\n    # This automatically fills the interior\n    cv2.drawContours(\n        full_mask,\n        edge_contours,\n        -1,\n        (255),\n        thickness=cv2.FILLED\n    )\n\n    # Slight dilation to avoid cutting off ears/fingers\n    full_mask = cv2.dilate(full_mask, kernel, iterations=1)\n\n    # --- STEP 6: CROPPING AND ALPHA CHANNEL ---\n    # Now we find contours on the filled mask\n    final_contours, _ = cv2.findContours(\n        full_mask,\n        cv2.RETR_EXTERNAL,\n        cv2.CHAIN_APPROX_SIMPLE\n    )\n\n    output_preview = object_img.copy()\n    counter = 0\n\n    for contour in final_contours:\n        # Ignore very small artifacts\n        if cv2.contourArea(contour) &lt; 400:\n            continue\n\n        counter += 1\n\n        # Bounding box\n        x, y, w, h = cv2.boundingRect(contour)\n\n        # Draw bounding box (for visualization)\n        cv2.rectangle(\n            output_preview,\n            (x, y),\n            (x + w, y + h),\n            (0, 255, 0),\n            2\n        )\n\n        # Crop color image\n        color_crop = object_img[y:y+h, x:x+w]\n\n        # Crop corresponding mask (alpha channel)\n        mask_crop = full_mask[y:y+h, x:x+w]\n\n        # --- CREATE ALPHA CHANNEL ---\n        # JPG has 3 channels (BGR)\n        # PNG supports a 4th channel: Alpha (transparency)\n\n        # Split BGR\n        b, g, r = cv2.split(color_crop)\n\n        # Merge BGR + Alpha\n        # Alpha rules:\n        # 255 = fully visible\n        # 0   = fully transparent\n        png_crop = cv2.merge((b, g, r, mask_crop))\n\n        # --- SAVE ---\n        # Must be PNG, JPG does NOT support alpha channel\n        filename = f&quot;extracted_object_{counter}.png&quot;\n        cv2.imwrite(filename, png_crop)\n\n        # Show extracted object\n        cv2.imshow(f'Object_{counter}', png_crop)\n\n    # --- STEP 7: SHOW DEBUG WINDOWS ---\n    cv2.imshow('3_Skeleton_Mask', skeleton_mask)\n    cv2.imshow('4_Filled_Mask', full_mask)\n    cv2.imshow('5_Final_Result', output_preview)\n\n    cv2.waitKey(0)\n    cv2.destroyAllWindows()\n\n\nif __name__ == &quot;__main__&quot;:\n    main()\n</code></pre>\n", "tags": ["c++", "opencv", "image-processing"]}
