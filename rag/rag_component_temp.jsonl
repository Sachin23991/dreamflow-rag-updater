{"id": "8cdb84df-eebf-4c75-bcf7-a35afbca14a2", "text": "Q: Using TransactionScope with Entity Framework 6 A: <p>Yes, it's possible to do and it's very useful when you want to <strong>insert an entity to database</strong> and use <strong>the auto-generated id for the next insert or update</strong></p>\n<pre><code>using (var context = new DbContext())     \n{ \n    using (var transaction = context.Database.BeginTransaction()) {\n        var item = new Item();\n        context.Items.Insert(item);\n        context.SaveChanges(); // temporary insert to db to get back the auto-generated id\n    \n        // do some other things\n        var otherItem = context.OtherItems.First();\n        // use the inserted id\n        otherItem.Message = $&quot;You just insert item with id = {item.Id} to database&quot;;\n        transaction.Commit();\n    }\n} \n</code></pre>\n<p>Because your question also asked about a working pattern, here's my working code (with use of FluentApi, DbContext &amp; Transaction). I was having the same issue as you :). Hope it helps you</p>\n<pre><code>public class FluentUnitOfWork : IDisposable\n{\n    private DbContext Context { get; }\n\n    private DbContextTransaction Transaction { get; set; }\n\n    public FluentUnitOfWork(DbContext context)\n    {\n        Context = context;\n    }\n\n    public FluentUnitOfWork BeginTransaction()\n    {\n        Transaction = Context.Database.BeginTransaction();\n        return this;\n    }\n\n    public FluentUnitOfWork DoInsert&lt;TEntity&gt;(TEntity entity) where TEntity : class\n    {\n        Context.Set&lt;TEntity&gt;().Add(entity);\n        return this;\n    }\n\n    public FluentUnitOfWork DoInsert&lt;TEntity&gt;(TEntity entity, out TEntity inserted) where TEntity : class\n    {\n        inserted = Context.Set&lt;TEntity&gt;().Add(entity);\n        return this;\n    }\n\n    public FluentUnitOfWork DoUpdate&lt;TEntity&gt;(TEntity entity) where TEntity : class\n    {\n        Context.Entry(entity).State = EntityState.Modified;\n        return this;\n    }\n\n    public FluentUnitOfWork SaveAndContinue()\n    {\n        try\n        {\n            Context.SaveChanges();\n        }\n        catch (DbEntityValidationException dbEx)\n        {\n            // add your exception handling code here\n        }\n        return this;\n    }\n\n    public bool EndTransaction()\n    {\n        try\n        {\n            Context.SaveChanges();\n            Transaction.Commit();\n        }\n        catch (DbEntityValidationException dbEx)\n        {\n            // add your exception handling code here\n        }\n        return true;\n    }\n\n    public void RollBack()\n    {\n        Transaction.Rollback();\n        Dispose();\n    }\n\n    public void Dispose()\n    {\n        Transaction?.Dispose();\n        Context?.Dispose();\n    }\n}\n</code></pre>\n<p>Sample usage:</p>\n<pre><code>var status = BeginTransaction()\n                // First Part\n                .DoInsert(entity1)\n                .DoInsert(entity2)\n                .DoInsert(entity3)\n                .DoInsert(entity4)\n                .SaveAndContinue()\n                // Second Part\n                .DoInsert(statusMessage.SetPropertyValue(message =&gt; message.Message, $&quot;Just got new message {entity1.Name}&quot;))\n            .EndTransaction();\n</code></pre>\n", "tags": ["c#", "entity-framework-6", "dbcontext", "transactionscope", "savechanges"]}
{"id": "6cae3d41-5cfe-426b-bfc8-d63d9953a95f", "text": "Q: How to autoscroll on WPF datagrid A: <p>I implemented a universal auto-scroll behavior that pauses when the user intervenes with manual scrolling and resumes auto-scrolling once the scrollbar reaches the bottom.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- ItemsSource MUST BE INotifyCollectionChanged, Like ObservableCollection --&gt;\n&lt;DataGrid b:AutoScrollBehavior.IsEnabled=&quot;True&quot;\n          b:AutoScrollBehavior.AllowPause=&quot;True&quot; \n          ItemsSource=&quot;{Binding xxx}&quot;/&gt;\n</code></pre>\n<pre class=\"lang-cs prettyprint-override\"><code>public static class AutoScrollBehavior\n{\n    private sealed class AutoScrollState : IDisposable\n    {\n        public bool AllowPause { get; set; }\n\n        public bool AutoScroll { get; set; }\n\n        public ItemsControl? ItemsControl { get; set; }\n\n        public INotifyCollectionChanged? NotifyCollection { get; set; }\n\n        public ScrollViewer? ScrollViewer { get; set; }\n\n        public void Dispose()\n        {\n            if (ScrollViewer is not null)\n            {\n                ScrollViewer.ScrollChanged -= OnScrollChanged;\n                ScrollViewer = null;\n            }\n\n            if (NotifyCollection is not null)\n            {\n                NotifyCollection.CollectionChanged -= OnCollectionChanged;\n                NotifyCollection = null;\n            }\n\n            ItemsControl = null;\n        }\n\n        public void OnCollectionChanged(object? sender, NotifyCollectionChangedEventArgs e)\n        {\n            if (e.Action == NotifyCollectionChangedAction.Reset)\n            {\n                AutoScroll = true;\n                ScrollViewer?.Dispatcher.BeginInvoke(() =&gt; ScrollViewer.ScrollToEnd(), DispatcherPriority.Loaded);\n\n                return;\n            }\n\n            if (AutoScroll &amp;&amp; e.Action == NotifyCollectionChangedAction.Add)\n            {\n                ScrollViewer?.Dispatcher.BeginInvoke(() =&gt; ScrollViewer.ScrollToEnd(), DispatcherPriority.Loaded);\n            }\n        }\n\n        public void OnScrollChanged(object sender, ScrollChangedEventArgs e)\n        {\n            if (ScrollViewer is not null)\n            {\n                AutoScroll = Math.Abs(ScrollViewer.VerticalOffset - ScrollViewer.ScrollableHeight) &lt; 4 || !AllowPause;\n            }\n        }\n    }\n\n    public static readonly DependencyProperty AllowPauseProperty =\n        DependencyProperty.RegisterAttached(\n            &quot;AllowPause&quot;,\n            typeof(bool),\n            typeof(AutoScrollBehavior),\n            new PropertyMetadata(true));\n\n    public static readonly DependencyProperty IsEnabledProperty =\n        DependencyProperty.RegisterAttached(\n            &quot;IsEnabled&quot;,\n            typeof(bool),\n            typeof(AutoScrollBehavior),\n            new PropertyMetadata(false, OnIsEnabledChanged));\n\n    private static readonly DependencyProperty _stateProperty =\n        DependencyProperty.RegisterAttached(\n            &quot;State&quot;,\n            typeof(AutoScrollState),\n            typeof(AutoScrollBehavior),\n            new PropertyMetadata(null));\n\n    public static bool GetAllowPause(DependencyObject obj)\n    {\n        return (bool)obj.GetValue(AllowPauseProperty);\n    }\n\n    public static bool GetIsEnabled(DependencyObject obj)\n    {\n        return (bool)obj.GetValue(IsEnabledProperty);\n    }\n\n    public static void SetAllowPause(DependencyObject obj, bool value)\n    {\n        obj.SetValue(AllowPauseProperty, value);\n    }\n\n    public static void SetIsEnabled(DependencyObject obj, bool value)\n    {\n        obj.SetValue(IsEnabledProperty, value);\n    }\n\n    private static void CleanupState(ItemsControl itemsControl)\n    {\n        var state = GetState(itemsControl);\n\n        if (state is not null)\n        {\n            state.Dispose();\n            SetState(itemsControl, null);\n        }\n    }\n\n    private static AutoScrollState? GetState(DependencyObject obj)\n    {\n        return (AutoScrollState?)obj.GetValue(_stateProperty);\n    }\n\n    private static void OnIsEnabledChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)\n    {\n        if (d is not ItemsControl itemsControl)\n        {\n            return;\n        }\n\n        itemsControl.Loaded -= OnItemsControlLoaded;\n        itemsControl.Unloaded -= OnItemsControlUnloaded;\n\n        CleanupState(itemsControl);\n\n        if ((bool)e.NewValue)\n        {\n            itemsControl.Loaded += OnItemsControlLoaded;\n            itemsControl.Unloaded += OnItemsControlUnloaded;\n        }\n    }\n\n    private static void OnItemsControlLoaded(object sender, RoutedEventArgs e)\n    {\n        if (sender is not ItemsControl itemsControl)\n        {\n            return;\n        }\n\n        CleanupState(itemsControl);\n\n        if (itemsControl.ItemsSource is not INotifyCollectionChanged notifyCollection)\n        {\n            return;\n        }\n\n        var scrollViewer = VisualHelper.GetChild&lt;ScrollViewer&gt;(itemsControl);\n\n        if (scrollViewer is null)\n        {\n            return;\n        }\n\n        bool allowPause = GetAllowPause(itemsControl);\n\n        var state = new AutoScrollState {\n            AutoScroll = true,\n            ScrollViewer = scrollViewer,\n            NotifyCollection = notifyCollection,\n            ItemsControl = itemsControl,\n            AllowPause = allowPause\n        };\n\n        SetState(itemsControl, state);\n\n        scrollViewer.ScrollChanged += state.OnScrollChanged;\n        notifyCollection.CollectionChanged += state.OnCollectionChanged;\n    }\n\n    private static void OnItemsControlUnloaded(object sender, RoutedEventArgs e)\n    {\n        if (sender is ItemsControl itemsControl)\n        {\n            CleanupState(itemsControl);\n        }\n    }\n\n    private static void SetState(DependencyObject obj, AutoScrollState? value)\n    {\n        obj.SetValue(_stateProperty, value);\n    }\n}\n</code></pre>\n", "tags": ["c#", "wpf", "datagrid"]}
{"id": "ee0e4634-b9fa-461a-b38c-02b913a10360", "text": "Q: ScrollViewReader / scrollTo(_:anchor:) not working reliably A: <p>In my case with <code>UIViewRepresentable</code> + <code>func sizeThatFits(_ proposal: ProposedViewSize, uiView: Self.UIViewType, context: Self.Context) -&gt; CGSize?</code></p>\n<p>add <code>matchedGeometryEffect</code> to cells can enhance reliability.</p>\n", "tags": ["swiftui", "scrollview", "scrollviewreader"]}
{"id": "a1b3f452-59a5-4f83-a460-5299bb0db55b", "text": "Q: How to normalize screenshot paths for test retries to compare against same baseline? A: <p>I\u2019m not sure Playwright can perform the kind of normalization you\u2019re aiming for. However, since you\u2019re using Node.js, you can leverage the built-in <code>fs</code> module to rename the file to a consistent, arbitrary name and keep it uniform throughout the test run.</p>\n<p>I\u2019d suggest creating a small helper function that targets:</p>\n<pre><code>test-results/my-test/argos/\n</code></pre>\n<p>and ensures the file is always named <code>screenshot.png</code>.</p>\n<p>In short, you can use Node.js as an intermediary between Playwright and Argos, letting Node handle the file system operations reliably. While I generally prefer to avoid embedding Node-specific logic directly inside Playwright tests, this is one of those cases where it\u2019s a necessary and practical solution.</p>\n", "tags": ["playwright", "playwright-typescript"]}
{"id": "a2f23179-94db-4513-bbe9-7eb9d64c34cb", "text": "Q: How to convert Date type Angular to LocalDate in Java A: <p>How to send LocalDate and LocalDateTime from Angular to Spring</p>\n<p>nicer solution:</p>\n<p><strong>app.module.ts</strong></p>\n<pre><code>import {DatePipe} from '@angular/common';\n.\n.\n.\nproviders: [DatePipe]\n</code></pre>\n<p><strong>app.service.ts</strong></p>\n<pre><code>import { DatePipe } from '@angular/common';\n\n constructor( private datePipe: DatePipe) {}\n\npublic sendStuff():  Observable&lt;any&gt;{\n    let params = new HttpParams().set(&quot;date&quot;, this.datePipe.transform(new Date(),&quot;yyyy-MM-dd&quot;))\n    .set(&quot;datetime&quot;,new Date().toISOString());\n    return this.http.post&lt;any&gt;(&quot;urlPath../values/show&quot;, &quot;Body&quot; , {\n      headers: new HttpHeaders({\n        'Accept': 'application/json'\n      }),\n      params\n    }); \n  }\n</code></pre>\n<p>Spring Part</p>\n<pre><code>@PostMapping(path=&quot;values/show&quot;)\npublic Map&lt;String, Object&gt;  showValues(@RequestParam(&quot;date&quot;) @DateTimeFormat(iso = DateTimeFormat.ISO.DATE)  LocalDate date,\n @RequestParam(&quot;datetime&quot;)  @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME)  LocalDateTime datetime) {) {\n...\n}\n</code></pre>\n<p>If you just want to convert LocalDate you can leave the datePipe away and just send new Date().toISOString() from Angular. But since the Questioner especially asked for LocalDate you need some sort of Format to get this kind of Date -&gt; &quot;yyyy-MM-dd&quot; . Only with this Spring is able to do its magic.</p>\n<p>Btw. same is possivle if you just need the time (HH:mm:ss.SSSXXX) which is DateTimeFormat.ISO.TIME .</p>\n<p><strong>finish!</strong></p>\n<p><strong>not so nice solution and more uncomfortable -&gt; convert to String</strong>\n(<strong>not tested</strong> since i was happy with Spring solution)</p>\n<p><strong>app.service.ts</strong></p>\n<pre><code>public sendStuff():  Observable&lt;any&gt;{\n    let params = new HttpParams().set(&quot;datetime&quot;,new Date().toLocaleString())\n    .set(&quot;datetime&quot;,new Date().toISOString());\n    return this.http.post&lt;any&gt;(&quot;urlPath../values/show&quot;, &quot;Body&quot; , {\n      headers: new HttpHeaders({\n        'Accept': 'application/json'\n      }),\n      params\n    }); \n  }\n</code></pre>\n<p>Spring:</p>\n<pre><code>@PostMapping(path=&quot;values/show&quot;)\npublic Map&lt;String, Object&gt;  showValues( @RequestParam String date,  @RequestParam String datetime) {\n...\n     // code to transform String to Date copied somewhere\n //Create a DateTimeFormatter with your required format:\n DateTimeFormatter dateTimeFormat = new DateTimeFormatter(DateTimeFormatter.BASIC_ISO_DATE);\n\n    //Next parse the date from the @RequestParam, specifying the TO type as a TemporalQuery:\n   LocalDateTime date = dateTimeFormat.parse(datetime, LocalDateTime::from);\n\n   // some more code to transform LocalDate...\n}\n</code></pre>\n", "tags": ["java", "json", "angular", "spring-boot", "date"]}
{"id": "75182a52-a46e-4ad6-bdc0-ca86d8743026", "text": "Q: Restore node_modules folder A: <p>if the folder <code>node_modules</code> can't be created when you write <code>npm install</code>:</p>\n<ol>\n<li>rename <code>package.json</code> and <code>package-lock.json</code>or delete it.I recommend rename before to delete.</li>\n<li>create the empty folder <code>node_modules</code></li>\n<li>create the <code>package.json</code> writting <code>npm init</code> or <code>npm init -y</code></li>\n<li>try again <code>npm install</code> if not found try installa with a npm package example <code>npm i fs</code></li>\n</ol>\n", "tags": ["node.js", "angular", "visual-studio", "node-modules"]}
{"id": "cfd24bf7-e304-44af-a994-fe707e387dad", "text": "Q: How to make a modal window in HTML5 and CSS3 popup automatically A: <p>Try this it worked for me</p>\n\n<pre><code>&lt;script\u00a0type=\"text/javascript\"&gt;    \n\u00a0\u00a0\u00a0 $(function\u00a0() {    \n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 $(\"#dialog\").dialog({    \n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 modal:\u00a0true,    \n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 autoOpen:\u00a0false,\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 title:\u00a0\"jQuery Dialog\",    \n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 width: 300,    \n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 height: 150    \n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 });    \n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 $(\"#btnShow\").click(function\u00a0() {    \n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 $('#dialog').dialog('open');    \n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 });    \n\u00a0\u00a0\u00a0 });    \n&lt;/script&gt;\n</code></pre>\n\n<p>Reference: <a href=\"https://www.aspsnippets.com/Articles/Open-Show-jQuery-UI-Dialog-Modal-Popup-on-Button-Click.aspx\" rel=\"nofollow noreferrer\">Open-Show-jQuery-UI-Dialog-Modal-Popup-on-Button-Click</a></p>\n", "tags": ["html", "css", "modal-dialog"]}
