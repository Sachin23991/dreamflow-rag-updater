{"id": "ba879b03-1fb6-47db-a5de-7bd63acda98e", "text": "Q: Moon / Lunar Phase Algorithm A: <p>I ported some code to Python for this a while back.  I was going to just link to it, but it turns out that it fell off the web in the meantime, so I had to go dust it off and upload it again.  See <a href=\"https://github.com/samwyse/PyMoon/blob/master/moon.py\" rel=\"nofollow noreferrer\">moon.py</a> which is derived from <a href=\"http://www.fourmilab.ch/moontool/\" rel=\"nofollow noreferrer\">John Walker's moontool</a>.</p>\n<p>I can't find a reference for this for what time spans it's accurate for either, but seems like the authors were pretty rigorous.  Which means yes, it does use trig, but I can't imagine what the heck you would be using this for that would make it computationally prohibitive.  Python function call overhead is probably more than the cost of the trig operations.  Computers are pretty fast at computing.</p>\n<p>The algorithms used in the code are drawn from the following sources:</p>\n<p><strong>Meeus, Jean. Astronomical Algorithms. Richmond: Willmann-Bell, 1991. ISBN 0-943396-35-2.</strong></p>\n<p>A must-have; if you only buy one book, make sure it's this one. Algorithms are presented mathematically, not as computer programs, but source code implementing many of the algorithms in the book can be ordered separately from the publisher in either QuickBasic, Turbo Pascal, or C. Meeus provides many worked examples of calculations which are essential to debugging your code, and frequently presents several algorithms with different tradeoffs among accuracy, speed, complexity, and long-term (century and millennia) validity.</p>\n<p><strong>Duffett-Smith, Peter. Practical Astronomy With Your Calculator. 3rd ed. Cambridge: Cambridge University Press, 1981. ISBN 0-521-28411-2.</strong></p>\n<p>Despite the word Calculator in the title; this is a valuable reference if you're interested in developing software which calculates planetary positions, orbits, eclipses, and the like. More background information is given than in Meeus, which helps those not already versed in astronomy learn the often-confusing terminology. The algorithms given are simpler and less accurate than those provided by Meeus, but are suitable for most practical work.</p>\n", "tags": ["python", "c", "algorithm", "calendar", "astronomy"]}
{"id": "b746bb92-88e7-4f28-8966-4bfb7404f94e", "text": "Q: Error using _Generic selection to distinguish between char* and struct pointer* A: <p>For illustration of the compilation issue, consider this macro with a conditional operator instead of yours with a <code>_Generic</code>.</p>\n<pre><code>#define Macro(P)    (1 ? (P) : (P)-&gt;name)\n</code></pre>\n<p>Obviously this will always select <code>(P)</code> and never evaluate <code>(P)-&gt;name</code>. However, <code>(P)-&gt;name</code> is still examined by the compiler and must be valid code. It generates the same error as your <code>_Generic</code> macro. In this regard, <code>_Generic</code> is the same as <code>? :</code>: All of its subexpressions must be valid code, even if the ones that are not selected.</p>\n<p>To deal with this, if you continue to use <code>_Generic</code> (rather than other solutions, such as using a function instead), you must write the <code>_Generic</code> so that all subexpressions are valid. As long as the macro argument is some kind of pointer, or anything that can be converted to a pointer, you could use this:</p>\n<pre><code>#define Macro(P)    _Generic((P), \\\n    char *:  (P),                 \\\n    db *:    ((db *) (P))-&gt;name,  \\\n    default: &quot;Invalid&quot;)\n</code></pre>\n<p>In the cases where <code>P</code> is not a <code>db *</code>, this \u201clies\u201d to the compiler and says to treat it as a <code>db *</code>, via a cast, in one of the <code>_Generic</code> cases. If that code were ever evaluated when <code>P</code> is not a <code>db *</code>, it would do something bad. However, it is never evaluated in such a case. All of the cases are grammatically valid when compiled, and each case is semantically valid when it is the one that is actually executed. So this code will work.</p>\n<p>Still, it is messy, and such code should document the reason a cast was needed. It may be preferable to find other solutions. Additionally, some desired uses of <code>_Generic</code> may involve greater complications for this, and it may not be feasible to construct satisfactory code, so this method is not a solution for all <code>_Generic</code> woes.</p>\n", "tags": ["c", "pointers", "struct", "macros"]}
{"id": "13cb72d3-2c13-477a-a1dd-2b54d2074b05", "text": "Q: How do I consolidate an object of arrays of timestamped values into single array of objects? A: <p>This may not be the most efficient approach (depending upon your &quot;real&quot; data) but it is sort of a from-first-principles method, at least to illustrate steps to consider.</p>\n<p>It does not alter the timestamp date format in your data. All it does is:</p>\n<ol>\n<li>Combine the separate log_n arrays into a single array.</li>\n<li>Sort the new array by the timestamp.</li>\n<li>Iterate once through the sorted array, summing the <code>y</code> value for each <code>x</code> and writing the sums at each change in the <code>x</code> value; and writes after the loop since the last timestamp doesn't encounter a change before the loop completes.</li>\n</ol>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\" data-babel-preset-react=\"false\" data-babel-preset-ts=\"false\">\n<div class=\"snippet-code\">\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let l = {log_1: [{x:'11/25/2025 7:00 AM', y: '3'},{x:'11/25/2025 7:15 AM', y: '43'},{x:'11/25/2025 7:30 AM', y: '49'}],\n log_2: [{x:'11/25/2025 7:00 AM', y: '13'},{x:'11/25/2025 7:15 AM', y: '83'},{x:'11/25/2025 7:45 AM', y: '19'}],\n log_3: [{x:'11/25/2025 7:30 AM', y: '32'},{x:'11/25/2025 8:00 AM', y: '47'}]}\n;\nlet logs = [...l.log_1,...l.log_2,...l.log_3];\nlogs.sort( (a,b) =&gt; {\n   if ( a.x &lt; b.x ) return -1\n   else if (a.x &gt; b.x) return 1;\n});\n\nlet \n  ts = logs[0].x,\n  cnt = 0,\n  data = []\n;\n\nlogs.forEach( v =&gt; {\n  if ( v.x === ts ) {\n     cnt += parseInt(v.y);\n  } else {\n    data.push({timestamp: ts, value: cnt.toString()});\n    ts = v.x;\n    cnt = parseInt(v.y);\n  }\n});\ndata.push( {timestamp: ts, value: cnt.toString()});\nconsole.log(data);</code></pre>\n</div>\n</div>\n</p>\n", "tags": ["javascript", "dictionary", "reduce"]}
{"id": "4820a831-6068-476f-92a1-b28c3ca0f826", "text": "Q: &quot;await cookies()&quot; in server component called from client causes hanging A: <p>If <code>useEffect()</code> is mandatory in your client-component, then you should use <code>startTransition()</code> as well:</p>\n<pre class=\"lang-js prettyprint-override\"><code>// module.tsx\n&quot;use client&quot;;\n\nimport { useTransition, useEffect } from &quot;react&quot;;\nimport { getRole } from &quot;./actions&quot;;\n\nexport default function RoleModule() \n{\n    const [isPending, startTransition] = useTransition();\n\n    useEffect(() =&gt; {\n        startTransition(async () =&gt; {\n            const result = await getRole();\n            setRole(result!);\n        });\n    }, []);\n}\n</code></pre>\n<p>Otherwise, you can do it even simpler, just pass cookie value from server-component to your client-component as a prop:</p>\n<pre class=\"lang-js prettyprint-override\"><code>// page.tsx\nimport { cookies } from &quot;next/headers&quot;;\nimport RoleModule from &quot;./module&quot;;\n\nexport default async function Page() \n{\n    const cookieStore = await cookies();\n    const role = cookieStore.get(&quot;role&quot;)?.value;\n\n    return &lt;RoleModule initialRole={role} /&gt;;\n}\n</code></pre>\n", "tags": ["next.js", "nextjs-15"]}
{"id": "8b785681-1aae-4ff5-bac5-2fafb5846666", "text": "Q: Sample Java Program to call Teradata Stored Procedure A: <p>Execute</p>\n<pre><code>HELP PROCEDURE procedure_name;\n</code></pre>\n<p>to see the <code>ExecutionMode</code> of the stored procedure. You'll likely wanna use <code>tmode=TERA</code>.</p>\n<p>Also, you're never executing the stored procedure in your code</p>\n", "tags": ["java", "teradata", "java-stored-procedures"]}
{"id": "79b55359-9d3e-4d9a-bb1b-073fe2225fa3", "text": "Q: WHERE DATE_COLUMN = &#39;9999-12-31&#39; statements causes query to return no results A: <p>Please try some thing like this as seen the data </p>\n\n<pre><code>SELECT DATEDIFF(day, '9990-12-31', TERM_DT) AS \"DIFF\"\n,TERM_DT AS \"DT\"\nFROM ...\nJOIN ...\nWHERE DATEDIFF(day, '2100-01-01', TERM_DT) &lt;&gt; 0\nGROUP BY ...\n</code></pre>\n\n<p>Hopefully this helps.</p>\n", "tags": ["sql", "sql-server", "date", "db2", "where-clause"]}
{"id": "7811980b-5917-4e5c-b970-d8a3acda2805", "text": "Q: How to write multiple SQL statements like CREATE table in AWS Athena ( using CLI command - aws athena start-query-execution --query-string {value} )? A: <p>I think you can't run several queries in one CLI command, i just tried and got this error:</p>\n\n<pre><code>    An error occurred (InvalidRequestException) when calling the StartQueryExecution operation: \n    Only one sql statement is allowed.\n</code></pre>\n\n<p>Run one by one.</p>\n", "tags": ["sql", "amazon-web-services", "amazon-athena", "execution", "statements"]}
{"id": "7471121f-8927-437c-82c5-046df3569372", "text": "Q: Maven svn: E215004: Authentication failed and interactive prompting is disabled; see the --force-interactive option A: <p>Subversion really changes from 1.6.x to 1.8.x. This problem may be due to that (especially using Windows + Active Directory).</p>\n\n<p>If invoking maven from eclipse it then tries to access the SVN not using Subclipse. Assume that you even use an external Maven installation. This external installation does not know your Eclipse / Subclipse and thus calls SVN available on your platform (depending on Windows path variable). This SVN for does not know of your Eclipse and hence has to get the credentials from somewhere else (for example %USER%\\AppData\\Roaming\\Subversion\\auth). Unfortunately at this point something seems to have been broken with the maven-release-plugin since SVN protocol version 1.6.</p>\n\n<p>Currently no best solution is known and it is unclear what exactly causes the maven-release-plugin to fail. The best work around maybe to provide the credentials in the Eclipse Run configuration (JRE tab, then argument Dusername=... -Dpassword=...).</p>\n\n<p>I would recommend not to store the credentials somewhere where they might be accidentally exploited to others.</p>\n", "tags": ["java", "eclipse", "maven", "svn", "tortoisesvn"]}
{"id": "01964f07-296c-42ff-9972-c7db54627069", "text": "Q: Translate SoapUi Project to Equivalent DotNet WCF Client Code/Configuration A: <p>First you need to create a service proxy using the right-click \"Add Service Reference\" in Visual Studio or by running the SVCUTIL.EXE tool from a VS command-line. This will provide you with both a basic configuration file as well as a client implementation. All you need to do this is the actual metadata files (WSDL+XSD) or a URL to a hosted version of it.</p>\n\n<p>It is not clear weather the SoapUI project you have makes client requests to the actual service or if it uses the built-in MockService feature where SoapUI hosts a 'fake' service instance. Either way the MockService feature can be your best friend doing WCF development.</p>\n\n<p>If you are using the SoapUI MockService feature and do not have the original WSDL or access to it you can then use the metadata exposed by the MockService. One way of finding the link to the WSDL is by clicking the link button:</p>\n\n<p><img src=\"https://i.sstatic.net/jecZR.jpg\" alt=\"enter image description here\"></p>\n\n<p>Copy the URL you get from there and generate the proxy from a Visual Studio command-prompt:</p>\n\n<pre><code>svcutil.exe http://localhost:8088/mockKramerServiceSoap?WSDL\n</code></pre>\n\n<p>SoapUI has one really great feature when trying to replicate SOAP calls in WCF. You can examine requests coming into the MockService from the .NET proxy and compare them with the calls made from SoapUI.</p>\n\n<p><img src=\"https://i.sstatic.net/I66BJ.jpg\" alt=\"enter image description here\"></p>\n\n<p>Hopefully this helped you getting started.</p>\n", "tags": ["c#", "wcf", "soapui", "x509"]}
