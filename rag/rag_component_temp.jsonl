{"id": "dc4a8f4e-504b-4fe2-896f-584ff1b760e6", "text": "Q: How to detect if there&#39;s a Windows Update available using Delphi code? A: <p>There is a COM object in Windows, named <code>Microsoft.Update.Session</code>, that you can query, with parameters for online/offline check (and more).</p>\n<p>Here is a program that checks for pending updates (using the offline method):</p>\n<pre><code>program CheckPendingUpdates;\n\n{$APPTYPE CONSOLE}\n\nuses\n  System.SysUtils,\n  Winapi.ActiveX,\n  ComObj,\n  Variants;\n\nfunction UpdatesAvailable: Boolean;\nvar\n  UpdateSession   : OleVariant;  // Microsoft.Update.Session\n  UpdateSearcher  : OleVariant;  // IUpdateSearcher\n  SearchResult    : OleVariant;  // ISearchResult\n  Criteria        : string;\nbegin\n  Result := False;\n\n  // Criteria that mirrors what the Settings UI would show\n  Criteria := 'IsInstalled=0 and IsHidden=0 and IsAssigned=1';\n\n  // Create COM session\n  UpdateSession  := CreateOleObject('Microsoft.Update.Session');\n  // (Optional) set a client ID visible in Windows Update logs\n  UpdateSession.ClientApplicationID := 'Delphi WUA Check';\n\n  // Create the searcher; set Online if you want to go to WU/WSUS immediately\n  UpdateSearcher := UpdateSession.CreateUpdateSearcher;\n  UpdateSearcher.Online := False; // False = do NOT go online, True = check online (may take long time)\n\n  // Perform synchronous search\n  SearchResult := UpdateSearcher.Search(Criteria);\n\n  // SearchResult.Updates is an IUpdateCollection\n  if not VarIsNull(SearchResult) then\n    Result := (SearchResult.Updates.Count &gt; 0);\nend;\n\nbegin\n  CoInitialize(nil);\n  try\n    try\n      if UpdatesAvailable then\n        Writeln('Updates are available.')\n      else\n        Writeln('No updates available.');\n      Readln;\n    except\n      on E: Exception do\n        Writeln('Error: ', E.ClassName, ' - ', E.Message);\n    end;\n  finally\n    CoUninitialize;\n  end;\nend.\n</code></pre>\n", "tags": ["delphi", "winapi", "vcl", "windows-update", "delphi-13-florence"]}
{"id": "772b69a8-c281-44bf-9dff-afcaaec7c101", "text": "Q: CGI in Perl: how to access the original HTTP headers A: <p>CGI scripts don't receive HTTP requests; the receive CGI requests. But that includes most, if not all HTTP headers (depending on your server).</p>\n<p>The request method is available as <code>$ENV{ REQUEST_METHOD }</code>.</p>\n<p>The request uri is available as <code>$ENV{ REQUEST_URI }</code>.</p>\n<p>Like you said, the Content-Type header is available as <code>$ENV{ CONTENT_TYPE }</code>.</p>\n<p>Other headers Xxx-Yyy are (optionally) available as <code>$ENV{ HTTP_XXX_YYY }</code>.</p>\n<p>Given the above, we can recreate the HTTP headers as follows:</p>\n<pre class=\"lang-perl prettyprint-override\"><code>sub cgi_to_http { $_[0] =~ s/^HTTP_//r =~ tr/_/-/r =~ s/\\b\\w+/\\L\\u$&amp;/gr }\n\nmy %headers =\n   map { cgi_to_http( $_ ) =&gt; $ENV{ $_ } }\n      grep { $_ eq &quot;CONTENT_TYPE&quot; || /^HTTP_/ }\n         keys( %ENV );\n</code></pre>\n<p>The <code>s/\\b\\w+/\\L\\u$&amp;/g</code> part converts the capitalization of the key to its canon form. This is optional since HTTP headers are case-insensitive. This is fortunately since it wouldn't convert the &quot;TE&quot; header name correctly.</p>\n", "tags": ["perl", "http", "header", "cgi"]}
{"id": "7039f6e8-0526-4f7b-9f25-623ab37af3e2", "text": "Q: How can I set an image name in a Dockerfile? A: <h3>Workaround using <code>docker-compose</code></h3>\n<p>Tagging of the image isn't supported inside the Dockerfile. This needs to be done in your build command. As a workaround, you can do the build with a <em>docker-compose.yml</em> file that identifies the target image name and then run a <code>docker-compose build</code>. A sample <em>docker-compose.yml</em> file would look like:</p>\n<pre class=\"lang-none prettyprint-override\"><code>version: '2'\n\nservices:\n  man:\n    build: .\n    image: dude/man:v2\n</code></pre>\n<p>That said, there's a push against doing the build with compose since that doesn't work with swarm mode deploys. So you're back to running the command as you've given in your question:</p>\n<pre class=\"lang-none prettyprint-override\"><code>docker build -t dude/man:v2 .\n</code></pre>\n<p>Personally, I tend to build with a small shell script in my folder (<em>build.sh</em>) which passes any arguments and includes the name of the image there to save typing. And for production, the build is handled by a <a href=\"https://en.wikipedia.org/wiki/Continuous_integration#Deploy_an_artefact_from_CI\" rel=\"nofollow noreferrer\">CI/CD</a> server that has the image name inside the pipeline script.</p>\n", "tags": ["docker", "tags"]}
{"id": "02a3814a-26b2-4fe6-b6b9-d32461d7e05c", "text": "Q: What are the pros and cons of a terse property/method-syntax? A: <p>Python and Ruby take explicit <code>self</code> parameters to methods, like your method 1.  Both have been fairly successful mainstream languages.</p>\n<p>C++ and Java have <code>this</code> as an effect a hidden parameter; you can explicitly refer to <code>this.property</code> or <code>this.method()</code> but unqualified references like <code>property</code> and <code>method()</code> can refer to the current object if nothing shadows it.  This is like your method 2.  Both are successful mainstream languages.</p>\n<p>Languages that aren't strictly object-oriented, like plain C or Haskell to some extent Go, take &quot;the current object&quot; as an ordinary parameter, without a reserved word or syntax for it.  Again, this approach is used by successful mainstream languages.</p>\n<p>You can make an argument that the implicit <code>this</code> in C++/Java is confusing and it should be unambiguous that the bare <code>name</code> is not part of the receiver object.  Or you can make an argument that a Python/Ruby-style explicit <code>self</code> parameter is unnecessary noise and the receiver object should be implied.</p>\n<p>I think all of your options are in use by some mainstream language; I don't think there's a broad consensus that for a new language an explicit or implicit receiver object is better.</p>\n", "tags": ["oop", "syntax", "language-design"]}
{"id": "18eac9ad-065f-4fb5-a460-57a985a812b0", "text": "Q: reactable in R markdown `asis` chunk with loop not displayed A: <p>I find that the approach associated with the loop does not work if run in isolation (i.e., without including the step that has no loop).  The headers are generated, but no tables are rendered. Does anyone have a solution that doesn't involve generating an overall table outside the loop?</p>\n", "tags": ["r", "r-markdown", "reactable"]}
{"id": "6f5298ee-64b6-4fc2-93af-bc12c324f95f", "text": "Q: Flipping line of 4-Byte pixels horizontally A: <p>No need to go unsafe. This compiles to very efficient code with only one jump, and even vectorizes nicely when instructions are available:</p>\n<pre class=\"lang-rust prettyprint-override\"><code>fn flip_line(line_bytes: &amp;mut [u8]) {\n    let (line_pixels, _) = line_bytes.as_chunks_mut::&lt;BYTES_PER_PIXEL&gt;();\n    // This is a common trick to make multiple bound checks into one.\n    let line_byte = &amp;mut line_pixels[..PIXELS_PER_SIDE * 2];\n    for i in 0..PIXELS_PER_SIDE {\n        line_pixels.swap(i, line_pixels.len() - i - 1);\n    }\n}\n</code></pre>\n", "tags": ["rust", "intrinsics"]}
{"id": "532fe340-2ef3-4c6e-843d-a9e08a790148", "text": "Q: How to convert generator type to string? A: <p><code>x</code> is not a generator, rather the <em>function</em> yielding from your for loop is a generator!</p>\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; def my_function(some_iterable=()):\n...     for x in some_iterable:\n...         yield x\n...\n&gt;&gt;&gt; type(my_function)\n&lt;class 'function'&gt;\n&gt;&gt;&gt; type(my_function())  # output(s) are not known until iterated\n&lt;class 'generator'&gt;\n</code></pre>\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; my_list = [1,2,3]\n&gt;&gt;&gt; next(my_function(my_list))  # take next value\n1\n</code></pre>\n<p>In order to make the result a string, you may simply want to call <code>str()</code> on <code>x</code> before or after it comes out of the generator!</p>\n<p>If you want the contents of the entire generator all together, you need to pop it all (rather than just the first or N values), perhaps iterating over it with the string method <code>.join()</code></p>\n<p>All together</p>\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; my_list = [1,2,3]\n&gt;&gt;&gt; &quot;,&quot;.join(str(a) for a in my_function(my_list))\n'1,2,3'\n</code></pre>\n<p>(NOTE that <code>.join()</code> is actually method of <code>&quot;,&quot;</code> here)</p>\n", "tags": ["python", "python-2.7", "for-loop", "generator", "yield"]}
