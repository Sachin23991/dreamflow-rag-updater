{"id": "e1dd225e-990a-4668-9a21-d56c9e0dc61d", "text": "Q: Reduce Git repository size A: <p>Update Feb. 2021, eleven years later: the new <a href=\"https://stackoverflow.com/a/64077241/6309\"><code>git maintenance</code> command</a> (<a href=\"https://git-scm.com/docs/git-maintenance\" rel=\"nofollow noreferrer\">man page</a>) should supersede <code>git gc</code>, and <a href=\"https://stackoverflow.com/a/66298072/6309\">can be scheduled</a>.</p>\n<hr />\n<p>Original: <a href=\"http://www.kernel.org/pub/software/scm/git/docs/git-gc.html\" rel=\"nofollow noreferrer\"><code>git gc --aggressive</code></a> is one way to force the prune process to take place (to be certain: <code>git gc --aggressive --prune=now</code>). You have <a href=\"https://stackoverflow.com/questions/685319/git-pull-error-unable-to-create-temporary-sha1-filename/685422#685422\">other commands</a> to clean the repo too. Please note, though, sometimes <code>git gc</code> alone can <a href=\"https://stackoverflow.com/questions/1904860/how-to-remove-unreferenced-blobs-from-my-git-repo\">increase the size of the repo</a>!</p>\n<p>It can also be used after a <code>filter-branch</code>, to mark some directories to be removed from the history (with a further gain of space); see <a href=\"https://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository\">here</a>. But that means nobody is pulling from your public repo. <a href=\"https://stackoverflow.com/questions/709433/how-can-i-remove-the-unwanted-objects-from-my-repo-after-filter-branch-subdirec\"><code>filter-branch</code> can keep backup refs in <code>.git/refs/original</code></a>, so that directory can be cleaned too.</p>\n<p>Finally, as mentioned <a href=\"https://stackoverflow.com/questions/2116778/reduce-git-repository-size/2116892#comment43412037_2116892\">in this comment</a> and <a href=\"https://stackoverflow.com/q/27489761/6309\">this question</a>, cleaning the reflog can help:</p>\n<pre><code>git reflog expire --all --expire=now\ngit gc --prune=now --aggressive\n</code></pre>\n<p>An even more complete, and possibly dangerous, solution is <a href=\"https://stackoverflow.com/a/14729486/6309\">to remove unused objects from a Git repository</a></p>\n<hr />\n<p>Note that <a href=\"https://github.com/newren/git-filter-repo\" rel=\"nofollow noreferrer\"><code>git filter-repo</code></a> now (Git 2.24+, Q4 2019) replaces the <a href=\"https://stackoverflow.com/a/58251653/6309\">obsolete <code>git filter-branch</code> or BFG</a>: it is a Python-based tool (to <a href=\"https://github.com/newren/git-filter-repo/blob/main/INSTALL.md\" rel=\"nofollow noreferrer\">be installed</a> first).</p>\n<p><a href=\"https://stackoverflow.com/users/6937857/joe\">Joe</a> <a href=\"https://stackoverflow.com/a/74592110/6309\">suggests</a>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code># Find the largest files in .git:\ngit rev-list --objects --all | grep -f &lt;(git verify-pack -v  .git/objects/pack/*.idx| sort -k 3 -n | cut -f 1 -d &quot; &quot; | tail -10)\n\n# Strat filtering these large files:\ngit filter-repo --path-glob '../../src/../..' --invert-paths --force\n#or\ngit filter-repo --path-glob '*.zip' --invert-paths --force\n#or\ngit filter-repo --path-glob '*.a' --invert-paths --force\n\ngit remote add origin git@github.com:.../...git\ngit push --all --force\ngit push --tags --force\n</code></pre>\n", "tags": ["git", "git-gc", "git-clean", "git-maintenance"]}
{"id": "f62f5342-83b1-44f8-ab00-109c630b5306", "text": "Q: How do you replace multiple elements of an array in C with elements of a different array A: <p>It is often best to use a loop for this sort of thing because that is usually more clear and less error-prone.</p>\n<p>But if you have reasons for avoiding a loop you can use either <code>memcpy</code> or <code>memmove</code>. <code>memcpy</code> copies a number of bytes pointed to by its second argument to the storage pointed to by its first argument. Often compilers will optimize looping code that fills an array into a call to <code>memcpy</code>, so it is unlikely that using a loop to fill <code>foo</code> as in the OP code would have a performance penalty.</p>\n<p>Note that you shouldn't use <code>memcpy</code> of you are copying to overlapping storage, i.e., copying bytes from an array to itself: attempting to do so leads to undefined behavior. In such cases you can use <code>memmove</code> which can safely copy bytes to overlapping storage.</p>\n<p>Here is a program with examples of using <code>memcpy</code>, <code>memmove</code>, and looping to copy selected elements of arrays:</p>\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt; // for `memcpy` and `memmove`\n\nvoid print_array(int *arr, size_t arr_len) {\n  for (size_t i = 0; i &lt; arr_len; i++) {\n    printf(&quot;%d &quot;, arr[i]);\n  }\n  putchar('\\n');\n}\n\nint main(void) {\n  int foo[5];\n  size_t foo_len = sizeof foo / sizeof foo[0];\n\n  int bar[10] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10} ;\n  size_t bar_len = sizeof bar / sizeof bar[0];\n\n  /* Using `memcpy` to copy from `bar` to `foo`. */\n  size_t foo_offset = 0;\n  size_t bar_offset = 0;\n  size_t n_elems = foo_len;\n  memcpy(foo, bar, sizeof bar[0] * n_elems);\n  print_array(foo, foo_len);\n  puts(&quot;Elements copied from bar[] to foo[]\\n&quot;);\n\n  foo_offset = 1;\n  bar_offset = 6;\n  n_elems = 3;\n  memcpy(&amp;foo[foo_offset], &amp;bar[bar_offset], sizeof bar[0] * n_elems);\n  print_array(foo, foo_len);\n  puts(&quot;Elements copied from bar[] to foo[]\\n&quot;);\n\n  /* Using `memmove` to copy from `bar` to itself. */\n  size_t bar_from = 5;\n  size_t bar_to = 2;\n  n_elems = 4;\n  memmove(&amp;bar[bar_to], &amp;bar[bar_from], sizeof bar[0] * n_elems);\n  print_array(bar, bar_len);\n  puts(&quot;Elements copied from bar[] to bar[]\\n&quot;);\n\n  /* Using a loop to copy elements from `bar` to `foo`. */\n  foo_offset = 0;\n  bar_offset = 1;\n  n_elems = 3;\n  for (size_t i = 0; i &lt; n_elems; i++) {\n    foo[i + foo_offset] = bar[i + bar_offset];\n  }\n  print_array(foo, foo_len);\n  puts(&quot;Elements copied from bar[] to foo[]&quot;);\n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>$ gcc -std=c17 -Wall -Wextra -Wpedantic copy_array.c\n\n$ ./a.exe\n1 2 3 4 5\nElements copied from bar[] to foo[]\n\n1 7 8 9 5\nElements copied from bar[] to foo[]\n\n1 2 6 7 8 9 7 8 9 10\nElements copied from bar[] to bar[]\n\n2 6 7 9 5\nElements copied from bar[] to foo[]\n</code></pre>\n", "tags": ["arrays", "c", "pointers"]}
{"id": "b23fef61-4743-478b-a7f1-925d748159c6", "text": "Q: Blazor - running method in program.cs throws an error &quot;An unhandled error occurred&quot; A: <p>As stated by @Henk Holterman problem was in wrong type of Blazor project, as I was running some SQL queries in my object. After changing Blazor project type problem is solved.</p>\n", "tags": ["c#", "blazor"]}
{"id": "096aa483-38cb-45ac-be13-1fea081ed613", "text": "Q: &quot;if let&quot; assignment with specified data-type (let Some, let Ok...) A: <p>As mentioned in the previous question, one way to specify type is by applying the turbofish operator to <code>Some</code>:</p>\n<pre><code>if let Some::&lt;DataType&lt;ComplexWorld&lt;f32&gt;&gt;&gt;(x) = ...\n</code></pre>\n<p>which is shorthand for</p>\n<pre><code>if let Option::&lt;DataType&lt;ComplexWorld&lt;f32&gt;&gt;&gt;::Some(x) = ...\n</code></pre>\n<p>To add to that answer, another possibility is to ascribe the type on the next line:</p>\n<pre><code>if let Some(x) = weird_function() {\n   let x: DataType&lt;ComplexWorld&lt;f32&gt;&gt; = x;\n   ...\n}\n</code></pre>\n<p>This last formulation comes in useful when specifying the type of the variable in <code>for</code> loops.</p>\n", "tags": ["rust"]}
