{"id": "0a6fbcb9-32ac-4608-b18c-7173f3200399", "text": "Q: How to split a slice at a given index, then move the remaining elements into a boxed slice without copying or cloning? A: <p>The only way is to allocate a new <code>Box</code>, as <code>Box&lt;[T]&gt;</code> cannot be resized:</p>\n<pre class=\"lang-rust prettyprint-override\"><code>fn split_and_move&lt;T&gt;(source: Box&lt;[T]&gt;, idx: usize) -&gt; Result&lt;Box&lt;[T]&gt;, Box&lt;[T]&gt;&gt; {\n    if idx &gt;= source.len() {\n        return Err(source);\n    }\n\n    let mut iter = source.into_iter();\n    iter.nth(idx);\n    Ok(Box::from_iter(iter))\n}\n</code></pre>\n<p>Note: it is possible to also do it by converting the <code>Box&lt;[T]&gt;</code> to <code>Vec&lt;T&gt;</code> and back to <code>Box&lt;[T]&gt;</code>:</p>\n<pre class=\"lang-rust prettyprint-override\"><code>fn split_and_move&lt;T&gt;(source: Box&lt;[T]&gt;, idx: usize) -&gt; Result&lt;Box&lt;[T]&gt;, Box&lt;[T]&gt;&gt; {\n    if idx &gt;= source.len() {\n        return Err(source);\n    }\n\n    let mut source = Vec::from(source);\n    source.drain(..=idx);\n    Ok(source.into_boxed_slice())\n}\n</code></pre>\n<p>But that will also have to reallocate, and has the further disadvantage that the elements will be copied twice.</p>\n", "tags": ["rust", "split", "slice", "move"]}
{"id": "a0a16c1a-fae8-4b9f-aadb-4294ba419686", "text": "Q: How to convert future::join_all() to using FuturesUnordered? A: <p>The other commenters are right that <code>join_all</code> is almost certainly not the real problem in a case like this. However, for completeness, it's worth knowing that <code>join_all</code> will use <code>FuturesOrdered</code> internally if the number of futures is large enough. <a href=\"https://docs.rs/futures/latest/futures/future/fn.join_all.html#see-also\" rel=\"nofollow noreferrer\">This behavior is documented.</a></p>\n", "tags": ["rust", "rust-tokio"]}
{"id": "7485426f-5af0-4a4f-af01-99aebbef35d3", "text": "Q: Can we get only users with Gravatar profile image by db query? A: <p>So go to your functions.php and put there this function</p>\n<pre><code>function minhafuncao(){\n    $ligardb = new mysqli(&quot;localhost&quot;, &quot;you_db_user_name&quot;, &quot;your_db_password&quot;, &quot;your_db_name&quot;);\n    $obteremails = $ligardb-&gt;query(&quot;SELECT user_email FROM wp_users&quot;);\n    while($email = $obteremails-&gt;fetch_assoc()){\n        $emails[] = $email['user_email'];\n    }\n    for($ind = 0; $ind &lt; count($emails);$ind++){\n    $resultado = get_avatar($emails[$ind]);\necho $resultado;    \n}\n    \n}\n</code></pre>\n<p>and then go to your template and run the function...</p>\n<p>Thats all if you need more help please let me know.</p>\n", "tags": ["wordpress"]}
{"id": "213965e9-881e-43b4-9d18-d453b609fbbb", "text": "Q: Cannot convert json object received from server to required type so can dissect the data A: <p>It's because you need to initialize the <code>employees</code> variable to an empty array, since it always runs on first load, only after the button is clicked, you are getting the array set.</p>\n<pre><code>employees: any = [];\n</code></pre>\n<p>Here is a mock Stackblitz which works fine. Few points to note are:</p>\n<p>If the service is provided in root, then you need to inject the dependencies, like so:</p>\n<pre><code>private http = Inject(HttpClient);\n</code></pre>\n<p>Service</p>\n<pre><code>import { HttpClient } from '@angular/common/http';\nimport { Inject, Injectable } from '@angular/core';\nimport { of } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TestService {\n  private http = Inject(HttpClient);\n  constructor() {}\n\n  getAllEmployees() {\n    console.log('Inside get ALL Employees Method.');\n    return of([\n      {\n        firstName: 'test',\n        lastName: 'test',\n        address: 'test',\n        project: 'test',\n        ssn: 'test',\n        joinDate: 'test',\n        status: 'test',\n      },\n      {\n        firstName: 'test',\n        lastName: 'test',\n        address: 'test',\n        project: 'test',\n        ssn: 'test',\n        joinDate: 'test',\n        status: 'test',\n      },\n      {\n        firstName: 'test',\n        lastName: 'test',\n        address: 'test',\n        project: 'test',\n        ssn: 'test',\n        joinDate: 'test',\n        status: 'test',\n      },\n      {\n        firstName: 'test',\n        lastName: 'test',\n        address: 'test',\n        project: 'test',\n        ssn: 'test',\n        joinDate: 'test',\n        status: 'test',\n      },\n    ]); //this.http.get(&quot;https://localhost:9090/employee/getAllEmployees&quot;,{responseType:'text' as 'json'});\n  }\n}\n</code></pre>\n<p>main.ts</p>\n<pre><code>import { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { Component } from '@angular/core';\nimport { bootstrapApplication } from '@angular/platform-browser';\nimport 'zone.js';\nimport { AddEmployee } from './add-employee';\nimport { TestService } from './test.service';\n\n@Component({\n  selector: 'app-root',\n  standalone: true,\n  imports: [HttpClientModule, CommonModule],\n  template: `\n    &lt;p&gt;Inside Employee Component.&lt;/p&gt;\n&lt;button type=&quot;submit&quot; class=&quot;btn btn-login float-center&quot; (click)=&quot;getAllEmployees1()&quot;&gt;getAllEmployees&lt;/button&gt;\n\n&lt;div&gt;\n    &lt;h2&gt;Employee List&lt;/h2&gt;\n     {{ employees  | json}}\n     \n     &lt;table border=&quot;1&quot;&gt;\n\n  &lt;thead&gt;\n    &lt;th *ngFor=&quot;let column of columns&quot;&gt;\n      {{column}}\n    &lt;/th&gt;\n  &lt;/thead&gt;\n\n  &lt;tbody&gt;\n    &lt;tr *ngFor=&quot;let row of employees; index as i&quot;&gt;\n      &lt;td *ngFor=&quot;let column of columns; index as j&quot;&gt;\n        {{row[column]}}\n      &lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n\n&lt;/table&gt;\n  &lt;/div&gt;\n  `,\n})\nexport class App {\n  columns = [\n    'firstName',\n    'lastName',\n    'address',\n    'project',\n    'ssn',\n    'joinDate',\n    'status',\n  ];\n  employees: Array&lt;AddEmployee&gt; = [];\n\n  constructor(private testService: TestService) {}\n  ngOnInit() {}\n\n  public getAllEmployees1() {\n    this.testService.getAllEmployees().subscribe({\n      next: (data) =&gt; {\n        this.employees = data;\n        console.log('Response: ' + this.employees);\n      },\n      error: (error) =&gt; {\n        console.error('Error fetching employees: ', error);\n      },\n    });\n  }\n}\n\nbootstrapApplication(App);\n</code></pre>\n<p><a href=\"https://stackblitz.com/edit/stackblitz-starters-xtxchz\" rel=\"nofollow noreferrer\">stackblitz</a></p>\n", "tags": ["angular", "typescript", "data-binding", "angular16"]}
{"id": "45192949-7112-486a-a04c-ab30a5a3dc30", "text": "Q: Debugging Flask in Cursor Git Worktree Environment with Poetry Not Working A: <p>Root Cause</p>\n<p>The issue is a <strong>race condition</strong> between the Python debugger terminal instantiation and virtual environment activation. When VS Code/Cursor launches the debugger:</p>\n<ol>\n<li><p>A new Python debug terminal is created</p>\n</li>\n<li><p>The Flask server launch command is executed immediately</p>\n</li>\n<li><p>However, the terminal hasn't finished activating the virtual environment (.venv/bin/activate) yet</p>\n</li>\n<li><p>The Python interpreter runs from the system Python (or wrong environment), causing the immediate failure</p>\n</li>\n</ol>\n<p>This particularly manifests with git worktrees because each worktree typically has its own .venv, and the IDE needs to properly associate the correct interpreter with each workspace.</p>\n<h2>Solution</h2>\n<h3>Quick Fix (Immediate Workaround)</h3>\n<p>When the debug terminal opens and closes immediately:</p>\n<ol>\n<li><p>Wait for the terminal to fully initialize and activate the .venv (you'll see the environment name in the prompt)</p>\n</li>\n<li><p>Manually rerun the debugger or press F5 again</p>\n</li>\n<li><p>The debugger should now connect successfully</p>\n</li>\n</ol>\n", "tags": ["python", "flask", "python-poetry", "git-worktree", "cursor-ide"]}
{"id": "2f59422a-32e3-41bb-93cf-5b93294f6e70", "text": "Q: How to implement OAuth with Figma in fastMCP? A: <p>Short answer</p>\n<p>Use fastMCP\u2019s built\u2011in OAuth flow. Your HTTP MCP server must declare an OAuth provider (figma) and verify tokens; Cursor will handle the browser login, store/refresh the token, and send it with every MCP request. Do not pass tokens via args or put client secrets on the server.</p>\n<h3>How to wire it</h3>\n<ol>\n<li>Server: declare OAuth and require it for requests</li>\n</ol>\n<pre><code>// Node/TS skeleton\nimport { createHttpServer, oauth } from &quot;fastmcp/http&quot;;\n\nconst server = createHttpServer({\n  auth: oauth.configure({\n    // just declare the provider; no client_id/secret on the server\n    providers: [oauth.providers.figma({ id: &quot;figma&quot;, scopes: [&quot;file_read&quot;] })],\n  }),\n});\n\n// Any tool that talks to Figma\nserver.tool(&quot;getFile&quot;, async (ctx, { fileKey }) =&gt; {\n  const token = await ctx.auth.require(&quot;figma&quot;); // throws if not authenticated\n  const res = await fetch(`https://api.figma.com/v1/files/${fileKey}`, {\n    headers: { Authorization: `Bearer ${token.accessToken}` },\n  });\n  return await res.json();\n});\n\nserver.listen(9000);\n</code></pre>\n<p>Python (shape only):</p>\n<pre><code>from fastmcp.http import HttpServer\nfrom fastmcp.oauth import configure, figma\n\nserver = HttpServer(\n    auth=configure(providers=[figma(id=&quot;figma&quot;, scopes=[&quot;file_read&quot;])])\n)\n\n@server.tool()\ndef get_file(ctx, file_key: str):\n    token = ctx.auth.require(&quot;figma&quot;)\n    # call Figma with token.access_token\n</code></pre>\n<ol start=\"2\">\n<li>Token verification on the server</li>\n</ol>\n<ul>\n<li><p>Keep it \u201cstateless\u201d: enable the oauth verification middleware/helper from fastMCP (it calls Figma\u2019s GET /v1/me or similar to validate the bearer and handles expiry).</p>\n</li>\n<li><p>You never store client secrets; you only accept/verify a bearer sent by the client.</p>\n</li>\n</ul>\n<ol start=\"3\">\n<li>Cursor config for your users</li>\n</ol>\n<pre><code>&quot;figma-to-code-http&quot;: {\n  &quot;url&quot;: &quot;http://10.91.214.50:9000/mcp&quot;\n}\n</code></pre>\n<ul>\n<li><p>When enabled, Cursor reads the server\u2019s auth/providers, opens the Figma OAuth screen, and on success injects the access token into MCP requests.</p>\n</li>\n<li><p>Cursor also refreshes the token; your server just calls ctx.auth.require(&quot;figma&quot;) each time.</p>\n</li>\n</ul>\n<h3>TIP</h3>\n<ul>\n<li><p>This is the only way to make Cursor \u201cprompt to authenticate\u201d: the server must advertise an OAuth provider in its MCP handshake; Cursor drives the browser flow.</p>\n</li>\n<li><p>Avoid passing tokens in args or env; that\u2019s for local/dev only.</p>\n</li>\n<li><p>Ensure your MCP endpoint is HTTPS in production.</p>\n</li>\n</ul>\n", "tags": ["figma", "model-context-protocol", "cursor-ide"]}
{"id": "da9b90a5-5e46-453e-94e2-d7415a8a24c8", "text": "Q: Sequelize.js: Include unexpected. Element has to be either a Model, an Association or an object A: <p>You are correct when you say:</p>\n<blockquote>\n<p>I suspect it has to do with the fact that AccountCategory is placed after Account in my models folder when the models are being set up and thus not processed (associated).</p>\n</blockquote>\n<p><strong>TLDR:</strong> Add a new function to your model class definition similar to the <code>associate</code> function, and use the <a href=\"https://sequelize.org/api/v6/class/src/model.js%7Emodel#static-method-addScope\" rel=\"nofollow noreferrer\">addScope</a> function to define any scopes that reference other models that may have not been initialized due to file tree order. Finally, call that new function the same way you call <code>db[modelName].associate</code> in your <code>models.index.js</code> file.</p>\n<p>I had a similar problem and solved it by defining any scopes that reference any models, e.g. in an <code>include</code>, after all the models are initialized after running the following in your <code>models/index.js</code> file.</p>\n<p>Here is an example:</p>\n<p><strong>models/agent.js</strong></p>\n<pre><code>'use strict';\nconst { Model } = require('sequelize');\nconst camelCase = require('lodash/camelCase');\nconst { permissionNames } = require('../../api/constants/permissions');\n\nmodule.exports = (sequelize, DataTypes) =&gt; {\n  /**\n   * @summary Agent model\n   */\n  class Agent extends Model {}\n\n  Agent.init(\n    {\n      id: {\n        type: DataTypes.INTEGER,\n        allowNull: false,\n        autoIncrement: true,\n        primaryKey: true,\n      },\n      firstName: {\n        type: DataTypes.STRING,\n        allowNull: false,\n      },\n      lastName: {\n        type: DataTypes.STRING,\n        allowNull: false,\n      },\n    },\n    {\n      sequelize,\n      scopes: {\n        // Works because the agent-role.js file / model comes before agent.js in the file tree\n        [camelCase(permissionNames.readAgentRoles)]: {\n          include: [\n            {\n              model: sequelize.models.AgentRole,\n            },\n          ],\n        },\n        // Doesn't work due to import order in models/index.js, i.e., agent.js is before role.js in the file tree\n        // [camelCase(permissionNames.readRoles)]: {\n        //   include: [\n        //     {\n        //       model: sequelize.models.Role,\n        //     },\n        //   ],\n        // },\n      },\n    }\n  );\n\n  Agent.associate = function (models) {\n    Agent.belongsToMany(models.Role, {\n      through: 'AgentRole',\n      onDelete: 'CASCADE', // default for belongsToMany\n      onUpdate: 'CASCADE', // default for belongsToMany\n      foreignKey: {\n        name: 'agentId',\n        type: DataTypes.INTEGER,\n        allowNull: false,\n      },\n    });\n    Agent.hasMany(models.AgentRole, {\n      onDelete: 'CASCADE',\n      onUpdate: 'CASCADE',\n      foreignKey: {\n        name: 'agentId',\n        type: DataTypes.INTEGER,\n        allowNull: false,\n      },\n    });\n  };\n\n  // Add a custom `addScopes` function to call after initializing all models in `index.js`\n  Agent.addScopes = function (models) {\n    Agent.addScope(camelCase(permissionNames.readRoles), {\n      include: [\n        {\n          model: models.Role,\n        },\n      ],\n    });\n  };\n\n  return Agent;\n};\n</code></pre>\n<p><strong>models/index.js</strong></p>\n<pre><code>'use strict';\n\nconst fs = require('fs');\nconst path = require('path');\nconst Sequelize = require('sequelize');\nconst basename = path.basename(__filename);\nconst config = require('../database-config.js');\nconst db = {};\n\nconst sequelize = new Sequelize(config.database, config.username, config.password, config);\n\n/**\n * Import and attach all of the model definitions within this 'models' directory to the sequelize instance.\n */\nfs.readdirSync(__dirname)\n  .filter((file) =&gt; {\n    return file.indexOf('.') !== 0 &amp;&amp; file !== basename &amp;&amp; file.slice(-3) === '.js';\n  })\n  .forEach((file) =&gt; {\n    // Here is where file tree order matters... the sequelize const may not have the required model added to it yet\n    const model = require(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);\n    db[model.name] = model;\n  });\n\nObject.keys(db).forEach((modelName) =&gt; {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n  // We need to add scopes that reference other tables once they have all been initialized\n  if (db[modelName].addScopes) {\n    db[modelName].addScopes(db);\n  }\n});\n\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\n\nmodule.exports = db;\n</code></pre>\n<p>Goodluck!</p>\n", "tags": ["mysql", "node.js", "sequelize.js", "associations"]}
{"id": "6af9215d-ad01-4c5c-a065-d454bcf48679", "text": "Q: get first row given by a column value in pandas A: <p>Some answer from 2021, I was having the same problem and figured out myself:</p>\n<pre><code>(df == 2) ## will give you a panda DF of T/F dataframe\n(df == 2).iloc[:, 0] ## will select the first row of this T/F dataframe\n((df == 2).iloc[:, 0]).idxmax() ## will return index of first occurrence of maximum over requested axis\n</code></pre>\n<p>In my case, it was working as this. You may change the <code>idxmax()</code> into (example can be <code>index[0]</code>) the function you need to extract your index from pandas.</p>\n", "tags": ["python", "pandas", "dataframe"]}
