{"id": "8945fb14-e273-46b7-8ea4-8b2f3023078d", "text": "Q: Xcode XCTestCase - wait for setup to complete before starting tests A: <p>You could keep the <code>Task</code> created in the <em>class</em> <code>setUp</code> method in a property, and wait for it in the <em>instance</em> <code>setUp</code> method.</p>\n<pre><code>import Synchronization\n\nclass TestCase: XCTestCase {\n    static let task = Mutex&lt;Task&lt;Void, Never&gt;?&gt;(nil)\n    \n    override class func setUp() {\n        task.withLock {\n            $0 = Task {\n                await dataLibrary.load()\n            }\n        }\n    }\n    \n    override func setUp() async throws {\n        let task = TestCase.task.withLock { $0 }\n        await task?.value\n    }\n    \n    func testXXX() {\n        // ...\n    }\n}\n</code></pre>\n<p>Here I have used a <code>Mutex</code> to keep Xcode happy about the global <code>task</code> property. In practice though, I don't think Xcode will ever call the class and instance <code>setUp</code> methods concurrently, so I believe you could get away with <code>nonisolated(unsafe)</code>.</p>\n<pre><code>static nonisolated(unsafe) var task: Task&lt;Void, Never&gt;?\n\noverride class func setUp() {\n    task = Task {\n        await dataLibrary.load()\n    }\n}\n\noverride func setUp() async throws {\n    await TestCase.task?.value\n}\n</code></pre>\n", "tags": ["swift", "xcode", "xctestcase"]}
{"id": "4e453e88-c989-45e3-bef7-3466ac681ef5", "text": "Q: Allow admin to merge without pull requestion approval on github protected branch A: <p>As of now you may allow specific users to bypass branch protection:</p>\n<ol>\n<li><p><strong>Go to repository Settings</strong> \u2192 <strong>Branches</strong></p>\n</li>\n<li><p><strong>Edit your branch protection rule</strong> (or create one for <code>main</code>/<code>master</code>)</p>\n</li>\n<li><p><strong>Enable protection settings</strong> (e.g., &quot;Require a pull request before merging&quot;)</p>\n</li>\n<li><p><strong>Check &quot;Require approvals&quot;</strong> and set the number</p>\n</li>\n<li><p>Scroll down to <strong>&quot;Allow specified actors to bypass required pull requests&quot;</strong> [NEW]</p>\n</li>\n<li><p><strong>Add the specific users</strong> who can merge without approvals</p>\n</li>\n<li><p>Click <strong>Save changes</strong></p>\n</li>\n</ol>\n<p>Once you've completed these steps, a <strong>&quot;Merge without waiting for requirements to be met (bypass branch protections)&quot;</strong> checkbox will appear on pull requests for users in the bypass list.</p>\n<p>This checkbox only becomes visible when all required status checks have passed, which is what you were looking for.</p>\n", "tags": ["github", "github-actions"]}
{"id": "ee4ff664-7c8e-44fd-9624-a4faeb49ae5c", "text": "Q: Camera resolution in OpenCV isn&#39;t accurate A: <p>We can set the properties to a high value (e.g., 10000). OpenCV will automatically negotiate with the driver <em>(Not sure what's happening in the backend)</em> and default to the highest supported resolution for that device.</p>\n<pre class=\"lang-py prettyprint-override\"><code>cap.set(cv2.CAP_PROP_FRAME_WIDTH, 10000)\ncap.set(cv2.CAP_PROP_FRAME_HEIGHT, 10000)\n</code></pre>\n<p><a href=\"https://stackoverflow.com/a/31464688\">https://stackoverflow.com/a/31464688</a></p>\n", "tags": ["python", "opencv"]}
{"id": "2b1c2ce6-1b7e-4d9b-9641-6aa531fecd85", "text": "Q: .onPlayPauseCommand is not working tvOS SwiftUI A: <p>The first thing worth trying is to explicitly restore focus after the ad finishes.\nYou already have <code>onChangeAdStatus</code>, so you can hook into that.</p>\n<p>In <code>SimplePlayer</code> (no changes needed, just use the existing callback):</p>\n<pre class=\"lang-swift prettyprint-override\"><code>imaManager?.didRequestContentResume = { [weak self] in\n    self?.play()\n    self?.onChangeAdStatus?(true)\n}\n</code></pre>\n<p>Then, in <code>VerticalPlayerView</code>, react to the ad finishing and force focus back:</p>\n<pre class=\"lang-swift prettyprint-override\"><code>.onChange(of: player.isPlaying) { _ in\n    DispatchQueue.main.asyncAfter(deadline: .now() + 0.1) {\n        playPauseFocused = true\n    }\n}\n</code></pre>\n<p>If restoring focus doesn\u2019t help, the another solution is to not use <code>.onPlayPauseCommand</code> and instead handle Play/Pause via <code>MPRemoteCommandCenter</code>.</p>\n<p>Add this to <code>SimplePlayer</code>:</p>\n<pre class=\"lang-swift prettyprint-override\"><code>import MediaPlayer\n\nfunc setupRemoteCommands() {\n    let commandCenter = MPRemoteCommandCenter.shared()\n\n    commandCenter.togglePlayPauseCommand.isEnabled = true\n    commandCenter.togglePlayPauseCommand.removeTarget(nil)\n\n    commandCenter.togglePlayPauseCommand.addTarget { [weak self] _ in\n        self?.togglePlayPause()\n        return .success\n    }\n}\n</code></pre>\n<p>Call it after the player is created and again when the ad finishes, for example in <code>destroyIMA()</code>:</p>\n<pre class=\"lang-swift prettyprint-override\"><code>func destroyIMA() {\n    imaManager?.destroy()\n    imaManager = nil\n    setupRemoteCommands()\n}\n</code></pre>\n<p>(or right after <code>didRequestContentResume</code> if you don\u2019t destroy IMA).</p>\n<p>Let me know if this still doesn\u2019t fix it.</p>\n", "tags": ["swiftui", "tvos"]}
{"id": "603d789b-1412-45ad-a47b-cef336496387", "text": "Q: Insert Dynamic files in sourcecode that will update before every build A: <ul>\n<li>Right click the project or a folder in that project.</li>\n<li>Select <strong>Add &gt; Existing Item...</strong> from the context menu.</li>\n<li>Select a source file.</li>\n<li>Click the down-arrow on the <strong><kbd>\u00a0Add\u00a0\u00a0\u00a0\u00a0 | V</kbd></strong> button.</li>\n<li>Select: <strong>Add As Link</strong>.</li>\n</ul>\n<p>Another option is to create a class library project (*.dll) with these standard code items and to add it as a reference to other projects. This is what most developers do.</p>\n", "tags": ["c#", "visual-studio", "tags", "visual-studio-2022"]}
{"id": "ad3348a2-9190-4607-a329-5550db5fef6a", "text": "Q: Scrape table from Web to Excel A: <p>This is another alternative where <strong>querySelectorAll</strong> method is used.</p>\n<p>Note that the reference &quot;<strong>Microsoft HTML Object Library</strong>&quot; should be added to the project, otherwise you will get an error when you run the code.</p>\n<pre><code>Sub Test3()\n'   The reference &quot;Microsoft HTML Object Library&quot; should be added to the project\n\n    Dim objHTTP As Object, strURL As String\n    Dim HTML As HTMLDocument, RetVal As Object\n    Dim r As Long, i As Long\n \n    Range(&quot;A1:E&quot; &amp; Rows.Count) = &quot;&quot;\n \n    Set objHTTP = CreateObject(&quot;MSXML2.XMLHTTP&quot;)\n    strURL = &quot;https://vrbank.com.vn/ru/exchange-rate/&quot;\n \n    objHTTP.Open &quot;GET&quot;, strURL, False\n    objHTTP.send\n\n    Set HTML = New HTMLDocument\n\n    HTML.body.innerHTML = objHTTP.responseText\n    \n    Set RetVal = HTML.querySelectorAll(&quot;div.cell-tbl-1-2, div.cell-tbl-2.tbl-hd.ptop-10 &quot;)\n                \n    For i = 2 To RetVal.Length - 1 Step 5\n        r = r + 1\n        Cells(r + 1, 1) = RetVal(i).innerText\n        Cells(r + 1, 2) = RetVal(i + 1).innerText\n        Cells(r + 1, 3) = RetVal(i + 2).innerText\n        Cells(r + 1, 4) = RetVal(i + 3).innerText\n        Cells(r + 1, 5) = RetVal(i + 4).innerText\n    Next\nEnd Sub\n</code></pre>\n", "tags": ["excel", "vba", "web-scraping", "powerquery"]}
{"id": "ecd63fb4-cda7-46fd-b4c0-4ba0ba09a7ab", "text": "Q: Python recursive function with print reverse digits A: <pre class=\"lang-py prettyprint-override\"><code>def reverse_digits(num,rem=&quot;&quot;):\n   if num &lt; 10: print(f&quot;{rem}{num}&quot;) # Done\n   else:\n      return reverse_digits(num//10,f&quot;{rem}{num%10}&quot;) # Recurse\n\nreverse_digits(1234)\n```\n```text\n4321\n```\n</code></pre>\n", "tags": ["python", "recursion"]}
