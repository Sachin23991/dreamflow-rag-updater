{"id": "1417421b-e009-44f7-99e6-d5e4c3e47ab2", "text": "Q: Is it possible to fix a recursive Python function within a 12-character edit distance? A: <p>This is the line you want:</p>\n<pre class=\"lang-py prettyprint-override\"><code>return (0 if l[0] == it else 1+index_of(it,l[1:]))\n</code></pre>\n<hr />\n<p>Your could should look like this:</p>\n<pre><code>def index_of(it, l):\n    if it not in l:\n        return -1\n    return (l[0] if l[0] == it else index_of(l[:1],it))\n\nprint( index_of(&quot;Wali&quot;, [&quot;Bobo&quot;, &quot;Ali&quot;, &quot;Wali&quot;, &quot;Frank&quot;, &quot;Wali&quot;]) )\n</code></pre>\n<p>Your output is\u2026</p>\n<pre><code>-1\n</code></pre>\n", "tags": ["python", "algorithm", "recursion", "levenshtein-distance", "edit-distance"]}
{"id": "7de2e3b2-2473-4730-a4df-f0479c7dc56c", "text": "Q: Trying to Deserialize JSON to typed Object in Powershell A: \n<p><sup>Note: This answer was substantially rewritten based on helpful feedback from <a href=\"https://stackoverflow.com/users/1701026/iron\">iRon</a>.</sup></p>\n<p>The <strong>problem</strong> at hand <strong>affects <em>Windows PowerShell</em></strong> (the legacy, ships-with-Windows, Windows-only edition of PowerShell whose latest and <em>final</em> version is 5.1), but has been <strong>fixed in <a href=\"https://github.com/PowerShell/PowerShell/blob/master/README.md\" rel=\"nofollow noreferrer\"><em>PowerShell (Core) 7</em></a></strong>.</p>\n<p>It isn't specific to JSON processing, but <strong>boils down to trying to initialize an instance of a generic list type</strong> such as <a href=\"https://learn.microsoft.com/en-US/dotnet/api/System.Collections.Generic.List-1\" rel=\"nofollow noreferrer\"><code>System.Collections.Generic.List`1</code></a> or <a href=\"https://learn.microsoft.com/en-US/dotnet/api/System.Collections.ObjectModel.Collection-1\" rel=\"nofollow noreferrer\"><code>System.Collections.ObjectModel.Collection`1</code></a> <strong>with an <code>[object[]]</code>-typed array that has <em>exactly 1 element</em></strong>,<sup>[1]</sup> as the following minimal example shows (note that <code>@(...)</code>, the <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Operators#array-subexpression-operator--\" rel=\"nofollow noreferrer\">array-subexpression operator</a> always creates <code>[object[]]</code>-typed arrays):</p>\n<pre class=\"lang-bash prettyprint-override\"><code>  # UNEXPECTEDLY FAILS in Windows PowerShell (works in PowerShell 7),\n  # if the LHS array has EXACTLY ONE ELEMENT.\n  [System.Collections.Generic.List[int]] $List = @(42)\n  \n  # OK, in both editions (2 or more elements).\n  [System.Collections.Generic.List[int]] $List = @(42, 43)\n</code></pre>\n<p>This kind of initialization happens <em>implicitly</em> in your case, in the context of  casting the <code>[pscustomobject]</code> graph that <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/invoke-restmethod\" rel=\"nofollow noreferrer\"><code>Invoke-RestMethod</code></a> parsed the JSON response into (in a manner of speaking, it has <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/convertfrom-json\" rel=\"nofollow noreferrer\"><code>ConvertFrom-Json</code></a> built in) to your <code>[Root]</code> class in order to instantiate it; specifically:</p>\n<ul>\n<li>JSON arrays invariably become <code>[object[]]</code> arrays in <code>[pscustomobject]</code> graphs.</li>\n<li>Situationally, if the generic list-typed (<code>[List[&lt;type&gt;]]</code>) <code>.events</code> (class <code>[Root]</code>) and <code>.DataTypeList</code> (class <code>[Event]</code>) properties happen to be initialized with a <em>single-element</em> <code>[object[]]</code> array, the <code>Cannot create object of type &quot;&lt;type&gt;&quot;. Cannot convert the &quot;System.Object[]&quot; value of type &quot;System.Object[]&quot; to type &quot;System.Collections.Generic.List`1[&lt;element-type&gt;]</code> error occurs in  Windows PowerShell.</li>\n</ul>\n<p>However, the <strong>sample JSON in your question would <em>not</em> trigger the problem, because the arrays in question are both <em>2</em>-element arrays</strong>, sample JSON that <em>would</em> is used in the next section.</p>\n<hr />\n<h4>Workaround (only required in <em>Windows PowerShell</em>):</h4>\n<p>The simplest workaround is to <strong>use a list-like type that isn't affected by the problem</strong>, namely a <strong>strongly typed <em>array</em></strong>; e.g., instead of <code>[List[Event]]</code>, use <code>[Event[]]</code></p>\n<p>If you need a <em>resizable</em> list-like type (the ability to remove or add elements later), you can alternatively use the non-generic <a href=\"https://learn.microsoft.com/en-US/dotnet/api/System.Collections.ArrayList\" rel=\"nofollow noreferrer\"><code>System.Collections.ArrayList</code></a> type, albeit at the expense of type safety (this type is in essence the resizable equivalent of an <code>[object[]]</code> array).</p>\n<p>Here's <strong>self-contained sample</strong> code that demonstrates the workaround using strongly typed arrays instead of lists.</p>\n<ul>\n<li><p>The sample JSON from your question has been pared down to <em>single</em>-element arrays in order to demonstrate the effectiveness of the solution.</p>\n<ul>\n<li>Conversely, if you tried to run the code with the original <code>[List[&lt;type&gt;]]</code> properties, you would see the error in Windows PowerShell.</li>\n</ul>\n</li>\n<li><p>The sample JSON is parsed into a <code>[pscustomobject]</code> object graph via <a href=\"https://learn.microsoft.com/powershell/module/microsoft.powershell.utility/convertfrom-json\" rel=\"nofollow noreferrer\"><code>ConvertFrom-Json</code></a>, to simulate your <a href=\"https://learn.microsoft.com/powershell/module/microsoft.powershell.utility/invoke-restmethod\" rel=\"nofollow noreferrer\"><code>Invoke-RestMethod</code></a> call.</p>\n</li>\n<li><p>A simple cast to <code>[Root]</code> is sufficient to convert the <code>[pscustomobject]</code> graph into a strongly typed object graph based on your custom classes.</p>\n</li>\n<li><p>The result is re-converted to JSON to demonstrate that the data was correctly parsed - note the source-code comments regarding case of the property names.</p>\n</li>\n</ul>\n<pre class=\"lang-bash prettyprint-override\"><code>using namespace System.Collections.Generic\n\n# Your custom classes.\nclass DataType\n{\n    [string] $key\n    [string] $dataName\n}\n\nclass DataTypeList\n{\n    [string] $key \n    [string] $name \n    [string] $localeKey \n}\n\nclass Event\n{\n    [string] $key\n    [string] $name\n    [string] $localeKey\n    [DataType] $DataType\n    # Workaround: Use a (strongly typed) *array* instead of a list.\n    [DataTypeList[]] $DataTypeList # instead of: [List[DataTypeList]] $DataTypeList\n}\n\nclass Root\n{\n    # Workaround: Use a (strongly typed) *array* instead of a list.\n   [Event[]] $Events # instead of: [List[Event]] $Events\n}\n\n# Simulate an Invoke-RestMethod call that\n# returns JSON, which Invoke-RestMethod automatically\n# parses into a [pscustomobject] object graph.\n$fromJson = ConvertFrom-Json @'\n{\n  &quot;Events&quot;:[\n     {\n        &quot;key&quot;:&quot;1234&quot;,\n        &quot;name&quot;:&quot;Bob Muprhy&quot;,\n        &quot;localeKey&quot;:&quot;4&quot;,\n        &quot;DataType&quot;:{\n           &quot;key&quot;:&quot;1111111&quot;,\n           &quot;dataName&quot;:&quot;Name One&quot;\n        },\n        &quot;DataTypeList&quot;:[\n           {\n              &quot;key&quot;:&quot;983984&quot;,\n              &quot;name&quot;:&quot;New name&quot;,\n              &quot;localeKey&quot;:&quot;34985&quot;\n           }\n        ]\n     }\n  ]\n}\n'@\n\n# Parse the [pscustomobject] graph into a strongly\n# typed object graph based on the custom classes.\n# Note: PowerShell ignores case differences between\n#       the property names as specified in the original JSON\n#       and the custom-class property names.\n$fromJsonStronglyTyped = [Root] $fromJson \n\n# Reconvert to JSON to demonstrate that roundtripping succeeds.\n# Note: The property names are written with the case as defined\n#       in your custom classes, which may differ from the original JSON.\n$fromJsonStronglyTyped | ConvertTo-Json -Depth 4\n</code></pre>\n<hr />\n<p><sup>[1] Note that, by contrast, initializing with a <em>scalar</em> (<code>[System.Collections.Generic.List[int]] $List = 42</code>) or an appropriately <em>strongly typed</em> array (<code>[System.Collections.Generic.List[int]] $List = [int[]] 42</code>)works as expected.</sup></p>\n", "tags": ["powershell"]}
{"id": "94149f06-02f0-4dbb-a8c5-694c40b4917a", "text": "Q: How to add images in select list? A: <p>Depending on what you're trying to achieve with <code>&lt;select&gt;</code>, you may find this tip useful (if you're not within a <code>&lt;form&gt;</code>)...</p>\n<p>just replace it with the new HTML5 <code>&lt;details&gt;</code>:</p>\n<p>As you can see, this has some serious advantages:</p>\n<ul>\n<li>no JS required, no frameworks, no libraries</li>\n<li>very small HTML code (if you put aside all the CSS that I added to make the demo look better)</li>\n</ul>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\" data-babel-preset-react=\"false\" data-babel-preset-ts=\"false\">\n<div class=\"snippet-code\">\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>details summary,\nul {\n  list-style: none;\n}\n\ndetails summary::-webkit-details-marker {\n  display: none;\n  /* special fix, required just for Safari */\n}\n\ndetails ul {\n  position: absolute;\n  background: lightgrey;\n  box-shadow: 10px 5px 5px rgba(0, 0, 0, 0.5);\n  margin-top: -10px;\n  padding: 10px;\n}\n\ndetails li {\n  padding: 10px;\n  margin: 5px;\n}\n\ndetails li:hover {\n  background: rgba(255, 255, 0, 0.5);\n}</code></pre>\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;details&gt;\n  &lt;summary&gt;&lt;img src='choose_one_option.jpg'/&gt;&lt;/summary&gt;\n  &lt;ul&gt;\n    &lt;a href=\"\"&gt;&lt;li&gt;&lt;img src='foo.png'/&gt;&lt;/li&gt;&lt;/a&gt;\n    &lt;a href=\"\"&gt;&lt;li&gt;&lt;img src='bar.png'/&gt;&lt;/li&gt;&lt;/a&gt;\n  &lt;/ul&gt;\n&lt;/details&gt;</code></pre>\n</div>\n</div>\n</p>\n", "tags": ["html", "css"]}
{"id": "2220c15d-5327-40f6-9d0f-bb904af9b0ea", "text": "Q: XBoard protocol documentation wanted (chess) A: <p><em>From the comments:</em></p>\n<p>Your link tells us that <a href=\"http://chessprogramming.wikispaces.com/Harm+Geert+Muller\" rel=\"nofollow noreferrer\">H.G.Muller</a> is the current maintainer of the interface. <a href=\"http://home.hccnet.nl/h.g.muller/interfacing.txt\" rel=\"nofollow noreferrer\">His page</a> shows the minimal interface you need to implement.</p>\n<p>#2025 update</p>\n<p><a href=\"http://hgm.nubati.net/CECP.html\" rel=\"nofollow noreferrer\">Chess-Engine Communication Protocol v2 by H.G.Muller</a></p>\n", "tags": ["documentation", "chess"]}
{"id": "7892a761-a10b-44ec-b42d-f47c871c1d14", "text": "Q: Export plot with high quality from R to Word A: <p>You can use <code>ReporteRs</code> package to export the plot to Word. See the following example - it will produce a <em>.docx</em> file containing an editable graph in a <em>vector graphics</em> format (high quality) with a defined size.</p>\n\n<pre><code>library( ggplot2 )\nlibrary( ReporteRs )\ndoc = docx( )\n\nmyplot = qplot(Sepal.Length, Petal.Length, data = iris\n  , color = Species, size = Petal.Width, alpha = I(0.7) )\n\ndoc = addPlot( doc = doc, fun = print, x = myplot, \n  vector.graphic = T, # vector graphic instruction\n  fontname = \"Times New Roman\",  # font specification\n  width = 4, height = 4 #dim. are in inches\n  )\n\nwriteDoc( doc, file = \"test.docx\" )\n</code></pre>\n", "tags": ["r", "export-to-word"]}
{"id": "8ef8e5e0-04c3-4b58-8f56-ee2cf24e754c", "text": "Q: Do mutex and semaphores &quot;Busy wait&quot; in a LINUX systems? A: <p>I think the answer to your question depends heavily on what implementation of Mutex and Semaphore we are talking about;</p>\n<ul>\n<li>The implementation that you have provided obviously causes the thread to <strong>busy-wait</strong> for the lock. Actually the very book that you are talking about has introduced an implementation of the Semaphore (while calling wait().) which doesn't cause the waiting threads to busy-wait. Here it's;</li>\n</ul>\n<pre><code>wait(semaphore *S) {\n S-&gt;value--;\n if (S-&gt;value &lt; 0) {\n  add this process to S-&gt;list;\n  sleep();\n }\n} \n</code></pre>\n", "tags": ["linux-kernel", "operating-system", "mutex", "semaphore", "thread-synchronization"]}
