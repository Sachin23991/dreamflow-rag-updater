{"id": "47971d5a-41b3-4bf0-9f1c-9c83504b2263", "text": "Q: Error : ld: symbol(s) not found for architecture arm64, clang: error: linker command failed with exit code 1 (use -v to see invocation) A: <p>@richard Barber's comment of trying &quot;clang++&quot; instead of &quot;clang&quot; fixed it for me</p>\n", "tags": ["macos", "terminal", "keychain", "clang++", "command-line-tool"]}
{"id": "28724d30-1e3b-4992-902b-633e228ae1a6", "text": "Q: Simplified algorithm for calculating remaining space in a circular buffer? A: <p>works for any queue size,\nno branches</p>\n<pre><code>long queue_size(const queue_t* queue)\n{\n    const long diff = queue-&gt;tail - queue-&gt;head;\n    return (-(long)(diff &lt; 0) &amp; queue-&gt;size) + diff;\n}\n</code></pre>\n", "tags": ["c++", "circular-buffer"]}
{"id": "ff1723ae-d2cd-4310-9014-5ee7b3c68f63", "text": "Q: Execute git command which is in a variable powershell A: <p>In PowerShell a command must begin with an actual command, script or executable file. Since <code>&quot;things inside quotes&quot;</code> is an <em>expression</em> of type <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.string?view=net-10.0\" rel=\"nofollow noreferrer\">string</a>, it won't be executed as a command and just prints out the value. Same to your <code>$git_command</code> which is also parsed in <em>expression mode</em> by PowerShell. You need to use the <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_operators?view=powershell-7.5&amp;viewFallbackFrom=powershell-7.2#call-operator-\" rel=\"nofollow noreferrer\">call operator <code>&amp;</code></a> to call a command. You can learn more about PowerShell parsing rules <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_parsing?view=powershell-7.5\" rel=\"nofollow noreferrer\">here</a></p>\n<p>But even after adding the calling operator, <code>&amp; $git_command</code> still won't work either, because PowerShell also doesn't do word-splitting on unquoted parameters, it works directly on the parsed tokens instead. The argument following <code>&amp;</code> must contain exactly a single command, not its arguments</p>\n<hr />\n<p>So to fix it for your simple example you can do</p>\n<pre><code>$gitargs = $git_command -split ' '\n&amp; $gitargs[0] $gitargs[1]\n</code></pre>\n<p>You can split into individual variables if you want. And you can also call with <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.management/start-process?view=powershell-7.5\" rel=\"nofollow noreferrer\"><code>Start-Process</code></a> instead of <code>&amp;</code> if you want to start a new separate process instead of in the current console</p>\n<pre><code>$cmd, $arg = $git_command -split ' '\nStart-Process $cmd -ArgumentList $arg # or &amp; $cmd $arg\n</code></pre>\n<hr />\n<p>But if you have more arguments, for example <code>$gitargs = 'diff $hash1 $hash2'</code>, and want to run something similar to <code>git $gitargs</code> in POSIX shells like in the other answer, then you must use <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_splatting?view=powershell-7.5\" rel=\"nofollow noreferrer\">splatting</a></p>\n<pre><code>$twohashes = git log -2 --pretty=format:&quot;%h&quot;\n$gitargs = @('diff', $twohashes)\ngit @gitargs # Start-Process git -ArgumentList $gitargs \n</code></pre>\n<p><code>@gitargs</code> will do array flattening to make a single array of strings to pass to <code>git</code>. You can also do force-flatten before that, for example by doing <code>$gitargs = @('diff') + $twohashes</code> or <code>$gitargs = [string[]]@('diff', $twohashes)</code></p>\n<p>Splatting isn't limited to the first argument position only:</p>\n<pre><code>$twohashes = git log -2 --pretty=format:%h\ngit diff @twohashes\n</code></pre>\n<hr />\n<p>That means for your full command just the following is enough</p>\n<pre><code>$cmd, $arg = $git_command -split ' '\n&amp; $cmd $arg 2&gt;&amp;1 | Tee-Object output.txt\n</code></pre>\n<p>In case you store the whole <code>$git_command 2&gt;&amp;1 | Tee-Object output.txt</code> as a string in a variable then it obviously doesn't work because it isn't a single command, as splatting passes all the arguments to the command. To run it the shell <strong>must</strong> parse the string again with <code>Invoke-Expression</code>. Splatting can't apply to this case. Both the below commands work</p>\n<pre><code>Invoke-Expression &quot;&amp; $git_command 2&gt;&amp;1 | Tee-Object output.txt&quot;\nInvoke-Expression &quot;&amp; $git_command 2&gt;&amp;1&quot; | Tee-Object output.txt\n</code></pre>\n<p>If it didn't succeed in your case then make sure you copied the exact command you ran, not retype it</p>\n<p>Of course spawning a new shell like <code>powershell -C &quot;Invoke-Expression &amp; $git_command 2&gt;&amp;1 | Tee-Object output.txt'</code> also works because it also reparses the command, but it'll be significantly slower than running in the current shell like <code>Invoke-Expression</code></p>\n<p>Be aware that <code>-split</code> and <code>Invoke-Expression</code> only work because your command is simple and doesn't contain any spaces in the arguments. In reality you should always store the commands or arguments in an array for native commands, and a hash table for PowerShell cmdlets. That'll avoid the need to split the string later and cause many other troubles like whitespaces or variable expansion</p>\n", "tags": ["powershell"]}
{"id": "dee4fcf5-da74-47e6-b676-3512210062d3", "text": "Q: how to fix this problem with pydantic core A: <p>Sometimes cached build artifacts can cause issues.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>pip cache purge\npip install --no-cache-dir pydantic-core\n</code></pre>\n<p>This forces <code>pip</code> to redownload and rebuild everything.</p>\n<hr />\n<p>If that doesn\u2019t work, you can try making sure your Rust toolchain is up to date. Open a command prompt and run:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>rustup update\n</code></pre>\n<p>Make sure the correct target is installed, especially if you're building for a specific architecture (e.g., x86_64-pc-windows-msvc). <code>rustup</code> usually handles this, but it's good to check.</p>\n", "tags": ["python", "windows", "pydantic", "maturin"]}
{"id": "4ef1d7f6-3d05-47e3-a44d-9b5db858c54d", "text": "Q: Orientation of an irregular window changes the distance r over which secondary summary statistics are estimated A: <p>The default maximum value of distance <code>r</code> is determined by &quot;Ripley's rule of thumb&quot; which states that it should be one-quarter of the length of the shortest side of the enclosing rectangle. When you rotate a window, the enclosing rectangle changes size and shape, causing the rule to give a different maximum value of <code>r</code>. This rule is unsatisfactory in your case; it is used as the default because it is conventional and it is quick to compute.</p>\n<p>You can specify your desired sequence of distance values as the argument <code>r</code> when you call <code>pcf</code>. It must be an evenly-spaced sequence of values, increasing, starting from 0. For example <code>pcf(X, r=seq(0, rmax, length=1024))</code> where <code>rmax</code> is your desired maximum distance. If you have already computed another estimate of <code>pcf</code> from another dataset, you can use the <code>$r</code> component of the result as the <code>r</code> argument to the next call to <code>pcf</code>.</p>\n", "tags": ["r", "spatstat"]}
{"id": "e5ff3c28-91c5-4c79-a9bc-7b2870695d4c", "text": "Q: Elegant way to check for missing packages and install them? A: <p>Although it was asked explicitely for <code>install.packages()</code>, I want to mention that for exactly this situation we now have <code>renv</code>.</p>\n<h1>renv</h1>\n<p>You can make this reproducible with <code>renv</code> (project-local library + lockfile). Then the recipient can recreate your exact package versions with one command.</p>\n<h2>Sender (you)</h2>\n<p>In the project root:</p>\n<pre><code>install.packages(&quot;renv&quot;)\nrenv::init()\n</code></pre>\n<p>Install whatever you need as usual, then \u201cfreeze\u201d versions:</p>\n<pre><code>renv::snapshot()\n</code></pre>\n<p>Now share the project folder / repo including:</p>\n<ul>\n<li><code>renv.lock</code></li>\n<li><code>renv/</code></li>\n<li><code>.Rprofile</code></li>\n<li><code>your scripts / data</code></li>\n</ul>\n<h2>Recipient (them)</h2>\n<p>In the project root:</p>\n<pre><code>install.packages(&quot;renv&quot;)\nrenv::restore()\n</code></pre>\n<p>All the necessary packages get automatically installed into a project library matching the <code>renv.lock</code>.</p>\n<p>They should use the correct R version!</p>\n<p>Note: this pins R packages. System libs (e.g. GDAL, libxml2) and exact R version can still differ across OS.</p>\n", "tags": ["r", "package", "r-faq"]}
{"id": "900632e8-2f3e-4904-91a2-b9f9777e5523", "text": "Q: Pg_dumpall error &#39;FATAL: role &quot;postgres&quot; does not exist&#39; A: <p>You cannot drop the bootstrap superuser in PostgreSQL. So either the user got renamed, or the database cluster somehow got removed, and a new cluster got created with a different bootstrap superuser.</p>\n<p>Connect to PostgreSQL as a superuser and run</p>\n<pre><code>SELECT rolname FROM pg_roles WHERE oid = 10;\n</code></pre>\n<p>That will give you the current name of the bootstrap superuser. Either fix your backup to use that user or rename it:</p>\n<pre><code>ALTER ROLE whatever RENAME TO postgres;\n</code></pre>\n", "tags": ["postgresql", "docker"]}
