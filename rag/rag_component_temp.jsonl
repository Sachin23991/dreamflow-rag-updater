{"id": "6bb5f8b3-34ec-445f-badc-585349cbbf67", "text": "Q: Violation of PRIMARY KEY constraint Msg 2627 Cannot insert duplicate key A: <p>Violation of PRIMARY KEY constraint 'PK__Coding_I__C2232422662DE1EF'. Cannot insert duplicate key in object 'dbo.Coding_Interview'. The duplicate key value is (1)</p>\n", "tags": ["sql-server"]}
{"id": "513b9e55-0c2e-4ce6-a1c9-6e2740da773a", "text": "Q: Git .lock file not found A: <p>Maybe another Git process is running in the background?</p>\n", "tags": ["git", "intellij-idea", "fetch", "locking", "updates"]}
{"id": "fab61398-a93f-4247-a7ac-33333f43ddcf", "text": "Q: How To All Images And Videos Get Folder Wise In Our App In Android Kotlin? A: <p>&lt;uses-permission android:name=&quot;android.permission.READ_MEDIA_IMAGES&quot; /&gt;</p>\n<p>&lt;uses-permission android:name=&quot;android.permission.READ_MEDIA_VIDEO&quot; /&gt;</p>\n<p>&lt;!-- Required for selecting user media --&gt;</p>\n<p>&lt;uses-permission android:name=&quot;android.permission.READ_MEDIA_VISUAL_USER_SELECTED&quot; /&gt;</p>\n<p>&lt;!-- Delete only through ACTION_DELETE_REQUEST --&gt;</p>\n<p>&lt;uses-permission android:name=&quot;android.permission.MANAGE_MEDIA&quot; tools:ignore=&quot;ProtectedPermissions&quot; /&gt;</p>\n<pre><code>val permissionLauncher = registerForActivityResult(\n    ActivityResultContracts.RequestMultiplePermissions()\n) { result -&gt;\n\n    val granted =\n        (result[Manifest.permission.READ_MEDIA_IMAGES] == true) &amp;&amp;\n        (result[Manifest.permission.READ_MEDIA_VIDEO] == true)\n\n    if (granted) {\n        loadFolders()\n    }\n}\n\nfun requestPermissions() {\n    permissionLauncher.launch(\n        arrayOf(\n            Manifest.permission.READ_MEDIA_IMAGES,\n            Manifest.permission.READ_MEDIA_VIDEO\n        )\n    )\n}\n\n\nfun loadFolders(): List&lt;FolderModel&gt; {\n    val folders = HashMap&lt;String, MutableList&lt;MediaFile&gt;&gt;()\n\n    val uri = MediaStore.Files.getContentUri(&quot;external&quot;)\n\n    val projection = arrayOf(\n        MediaStore.Files.FileColumns._ID,\n        MediaStore.Files.FileColumns.DISPLAY_NAME,\n        MediaStore.Files.FileColumns.DATA,\n        MediaStore.Files.FileColumns.MEDIA_TYPE\n    )\n\n    val selection =\n        &quot;${MediaStore.Files.FileColumns.MEDIA_TYPE}=? OR &quot; +\n                &quot;${MediaStore.Files.FileColumns.MEDIA_TYPE}=?&quot;\n\n    val selectionArgs = arrayOf(\n        MediaStore.Files.FileColumns.MEDIA_TYPE_IMAGE.toString(),\n        MediaStore.Files.FileColumns.MEDIA_TYPE_VIDEO.toString()\n    )\n\n    val cursor = contentResolver.query(\n        uri,\n        projection,\n        selection,\n        selectionArgs,\n        MediaStore.Files.FileColumns.DATE_ADDED + &quot; DESC&quot;\n    )\n\n    cursor?.use {\n        val idCol = cursor.getColumnIndexOrThrow(MediaStore.Files.FileColumns._ID)\n        val nameCol = cursor.getColumnIndexOrThrow(MediaStore.Files.FileColumns.DISPLAY_NAME)\n        val dataCol = cursor.getColumnIndexOrThrow(MediaStore.Files.FileColumns.DATA)\n\n        while (cursor.moveToNext()) {\n            val id = cursor.getLong(idCol)\n            val name = cursor.getString(nameCol)\n            val path = cursor.getString(dataCol)\n\n            val file = File(path)\n            val folderName = file.parentFile?.name ?: &quot;Unknown&quot;\n\n            if (!folders.containsKey(folderName)) {\n                folders[folderName] = mutableListOf()\n            }\n\n            folders[folderName]?.add(\n                MediaFile(\n                    id = id,\n                    name = name,\n                    path = path,\n                    folder = folderName\n                )\n            )\n        }\n    }\n\n    return folders.entries.map {\n        FolderModel(it.key, it.value)\n    }\n}\n\n\ndata class MediaFile(\n    val id: Long,\n    val name: String,\n    val path: String,\n    val folder: String\n)\n\ndata class FolderModel(\n    val folderName: String,\n    val files: List&lt;MediaFile&gt;\n)\n\n\nfun deleteFile(mediaId: Long) {\n    val uri = ContentUris.withAppendedId(\n        MediaStore.Images.Media.EXTERNAL_CONTENT_URI,\n        mediaId\n    )\n\n    try {\n        contentResolver.delete(uri, null, null)\n    } catch (e: SecurityException) {\n\n        val intentSender = MediaStore.createDeleteRequest(\n            contentResolver,\n            listOf(uri)\n        ).intentSender\n\n        deleteLauncher.launch(IntentSenderRequest.Builder(intentSender).build())\n    }\n}\n\nval deleteLauncher = registerForActivityResult(\n    ActivityResultContracts.StartIntentSenderForResult()\n) { result -&gt;\n    if (result.resultCode == RESULT_OK) {\n        Toast.makeText(this, &quot;Deleted&quot;, Toast.LENGTH_SHORT).show()\n    }\n}\n\n\nfun hideFile(file: MediaFile) {\n    val hiddenDir = File(filesDir, &quot;hidden&quot;)\n    if (!hiddenDir.exists()) hiddenDir.mkdirs()\n\n    val destFile = File(hiddenDir, file.name)\n    File(file.path).copyTo(destFile, overwrite = true)\n\n    // remove from gallery\n    deleteFile(file.id)\n}\n\nfun unhideFile(fileName: String, originalFolder: String) {\n    val hiddenFile = File(filesDir.absolutePath + &quot;/hidden/$fileName&quot;)\n    val originalFile = File(originalFolder, fileName)\n\n    if (hiddenFile.exists()) {\n        hiddenFile.copyTo(originalFile, overwrite = true)\n        hiddenFile.delete()\n    }\n\n    // rescan so MediaStore can show it again\n    MediaScannerConnection.scanFile(\n        this, arrayOf(originalFile.absolutePath), null, null\n    )\n}\n\n\nfun getHiddenFiles(): List&lt;File&gt; {\n    val hiddenDir = File(filesDir, &quot;hidden&quot;)\n    if (!hiddenDir.exists()) return emptyList()\n\n    return hiddenDir.listFiles()?.toList() ?: emptyList()\n}\n\nimageView.setImageURI(Uri.fromFile(File(mediaFile.path)))\n\nvideoView.setVideoURI(Uri.fromFile(File(mediaFile.path)))\nvideoView.start()\n\n\n\nclass FolderListActivity : AppCompatActivity() {\n\n    private lateinit var recyclerView: RecyclerView\n    private lateinit var folderList: List&lt;FolderModel&gt;\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_folder_list)\n\n        recyclerView = findViewById(R.id.rvFolders)\n        recyclerView.layoutManager = LinearLayoutManager(this)\n\n        folderList = loadFolders()\n        recyclerView.adapter = FolderAdapter(folderList, object : OnFolderClick {\n            override fun onClick(folder: FolderModel) {\n                val intent = Intent(this@FolderListActivity, ImageListActivity::class.java)\n                intent.putExtra(&quot;folderName&quot;, folder.folderName)\n                startActivity(intent)\n            }\n        })\n    }\n}\n\n\ninterface OnFolderClick {\n    fun onClick(folder: FolderModel)\n}\n\nclass FolderAdapter(\n    private val list: List&lt;FolderModel&gt;,\n    private val listener: OnFolderClick\n) : RecyclerView.Adapter&lt;FolderAdapter.FolderHolder&gt;() {\n\n    class FolderHolder(view: View) : RecyclerView.ViewHolder(view) {\n        val folderName: TextView = view.findViewById(R.id.tvFolder)\n        val fileCount: TextView = view.findViewById(R.id.tvCount)\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): FolderHolder {\n        val view = LayoutInflater.from(parent.context)\n            .inflate(R.layout.item_folder, parent, false)\n        return FolderHolder(view)\n    }\n\n    override fun onBindViewHolder(holder: FolderHolder, position: Int) {\n\n        val folder = list[position]\n        holder.folderName.text = folder.folderName\n        holder.fileCount.text = &quot;${folder.files.size} items&quot;\n\n        holder.itemView.setOnClickListener {\n            listener.onClick(folder)\n        }\n    }\n\n    override fun getItemCount(): Int {\n        return list.size\n    }\n}\n\n\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:orientation=&quot;vertical&quot;\n    android:padding=&quot;16dp&quot;\n    android:background=&quot;#EEEEEE&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/tvFolder&quot;\n        android:textSize=&quot;18sp&quot;\n        android:textStyle=&quot;bold&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;/&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/tvCount&quot;\n        android:textSize=&quot;14sp&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;/&gt;\n&lt;/LinearLayout&gt;\n\n\nclass ImageListActivity : AppCompatActivity() {\n\n    private lateinit var recyclerView: RecyclerView\n    private lateinit var folderName: String\n    private lateinit var imageList: MutableList&lt;MediaFile&gt;\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_image_list)\n\n        folderName = intent.getStringExtra(&quot;folderName&quot;) ?: &quot;&quot;\n\n        recyclerView = findViewById(R.id.rvImages)\n        recyclerView.layoutManager = GridLayoutManager(this, 3)\n\n        imageList = loadImagesFromFolder(folderName)\n        recyclerView.adapter = ImageAdapter(imageList)\n    }\n\n    private fun loadImagesFromFolder(folder: String): MutableList&lt;MediaFile&gt; {\n        val result = mutableListOf&lt;MediaFile&gt;()\n\n        val uri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI\n\n        val projection = arrayOf(\n            MediaStore.Images.Media._ID,\n            MediaStore.Images.Media.DISPLAY_NAME,\n            MediaStore.Images.Media.DATA\n        )\n\n        val cursor = contentResolver.query(\n            uri,\n            projection,\n            null,\n            null,\n            MediaStore.Images.Media.DATE_ADDED + &quot; DESC&quot;\n        )\n\n        cursor?.use {\n            val idCol = it.getColumnIndexOrThrow(MediaStore.Images.Media._ID)\n            val nameCol = it.getColumnIndexOrThrow(MediaStore.Images.Media.DISPLAY_NAME)\n            val dataCol = it.getColumnIndexOrThrow(MediaStore.Images.Media.DATA)\n\n            while (it.moveToNext()) {\n                val id = it.getLong(idCol)\n                val name = it.getString(nameCol)\n                val path = it.getString(dataCol)\n\n                val file = File(path)\n                val parent = file.parentFile?.name ?: &quot;&quot;\n\n                if (parent == folder) {\n                    result.add(MediaFile(id, name, path, folder))\n                }\n            }\n        }\n        return result\n    }\n}\n\n\nclass ImageAdapter(\n    private val list: List&lt;MediaFile&gt;\n) : RecyclerView.Adapter&lt;ImageAdapter.ImageHolder&gt;() {\n\n    class ImageHolder(view: View) : RecyclerView.ViewHolder(view) {\n        val imageView: ImageView = view.findViewById(R.id.imgThumb)\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ImageHolder {\n        val view = LayoutInflater.from(parent.context)\n            .inflate(R.layout.item_image, parent, false)\n        return ImageHolder(view)\n    }\n\n    override fun onBindViewHolder(holder: ImageHolder, position: Int) {\n        val file = list[position]\n\n        holder.imageView.setImageURI(Uri.fromFile(File(file.path)))\n\n        holder.itemView.setOnClickListener {\n            // Open full screen viewer (optional)\n        }\n    }\n\n    override fun getItemCount(): Int {\n        return list.size\n    }\n}\n\n\n&lt;ImageView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:id=&quot;@+id/imgThumb&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;120dp&quot;\n    android:scaleType=&quot;centerCrop&quot;\n    android:background=&quot;#CCCCCC&quot; /&gt;\n</code></pre>\n", "tags": ["android", "kotlin", "video", "gallery", "image-gallery"]}
{"id": "e760a76c-45e3-4094-b324-12e8987902ed", "text": "Q: Running InteractiveBrokers Client Portal API Gateway in a Docker container A: <p>Maybe allowing - 172.* will do. It did work for me!</p>\n", "tags": ["docker", "http", "https", "ip", "interactive-brokers"]}
