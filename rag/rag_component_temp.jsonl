{"id": "5709f1af-ea93-4db8-96cc-1bf6ff6f6c0e", "text": "Q: Using HttpClient in CustomApiClient A: <p>If I had to use such a client I expect it to be as simple as possible without given up flexibility. So injecting a <code>HttpClient</code> instance will do its job.</p>\n<p>Anything else can be handled by special factory classes that will work with <code>IHttpClientFactory</code> or handle that <code>isMobile</code> Flag or anything else, because in the end the client instance needs only a working <code>HttpClient</code> instance</p>\n", "tags": ["c#", ".net", "blazor", "maui"]}
{"id": "d99b88e2-e253-43c2-b7b7-34626fcdd6e2", "text": "Q: Java virtual thread performance A: <p>I'm not a Java Guru, but I think you're seeing this the wrong way. Java virtual threads are not intended to improve performance, they're intended to easily handle blocking requests in parallel without starving plataform threads and without making complex thread implementations. In short, it has nothing to do with performance, but avoiding high resource usage or code complexity.</p>\n<p>From <a href=\"https://docs.oracle.com/en/java/javase/21/core/virtual-threads.html#GUID-2BCFC2DD-7D84-4B0C-9222-97F9C7C6C521\" rel=\"nofollow noreferrer\">oracle</a>:</p>\n<blockquote>\n<p>Platform threads typically have a large thread stack and other resources that are maintained by the operating system. They are suitable for running all types of tasks but may be a <strong>limited resource</strong>.</p>\n</blockquote>\n<blockquote>\n<p>Virtual threads are not faster threads; they do not run code any faster than platform threads. They exist to provide scale (higher throughput), not speed (lower latency).</p>\n</blockquote>\n<p>What you should have in mind is, if you create 50.000 plataform threads, each of them will get a default stack (I believe ~1mb in windows and it does not shrink!) while with 50.000 virtual threads they will start each with only a few kb (and it can shrink!) with only a few platform threads backing them as they're for tasks that will spend most of their time waiting for I/O. From the <a href=\"https://openjdk.org/jeps/444\" rel=\"nofollow noreferrer\">JEP</a></p>\n<blockquote>\n<p>Just as operating systems give the illusion of plentiful memory by mapping a large virtual address space to a limited amount of physical RAM, a Java runtime can give the illusion of plentiful threads by mapping a large number of virtual threads to a small number of OS threads.</p>\n</blockquote>\n<p>So, you can't expect performance gains using virtual threads, but if used in the right conditions you can expect reduced resources utilization without increasing the complexity of the code (remember that virtual threads allow you to avoid the extra complexity of callbacks nature of asynchronous code).</p>\n<p>Also, benchmarking correctly is hard, you should probably run your tests in isolation instead of one after the other and use proper tools (JMH), and also avoid currentTimeMillis.</p>\n<p>From memory perspective, look at <a href=\"https://stackoverflow.com/questions/77807375/why-do-java-21-virtual-threads-need-less-memory-than-platform-threads\">this SO answer</a> and the <a href=\"https://openjdk.org/jeps/444#Memory-use-and-interaction-with-garbage-collection\" rel=\"nofollow noreferrer\">JEP</a>.</p>\n", "tags": ["java", "multithreading", "java-21", "virtual-threads"]}
{"id": "d92d355e-a4c6-4e2b-861e-57f8982818b7", "text": "Q: Call a function with the submit button in HTML A: <p>Here are 3 ways:</p>\n<h3>Form <code>onsubmit</code> attribute</h3>\n<p>In your form you can add the attribute <code>onsubmit</code>:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;form onsubmit=&quot;gtag_report_conversion('https://your-optional-callback-url.com')&quot;&gt;\n  &lt;!-- ... --&gt;\n&lt;/form&gt;\n</code></pre>\n<h3>Form <code>onsubmit</code> property</h3>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;form id=&quot;myForm&quot;&gt;\n  &lt;!-- ... --&gt;\n&lt;/form&gt;\n</code></pre>\n<pre class=\"lang-js prettyprint-override\"><code>document.querySelector('#myForm').onsubmit = (event) =&gt; {\n  event.preventDefault(); // To prevent the page from reloading because of the form submission\n  gtag_report_conversion('https://your-optional-callback-url.com');\n  // ... Other stuff you want to do with the form submission\n}\n</code></pre>\n<h3>Form <code>onsubmit</code> Event Listener</h3>\n<p>Same HTML as above</p>\n<pre class=\"lang-js prettyprint-override\"><code>document.querySelector('#myForm').addEventListener('submit', (event) =&gt; {\n  event.preventDefault(); // To prevent the page from reloading because of the form submission\n  gtag_report_conversion('https://your-optional-callback-url.com');\n  // ... Other stuff you want to do with the form submission\n});\n</code></pre>\n", "tags": ["javascript", "html", "wordpress", "function", "form-submit"]}
{"id": "27021e50-9c8d-4b78-9db1-f2e543950af2", "text": "Q: A user access token is required to request this resource A: <p>A few lines after in the documentation it states</p>\n\n<blockquote>\n  <p>App access tokens can also be used to publish content to Facebook on behalf of a person who has granted a publishing permission to your application.</p>\n</blockquote>\n\n<p>This is what they mean by requests on behalf of the user.</p>\n\n<p>For the albums endpoint you need a user access token.</p>\n\n<p>Yes your friends need to re-authenticate your app every two months if you extend a short lived user access token. The point is not to have apps sitting around with access when the user may have forgotten them. Prompting the user to re-authenticate ensures they are still aware of these apps and can have the choice to keep or delete them</p>\n", "tags": ["facebook", "oauth", "access-token", "facebook-access-token"]}
{"id": "ef40a9c3-5def-479e-a0c6-0aa1fdc11315", "text": "Q: Connecting to MySQL using VB.NET A: <p>One mistake here is using a global connection object. .Net database connections use a feature called connection pooling, which means most of the time it's really better to create a new connection object for each call out to your database. What you can do is use that global to keep your connection <em>string</em>.</p>\n\n<pre><code>Private Sub Label1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Label1.Click\n\n    Dim SQL As String = \"SELECT * FROM `boomtable` WHERE `Tab1` = 'CLOSED'\"\n\n    Using rdrCn As New MySqlConnection(connectionString), _\n          rdrCmd As New MySqlCommand(SQL, rdrCn)\n\n        rdrCn.Open()\n\n        Using myData As MySqlDataReader = rdrCmd.ExecuteReader()\n            SQL = \"UPDATE boomtable SET Tab1= @NewState WHERE Tab1 = @OldState\"\n            Using updCn As New MySqlConnection(connectionString), _\n                  updCmd As New MySqlCommand(SQL, updcn)\n\n                updCmd.Parameters.Add(\"@NewState\", MySqlDbType.VarChar, 6)\n                updCmd.Parameters.Add(\"@OldState\", MySqlDbType.VarChar, 6)\n\n\n                If myData.Read()\n                    Label1.Text = \"CLOSED\"\n                    updCmd.Parameters(0).Value = \"CLOSED\"\n                    updCmd.Parameters(1).Value = \"OPEN\"\n                Else\n                    Label1.Text = \"OPEN\"\n                    Label1.Text = \"CLOSED\"\n                    updCmd.Parameters(0).Value = \"OPEN\"\n                    updCmd.Parameters(1).Value = \"CLOSED\"\n                End If\n                updCn.Open()\n                upCmd.ExecuteNonQuery()\n            End Using\n        End Using\n    End Using\nEnd Sub\n</code></pre>\n\n<p>But the bigger question here is why you're going to the database twice at all?</p>\n\n<pre><code>Private Sub Label1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Label1.Click\n    Dim SQL As String = \"UPDATE boomtable SET Tab1 = CASE WHEN Tab1='CLOSED' THEN 'OPEN' ELSE 'CLOSED' END;SELECT Tab1 FROM boomtable LIMIT 1;\"\n\n    Using cn As New MySqlConnection(connectionString), _\n          cmd As New MySqlCommand(SQL)\n\n       cn.Open()\n       Label1.Text = CStr(cmd.ExecuteScalar())\n    End Using\nEnd Sub\n</code></pre>\n\n<p>Now isn't that a whole lot neater?</p>\n", "tags": [".net", "mysql", "vb.net"]}
{"id": "24bd2922-9759-41b5-a949-4b35a38379f1", "text": "Q: Infragistics UltraGrid : Unable to enter edit mode for focused column A: <p>Solved here: <a href=\"https://stackoverflow.com/questions/16195640/ultrawingrid-enter-edit-mode-issue\">link</a></p>\n\n<pre><code>var cell = ... // Get the cell\n\nif (cell != null)\n{\n     BeginInvoke(new MethodInvoker(() =&gt;\n     {\n          cell.Activate();\n          bugGrid.PerformAction(UltraGridAction.EnterEditMode);\n     }));\n}\n</code></pre>\n", "tags": ["c#", "drop-down-menu", "infragistics", "edit", "ultrawingrid"]}
{"id": "6e1b9bc2-4b93-4ea3-84ec-89535e807f93", "text": "Q: Check if specific date is at least tomorrow in Swift A: <p>You can use a native calendar function:</p>\n<pre><code>\ncalendar.isDateInTomorrow(date)\n</code></pre>\n<p>It is basically a simply check if the date is <strong>in the future</strong> and <strong>not today</strong>. No need for any manual calculations.</p>\n<pre><code>func isAtLeastTomorrow(_ date: Date) -&gt; Bool {\n    date &gt; .now &amp;&amp; !calendar.isDateInToday(date)\n}\n</code></pre>\n", "tags": ["swift"]}
{"id": "bdf231f0-28e9-432f-9629-2ce9f0fc8779", "text": "Q: Contact Form 7 occasionally receives broken uploaded images (1 byte files) \u2013 how to debug? A: <p>CF7 is a popular plugin for wordpress which allows user to input data, including file uploading.</p>\n<p>However, in some versions (e.g. contact-form-7 5.1.6), it has vulnerability so that a malicious user can upload data by curl.</p>\n<p><strong>Practically there should not be a JPEG file (an image) with 1-byte size, so I believe a user is trying to hack (or test hacking) your site.</strong></p>\n<p>See <a href=\"https://www.exploit-db.com/exploits/48062\" rel=\"nofollow noreferrer\">here_for_details</a></p>\n<p>The exploit is something like:</p>\n<pre><code>&lt;?php\n\n$shahab=&quot;file.jpg&quot;;\n$ch = curl_init(&quot;https://[your-domain-name]/wp-content/plugins/contact-form-7/modules/file.php&quot;);\ncurl_setopt($ch, CURLOPT_POST, true);\ncurl_setopt($ch, CURLOPT_POSTFIELDS,\narray('zip'=&gt;&quot;@$shahab&quot;));\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\n$result = curl_exec($ch);\ncurl_close($ch);\nprint &quot;$result&quot;;\n?&gt;\n</code></pre>\n<p>(A) Hence, I suggest you carefully check whether the version of CF7 you are using is still having this vulnerability. If so, then try to update to the latest version which already fixed it (if available), or replace it with another plugin which does not have this issue.</p>\n<p>(B) Of course, there is also one possibility:\nUser can easily create a file (with &quot;.jpeg&quot; extension) by the following Win OS command, and then perform file uploading:</p>\n<pre><code>echo|set /p=&quot;x&quot;&gt; xxxx.jpeg\n</code></pre>\n<p>or using linux:</p>\n<pre><code>echo -n &quot;x&quot; &gt; xxxx.jpeg\n</code></pre>\n", "tags": ["php", "wordpress", "file", "upload", "contact-form-7"]}
