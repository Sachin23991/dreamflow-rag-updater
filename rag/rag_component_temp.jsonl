{"id": "243474cc-574a-4db9-a373-0b72dffc1a55", "text": "Q: Ansible: Dynamic Variables produce CapturedExceptionMarker in Ansible &gt;=2.19 A: <p>This is, for now, a partial answer as <a href=\"https://stackoverflow.com/questions/79853027/ansible-dynamic-variables-produce-capturedexceptionmarker-in-ansible-2-19#comment140914486_79853027\">I kind of fell like there might be something else happening in your question</a>.</p>\n<hr />\n<p>What I can say for sure already is that there is something fundamentally wrong in your actual solution: the usage of the magic variable <code>vars</code>.<br />\n<code>vars</code> is actually an implementation detail of Ansible and it was never meant to be used, nor exposed.<br />\nFurthermore, it will fail on you in a near future as Ansible has already plans to remove it.</p>\n<blockquote>\n<p>Short history, <code>vars</code> is a leftover from previous code that used it to pass variables to template, it was never intended for external use and most of the time didn't template anything.</p>\n<p>Unrelated changes allowed it to template 'sometimes' but this was never on purpose, the only reason it was not removed is because some people relied on it, that had discovered by looking at the code and/or other people that had already been using it. Even though it has been our intention for a long time to deprecate and remove the <code>vars</code> construct, lack of a good way to trigger a runtime message has kept us from doing so.</p>\n<p>We created 2 alternatives via lookups <code>varnames</code> and <code>vars</code>, which might not be as flexible as a dict but also would not chew up memory for unneeded access, since most users just want to match a small subset of existing variables.</p>\n</blockquote>\n<p><em><sup>Source: <a href=\"https://github.com/ansible/ansible/issues/74904#issuecomment-854137949\" rel=\"nofollow noreferrer\">https://github.com/ansible/ansible/issues/74904#issuecomment-854137949</a></sup></em></p>\n<p>So, as raised by Brian Coca in this issue comment, you should rather use a couple of lookup <code>varnames</code> and <code>vars</code>.</p>\n<p>There is actually <a href=\"https://docs.ansible.com/projects/ansible/latest/collections/ansible/builtin/vars_lookup.html#examples\" rel=\"nofollow noreferrer\">an example of this is the <code>vars</code> lookup</a>, although they did not provide any example output there:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>- name: show values from variables found via varnames (note &quot;*&quot; is used to dereference the list to a 'list of arguments')\n  debug: msg=&quot;{{ q('vars', *q('varnames', 'ansible_play_.+')) }}&quot;\n</code></pre>\n<p>In your specific case a working example should be:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>base_scripts_usr_local_bin: &gt;-\n  {{\n    base_scripts_usr_local_bin_default | default([]) +\n    base_scripts_usr_local_bin_add | default([]) +\n    query(\n      'ansible.builtin.vars',\n      *query('ansible.builtin.varnames', '^base_scripts_usr_local_bin_add_.+')\n    )\n  }}\n</code></pre>\n<hr />\n<p>For exemple, the task:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>- debug:\n    msg:\n      base_scripts_usr_local_bin: &gt;-\n        {{\n          base_scripts_usr_local_bin_default | default([]) +\n          base_scripts_usr_local_bin_add | default([]) +\n          query(\n            'ansible.builtin.vars',\n            *query(\n              'ansible.builtin.varnames',\n              '^base_scripts_usr_local_bin_add_.+'\n            )\n          )\n        }}\n  vars:\n    base_scripts_usr_local_bin_add_webserver: foo\n    base_scripts_usr_local_bin_add_database: bar\n    base_scripts_usr_local_bin_add_desktop: baz\n    base_scripts_usr_local_bin_add_somethingelse: qux\n</code></pre>\n<p>will output:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>ok: [localhost] =&gt; {\n    &quot;msg&quot;: {\n        &quot;base_scripts_usr_local_bin&quot;: [\n            &quot;foo&quot;,\n            &quot;bar&quot;,\n            &quot;baz&quot;,\n            &quot;qux&quot;\n        ]\n    }\n}\n</code></pre>\n", "tags": ["ansible"]}
{"id": "8d9b0d3c-ba5e-4101-a6f9-51f3bb49726e", "text": "Q: How to Pass custom SecuirtyCredentials from a node(thick client) in ignite 2.17 A: <p>When customizing security, you likely need to write your own <code>org.apache.ignite.internal.processors.security.GridSecurityProcessor</code> implementation. The default <code>org.apache.ignite.internal.processors.authentication.IgniteAuthenticationProcessor</code> only supports authenticating thin clients with Basic authentication (login/password) while thick clients are considered trusted, see <a href=\"https://ignite.apache.org/docs/ignite2/latest/security/security-model\" rel=\"nofollow noreferrer\">https://ignite.apache.org/docs/ignite2/latest/security/security-model</a>.</p>\n<p>Be careful when writing your own implementation. In addition to security being critical (obviously), the Security Processor code will be called from all kinds of sensitive contexts while processing requests - errors in the security subsystem are likely to cause other instabilities.</p>\n<p>GridGain has a more advanced implementation with LDAP/OpenID/JAAS integrations and authorization/permissions/RBAC. Check it out: <a href=\"https://www.gridgain.com/docs/gridgain8/latest/administrators-guide/security/authentication\" rel=\"nofollow noreferrer\">https://www.gridgain.com/docs/gridgain8/latest/administrators-guide/security/authentication</a>.</p>\n", "tags": ["security", "ignite", "apacheignite"]}
{"id": "71cfe70a-4628-41db-a0cc-fd25c5012d01", "text": "Q: How to Create a Partial Atlas Search Index in MongoDB Based on a Filter? A: <p>I was able to do a partial index by using <a href=\"https://www.mongodb.com/docs/atlas/atlas-search/view-support/\" rel=\"nofollow noreferrer\">Views with Search</a> &amp; <a href=\"https://www.mongodb.com/docs/manual/core/views/\" rel=\"nofollow noreferrer\">More info on View itself</a>.</p>\n<p>I follow their example pretty closely, but in your case you'd have to create a View like so in <strong>mongosh</strong> which can be found in MongoDB Compass for easy access.\n<code>db.createView(&quot;activeItems&quot;, &quot;items&quot;, [ { $match: { $expr: {$eq: [&quot;$status&quot;, &quot;active&quot;]} } }]);</code></p>\n<p>I named your view &quot;activeItems&quot; which is a view of the &quot;items&quot; collection. In my testing, you can <strong>create the index in the same way</strong> to however you had it before (which looks correct), but now it is indexing only partial data. My case reduced from 14.25 MB to 9.71 MB (20,000 records to 12,000 records).</p>\n<p>A View does not take up any additional disk space as it is just an on-demand aggregation, which is perfect for your use case as your are checking equality to static values. The View stays up to date to whatever is in its source collection so don't worry about desynced data.</p>\n", "tags": ["mongodb", "indexing", "full-text-search", "mongodb-atlas"]}
{"id": "b0154a0d-d4e2-4377-9afb-69df5f30fb16", "text": "Q: Can I make custom nested slugs in SvelteKit? A: <p>SvelteKit has a catchall route these days</p>\n<p><a href=\"https://svelte.dev/tutorial/kit/rest-params\" rel=\"nofollow noreferrer\">https://svelte.dev/tutorial/kit/rest-params</a></p>\n", "tags": ["sveltekit"]}
{"id": "4cbf34b3-5f44-4cde-92a5-e4f4ce4ee3c1", "text": "Q: how to shuffle the words in a 1d array? A: <p>You can shuffle the word pointers:</p>\n<pre class=\"lang-c prettyprint-override\"><code>void shuffle(char **str)\n{\n    int i = 0;\n    int len = 0;\n    char **s = str;\n    while (*s++)\n        len++;\n    while(i &lt; len - 1)\n    {\n        int random = rand() % len;\n        if(i == random)\n        {\n            random++;\n        }\n        else if(i &gt; random)\n        {\n            random = i + 1;\n        }\n        char* temp = str[i];\n        str[i] = str[random];\n        str[random] = temp;\n        i++;\n    }\n}\n\nint main()\n{\n    srand(time(NULL));\n    char* word[] = {&quot;hello&quot;, &quot;world&quot;, &quot;here&quot;, NULL};\n    shuffle(word);\n    char** w = word;\n    while (*w)\n        printf(&quot;%s &quot;, *w++);\n} \n</code></pre>\n", "tags": ["arrays", "c", "shuffle"]}
{"id": "aa6c4547-7f59-478a-b876-a381a67ffb05", "text": "Q: Can &quot;Behavior on&quot; syntax be used with a custom Animation type? A: <p>There are some problems with your implementation. The biggest one being that you are making the SequentialAnimation a property of a parent PropertyAnimation. I'm not positive, but I think the only thing that actually runs is the PropertyAnimation, which will just use some default animation. The root animation should itself be the SequentialAnimation. The hardest part about doing the specific animation that you want is getting it to remember the original value. It seems like you should just be able to use the first NumberAnimation's <code>from</code> value, but that doesn't work for some reason. I got it to work by storing its value before the animation begins. Here is an example app to demonstrate it. It draws a red box. Clicking on the red box will cause it to &quot;zig-zag&quot; to a different position. Clicking on it a second time will &quot;zig-zag&quot; back to the starting location.</p>\n<pre class=\"lang-js prettyprint-override\"><code>import QtQuick\n\nItem {\n    width: 500\n    height: 500\n\n    Rectangle {\n        id: box\n        width: 50\n        height: 50\n        color: &quot;red&quot;\n        x: 50\n\n        // Define our animated behavior\n        component ZigZagBehavior: Behavior {\n            id: behavior\n\n            property real startVal: targetProperty.object[targetProperty.name]\n\n            SequentialAnimation {\n                NumberAnimation {\n                    duration: 300\n                }\n\n                NumberAnimation {\n                    from: behavior.targetValue\n                    to: behavior.startVal\n                    duration: 300\n                }\n\n                NumberAnimation {\n                    from: behavior.startVal\n                    to: behavior.targetValue\n                    duration: 300\n                }\n            }\n        }\n\n        // Animate the x-value\n        ZigZagBehavior on x {}\n\n        MouseArea {\n            anchors.fill: parent\n            onClicked: box.x = (box.x === 50 ? 300 : 50)\n        }\n    }\n}\n</code></pre>\n", "tags": ["qml", "qtquick2", "qt-quick"]}
{"id": "aeb27d9b-b35d-457d-8fb1-4e1152888945", "text": "Q: Codeigniter deleting data with joins tables A: <p>Instead of rewriting the whole SQL, You can do like this:</p>\n\n<pre><code>// build query as usual...\n$this-&gt;db\n    -&gt;from ('cookies')\n    -&gt;join ('recipes', 'recipes.cookie = cookies.id')\n    -&gt;where ('recipes.rating', 'BAD');\n\n/* \n * get the original DELETE SQL, in our case:\n * \"DELETE FROM `cookies` JOIN `recipes` ON `recipes`.`cookie`=`cookies`.`id` WHERE `recipes`.`rating`='BAD'\"\n */\n$sql = $this-&gt;db-&gt;get_compiled_delete ('cookies');\n\n/*\n * insert the target table in the SQL string, to get this:\n * \"DELETE `cookies` FROM `cookies` JOIN `recipes` ON `recipes`.`cookie`=`cookies`.`id` WHERE `recipes`.`rating`='BAD'\"\n */\n$target = $this-&gt;db-&gt;escape_identifiers ('cookies'); // just to be safe\n$sql = substr_replace ($sql, \" $target\", 6, 0); // note the prepended space\n\n// now we can run the query\n$q = $this-&gt;db-&gt;query ($sql);\n</code></pre>\n\n<p>This way, You keep the good stuff from Query Builder (a.k.a. Active Records) and have Your freedom of customization as well. I think, it's quite safe, since the <code>$sql</code> string will always start with <code>DELETE</code>. You can wrap this into a function as a shortcut, of course.</p>\n", "tags": ["php", "codeigniter", "join", "sql-delete", "query-builder"]}
{"id": "08c6d20d-4033-474c-ae55-0073b6bd2ca3", "text": "Q: How to specify multiple pipeline sources for a gitlab-ci.yml build A: <p>I see you're using the <code>$CI_MERGE_REQUEST_TARGET_BRANCH_NAME</code> variable to determine the current repository, but this variable returns the branch into which the merge request is being merged. When running the pipeline from the develop branch, you'll get an empty pipeline because the branch isn't associated with a merge request. Try using the <code>$CI_COMMIT_REF_SLUG</code> or <code>$CI_COMMIT_BRANCH</code> variables in your rules instead.</p>\n", "tags": ["gitlab", "gitlab-ci", "gitlab-ci-runner"]}
{"id": "720038d6-4f9c-4f41-af6c-5167e7f839ae", "text": "Q: How to dynamically estimate maximum number of cameras my GPU can handle for YOLOv8 inference? A: <p>A few additional conditions need to be specified.</p>\n<ol>\n<li>What are the video sources: RTSP, HTPP, ONVIF, arrays autogenerated as frames?</li>\n<li>What resolution, framerate and bitrate are they being streamed at?</li>\n<li>You mention &quot;Multi-threaded camera reader&quot;, this indicates you have the CPU decoding video streams, which may be the bottleneck.</li>\n</ol>\n<p>You can test the YOLO throughput without the video by setting your batch size to let's say 32 and seeing if your model can sustain 25 batched inferences per second on dummy images. You can cache the same image over and over if you want. In addition, check GPU utilization (maybe with nvidia-smi dmon) to see if you have capacity to spin up a second YOLO model to split resources across. If video framerates are much faster than 25 fps, you can alternate which model gets assigned a batch or split the batch in half and assign each model a batch size of 16.</p>\n", "tags": ["python", "tensorflow", "deep-learning", "pytorch", "nvidia"]}
