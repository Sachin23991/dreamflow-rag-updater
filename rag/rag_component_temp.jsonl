{"id": "4844afa4-ede9-41c3-b6aa-fc68e174fed7", "text": "Q: Safe publication of eventually-immutable data structures A: <p>How many instances of such a DataStructure class will be instantiated? If it are  not millions than you would have the possibility to create an unmodifyable proxy instance for each data structure similar to unmodifiable collection. BTW I don't see code that would make modifications to the Map so I assume you have simplified the presented code a bit too much.</p>\n", "tags": ["java", "concurrency"]}
{"id": "b82ed767-35fd-476c-b92c-e4b104aacf17", "text": "Q: How can I return a value from an event? A: <p>I came across your question with the same need - request a value by an event subscriber, where requester and subscriber are in different tiers.</p>\n<p>The idea with a parameter, which holds responses is good. The thing is, that you can have in theory multiple subscribers.</p>\n<p>As I was too lazy to create own &quot;Result&quot; class to transfer it as a parameter, I just took a <code>List&lt;string&gt;</code> as a parameter, which suites also for the case of multiple subscriber, which can just add new &quot;response&quot; to the list.</p>\n<p>For those, who are not so lazy - you can implement your own &quot;Response&quot; class, which could also contain a &quot;lock&quot; object for the case subscribers response in parallel, and/or implement a List, with only Add(..) or AddRange(..) methods, to forbid a data manipulation by other subscribers.</p>\n<pre><code>event Action&lt;List&lt;string&gt;&gt; SomeDataRequested;\nstring RequestSomeData()\n{\n    var responses = new List&lt;string&gt;();\n\n    SomeDataRequested?.Invoke(responses);\n\n    return string.Join(&quot;; &quot;, responses);\n}\n\nvoid Subscribe()\n{\n    SomeDataRequested += (responses)=&gt; \n    { \n       responses.Add(&quot;Some response..&quot;);\n       //consider responses.Add(null);\n    };\n}\n</code></pre>\n", "tags": ["c#", "multithreading", "events", "delegates"]}
{"id": "a776ae5b-5208-4849-82ac-12f1b71072c2", "text": "Q: In C#, how to define a property that accept parameters or a function that return reference as in C++? A: <p>Using <em>corrected</em> solution of Charlieface, the full solution of indexer of level 2 is following.</p>\n<pre class=\"lang-cs prettyprint-override\"><code>public UInt32 this[int iFrom, int iTo]\n{\n    get\n    {\n        int iShiftLeft = 8 * sizeof(UInt32) - iFrom;\n        int iShiftRight = iShiftLeft + iTo;\n        return (this.iValue &lt;&lt; iShiftLeft) &gt;&gt; iShiftRight;\n    }\n    set\n    {\n        UInt32 nLeftValue = (iValue &gt;&gt; iFrom) &lt;&lt; iFrom;\n        UInt32 nRightValue = 0;\n        if (iTo &gt; 0)\n        {\n            int iShift = 8 * sizeof(UInt32) - iTo;\n            nRightValue = (iValue &lt;&lt; iShift) &gt;&gt; iShift;\n        }\n        this.iValue = nLeftValue + (value &lt;&lt; iTo) + nRightValue;\n    }\n}\n</code></pre>\n<p>Pseudocode of euclidian division algorithm found on <a href=\"https://fr.wikipedia.org/w/index.php?title=Division\" rel=\"nofollow noreferrer\">https://fr.wikipedia.org/w/index.php?title=Division</a> is currently (2025-12-24) following</p>\n<p><img src=\"https://i.sstatic.net/pMQZ7sfg.png\" alt=\"PrintScreen of algorithm peusocode\" /></p>\n<p>The <em>adapted, translated (english) and corrected</em> pseudocode of algorithm is following</p>\n<pre><code>function [Q, R] = divide(a, b)\n    Q := 0\n    R := a\n    for i = n-1 \u2192 0\n        if a(n-1:i) &gt;= b\n            Q(i) := 1\n            a(n-1:1) := a(n-1:i) - b\n        end\n    end\n    return [Q, R]\nfin\n</code></pre>\n<p>Remark: actual algorithm is false. That is the reason I write and test a correct algorithm in C#</p>\n<p>His implementation in <code>C#</code> using <code>UInt32_Register</code> class is following</p>\n<pre class=\"lang-cs prettyprint-override\"><code>static Tuple&lt;UInt32, UInt32&gt; Div(UInt32 N, UInt32 D)\n{\n    int n = 8 * sizeof(UInt32);\n    UInt32_Register Q = 0; // QUOTIENT de la division\n    UInt32_Register R = N; // RESTE de la division\n\n    for (int i=n-1; i &gt;= 0; i--)\n    {\n        if (R[n-1,i] &gt;= D)\n        {\n            Q[i] = 1;\n            R[n-1,i] = R[n-1,i] - D;\n        }\n    }\n    return Tuple.Create((UInt32)Q, (UInt32)R);\n}\n</code></pre>\n<p>A better implementation of this algorithm would be</p>\n<pre class=\"lang-cs prettyprint-override\"><code>static Tuple&lt;UInt32, UInt32&gt; Div(UInt32 N, UInt32 D)\n{\n    int n = 8 * sizeof(UInt32);\n    UInt32_Register Q = 0; // QUOTIENT de la division\n    UInt32          R = N; // RESTE de la division\n\n    for (int i = n-1; i &gt;= 0; i--)\n    {\n        if ((R &gt;&gt; i) &gt;= D)\n        {\n            Q[i] = 1;\n            R = R - (D &lt;&lt; i);\n        }\n    }\n    return Tuple.Create((UInt32)Q, (UInt32)R);\n}\n</code></pre>\n<p>To test this code, I use following C# code</p>\n<pre class=\"lang-cs prettyprint-override\"><code>    TestDiv(75, 10);\n    TestDiv(12345678,10);\n    TestDiv(8192, 4);\n    TestDiv(8199, 4);\n    TestDiv(8199, 5);\n    \n    static void TestDiv(UInt32 N, UInt32 D)\n    {\n        Console.WriteLine(N.ToString() + &quot;:&quot; + D.ToString());\n    \n        Tuple&lt;UInt32, UInt32&gt; t32 = EuclidianDiv(N, D);\n    \n        Console.WriteLine(&quot;    Q: &quot; + t32.Item1.ToString());\n        Console.WriteLine(&quot;    R: &quot; + t32.Item2.ToString());\n    \n        if (t32.Item1 != N/D) Console.WriteLine(&quot;!&gt; Division ERROR&quot;);\n        if (t32.Item2 != N%D) Console.WriteLine(&quot;!&gt; Modulo ERROR&quot;);\n    }\n</code></pre>\n<p>that displays</p>\n<pre><code>75:10\n    Q: 7\n    R: 5\n12345678:10\n    Q: 1234567\n    R: 8\n8192:4\n    Q: 2048\n    R: 0\n8199:4\n    Q: 2049\n    R: 3\n8199:5\n    Q: 1639\n    R: 4\n</code></pre>\n", "tags": ["c#", "properties", "assign"]}
{"id": "ac619a5d-25c0-4f98-bac1-1fa053c7f1fc", "text": "Q: Finding handle for a button in the window of another program A: <p>Before I try an answer, I suggest you consider using SetWindowPos to the button so the user can decide if they want to click, if this is feasible. It's certainly less risky for another user if done this way.</p>\n<p>If another program's window already exists and is in current use, GetForegroundWindow may help because it always returns a valid window handle unless it fails. Some API calls won't return a valid handle unless the window is owned by your thread. The next paragraphs help to overcome this limit.</p>\n<p>For a newly launched program or top level window creation, try to respond to a WM_ACTIVATEAPP message in your own process, testing for the fActive flag being FALSE, which can give you (in the parameter dwThreadID) the thread that owns the new top level window as it appears.</p>\n<p>At this point you can call attachThreadInput to attach that thread to your own, which in turn lets you call GetFocus. Once you have that window handle, you can detach threads, then query the window for class==&quot;Button&quot; or whatever else you need, including GetWindowRect, in order to calculate where (or whether) to SetCursorPos... (Also, it may help to use WindowFromPoint to confirm that your calculations are pointing at the right place!)</p>\n<p>I saw a post on a VB forum that said the default button in a dialog was NOT the same as the one with focus, but I think this may be wrong, because the default button is supposed to be able to respond to the Space bar, or the Enter key, so by definition it must have keyboard focus.</p>\n<p>As someone else posted, the 'button' may be an arbitrarily drawn image! Life can get complicated... If you have a chance at getting hold of a window that fits the description of something you can use, FindWindowEx, and EnumWindows, are the best way to narrow it down, along with tests for known captions and classnames.</p>\n", "tags": ["winapi"]}
{"id": "5f4c651b-e06c-4475-a64c-5d536b206493", "text": "Q: How to restrict user interaction on Android tablet in a Flutter app A: <p>Does it block Switching to other apps and Accessing system settings/notifications?</p>\n", "tags": ["android", "flutter", "kiosk-mode"]}
