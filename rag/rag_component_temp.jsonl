{"id": "3196d85e-5861-4df9-9644-46783885302f", "text": "Q: Is there a way to apply styles to Safari only? A: <ul>\n<li>UPDATED FOR TAHOE &amp; SAFARI 26.0.1 Update (Fall 2025 Update) *</li>\n</ul>\n<p>Here are some CSS rules that can be used to apply styles to more recent versions of Safari.</p>\n<p>Note that the iOS versions of Firefox and Chrome use the Safari engine &amp; hacks, not the Chrome and Firefox ones.</p>\n<p>You should try this one first as it covers current Safari versions and is pure-Safari only:</p>\n<pre><code>This one still works properly with Safari 26.0.1 (Fall-2025):\n\n/* Safari 7.1+ */\n\n_::-webkit-full-page-media, _:future, :root .safari_only {\n\n  color:#0000FF; \n  background-color:#CCCCCC; \n\n}\n</code></pre>\n<p>And this supports feature:</p>\n<pre><code>/* Safari iOS since Safari 9 */\n\n@supports (font: -apple-system-body) { \n\n    .safari_only {\n\n        color:#0000FF; \n        background-color:#CCCCCC; \n\n    } \n\n}\n</code></pre>\n<p>If you want to target iOS this one works:</p>\n<pre><code>/* Safari iOS */\n\n@supports (-webkit-text-size-adjust:none) and (font: -apple-system-body) { \n\n    .iOS_only {\n\n        color:#0000FF; \n        background-color:#CCCCCC; \n\n    } \n\n}\n</code></pre>\n<p>If even Safari but NOT iOS this one works as well currently in 2025:</p>\n<pre><code>/* Safari NON-iOS */\n\n@supports (not (-webkit-text-size-adjust:none)) and (font: -apple-system-body) { \n\n    .safari_non_ios {\n\n        color:#0000FF; \n        background-color:#CCCCCC; \n\n    } \n\n}\n</code></pre>\n<p>To cover more versions, 6.1 and up, at this time you have to use the next pair of css hacks. The one for 6.1-10.0 to go with one that handles 10.1 and up.</p>\n<p>So then -- here is one I worked out for Safari 10.1+:</p>\n<p>The double media query is important here, don't remove it.</p>\n<pre><code>/* Safari 10.1+ */\n\n@media not all and (min-resolution:.001dpcm) { @media {\n\n    .safari_only { \n\n        color:#0000FF; \n        background-color:#CCCCCC; \n\n    }\n}}\n</code></pre>\n<p>Try this one if SCSS or other tool set has trouble with the nested media query:</p>\n<pre><code>/* Safari 10.1+ (alternate method) */\n\n@media not all and (min-resolution:.001dpcm)\n{ @supports (-webkit-appearance:none) {\n\n    .safari_only { \n\n        color:#0000FF; \n        background-color:#CCCCCC; \n\n    }\n}}\n</code></pre>\n<p>This next one works for 6.1-10.0 but not 10.1 (Late March 2017 update)</p>\n<p>This hack I created over many months of testing and experimentation by combining multiple other hacks.</p>\n<p>NOTES: like above, the double media query is NOT an accident -- it rules out many older browsers that cannot handle media query nesting. -- The missing space after one of the 'and's is important as well. This is after all, a hack... and the only one that works for 6.1 and all newer Safari versions at this time. Also be aware as listed in the comments below, the hack is non-standard css and must be applied AFTER a filter. Filters such as SASS engines will rewrite/undo or completely remove it outright.</p>\n<p>As mentioned above, please check my test page to see it working as-is (without modification!)</p>\n<p>And here is the code:</p>\n<pre><code>/* Safari 6.1-10.0 (not 10.1) */\n\n@media screen and (min-color-index:0) and(-webkit-min-device-pixel-ratio:0) \n{ @media {\n    .safari_only { \n\n        color:#0000FF; \n        background-color:#CCCCCC; \n\n    }\n}}\n</code></pre>\n<p>For more 'version specific' Safari CSS, please continue to read below.</p>\n<pre><code>/* Safari 11+ */\n\n@media not all and (min-resolution:.001dpcm)\n{ @supports (-webkit-appearance:none) and (stroke-color:transparent) {\n\n    .safari_only { \n\n        color:#0000FF; \n        background-color:#CCCCCC; \n\n    }\n}}\n</code></pre>\n<p>One for Safari 11.0:</p>\n<pre><code>/* Safari 11.0 (not 11.1) */\n\nhtml &gt;&gt; * .safari_only {\n\n  color:#0000FF; \n  background-color:#CCCCCC; \n\n}\n</code></pre>\n<p>One for Safari 10.0:</p>\n<pre><code>/* Safari 10.0 (not 10.1) */\n\n_::-webkit-:host:not(:root:root), .safari_only {\n\n  color:#0000FF; \n  background-color:#CCCCCC; \n\n}\n</code></pre>\n<p>Slightly modified works for 10.1 (only):</p>\n<pre><code>/* Safari 10.1 */\n\n@media not all and (min-resolution:.001dpcm)\n{ @supports (-webkit-appearance:none) and (not (stroke-color:transparent)) {\n\n    .safari_only { \n\n        color:#0000FF; \n        background-color:#CCCCCC; \n\n    }\n}}\n</code></pre>\n<p>Safari 10.0 (Non-iOS Devices):</p>\n<pre><code>/* Safari 10.0 (not 10.1) but not on iOS */\n\n_::-webkit-:-webkit-full-screen:host:not(:root:root), .safari_only {\n\n  color:#0000FF; \n  background-color:#CCCCCC; \n\n}\n</code></pre>\n<p>Safari 9 CSS Hacks:</p>\n<p>A simple supports feature query hack for Safari 9.0 and up:</p>\n<pre><code>@supports (-webkit-hyphens:none)\n{\n\n  .safari_only {\n    color:#0000FF; \n    background-color:#CCCCCC; \n  }\n\n}\n</code></pre>\n<p>A simple underscore hack for Safari 9.0 and up:</p>\n<pre><code>_:not(a,b), .safari_only {\n\n  color:#0000FF; \n  background-color:#CCCCCC; \n\n}\n</code></pre>\n<p>Another one for Safari 9.0 and up:</p>\n<pre><code>/* Safari 9+ */\n\n_:default:not(:root:root), .safari_only {\n\n  color:#0000FF; \n  background-color:#CCCCCC; \n\n}\n</code></pre>\n<p>and another support features query too:</p>\n<pre><code>/* Safari 9+, &lt; 13.1 */\n\n@supports (-webkit-marquee-repetition:infinite) and (object-fit:fill) {\n\n    .safari_only { \n\n        color:#0000FF; \n        background-color:#CCCCCC; \n\n    }\n}\n</code></pre>\n<p>One for Safari 9.0-10.0:</p>\n<pre><code>/* Safari 9.0-10.0 (not 10.1) */\n\n_::-webkit-:not(:root:root), .safari_only {\n\n  color:#0000FF; \n  background-color:#CCCCCC; \n\n}\n</code></pre>\n<p>Safari 9 now includes feature detection so we can use that now...</p>\n<pre><code>/* Safari 9 */\n\n@supports (overflow:-webkit-marquee) and (justify-content:inherit) \n{\n\n  .safari_only {\n    color:#0000FF; \n    background-color:#CCCCCC; \n  }\n\n}\n</code></pre>\n<p>Now to target iOS devices only. As mentioned above, since Chrome on iOS is rooted in Safari, it of course hits that one as well.\n(Note: Chrome/Edge for desktops now pick this up as well, though Safari is in version 26+ now as of Tahoe's release in 2025.)</p>\n<pre><code>/* Safari 9.0 (iOS Only) */\n\n@supports (-webkit-text-size-adjust:none) and (not (-ms-ime-align:auto))\nand (not (-moz-appearance:none))\n{\n\n  .safari_only {\n    color:#0000FF; \n    background-color:#CCCCCC; \n  }\n\n}\n</code></pre>\n<p>one for Safari 9.0+ but not iOS devices:</p>\n<pre><code>/* Safari 9+ (non-iOS) */\n\n_:default:not(:root:root), .safari_only {\n\n  color:#0000FF; \n  background-color:#CCCCCC; \n\n}\n</code></pre>\n<p>And one for Safari 9.0-10.0 but not iOS devices:</p>\n<pre><code>/* Safari 9.0-10.0 (not 10.1) (non-iOS) */\n\n_:-webkit-full-screen:not(:root:root), .safari_only {\n\n  color:#0000FF; \n  background-color:#CCCCCC; \n\n}\n</code></pre>\n<p>Below are hacks that separate 6.1-7.0, and 7.1+\nThese also required a combination of multiple hacks in order to get the right result:</p>\n<pre><code>/* Safari 6.1-7.0 */\n\n@media screen and (-webkit-min-device-pixel-ratio:0) and (min-color-index:0)\n{  \n   .safari_only {(;\n\n      color:#0000FF; \n      background-color:#CCCCCC; \n\n    );}\n}\n</code></pre>\n<p>Since I have pointed out the way to block iOS devices, here is the modified version of Safari 6.1+ hack that targets non-iOS devices:</p>\n<pre><code>/* Safari 6.1-10.0 (not 10.1) (non-iOS) */\n\n@media screen and (min-color-index:0) and(-webkit-min-device-pixel-ratio:0) \n{ @media {\n    _:-webkit-full-screen, .safari_only { \n\n        color:#0000FF; \n        background-color:#CCCCCC; \n\n    }\n}}\n</code></pre>\n<p>To use them:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=&quot;safari_only&quot;&gt;This text will be Blue in Safari&lt;/div&gt;\n</code></pre>\n<hr />\n<p><em><strong>NOTE: Filters and compilers (such as the SASS engine) expect standard 'cross-browser' code -- NOT CSS hacks like these</strong></em> which means they will rewrite, destroy or remove the hacks since that is not what hacks do. Much of this is non-standard code that has been painstakingly crafted to target single browser versions only and cannot work if they are altered. If you wish to use it with those, <em><strong>you must load your chosen CSS hack AFTER any filter or compiler</strong></em>. This may seem like a given but there has been a lot of confusion among people who do not realize that they are undoing a hack by running it through such software which was not designed for this purpose.</p>\n<hr />\n<p>Usually [like in this question] the reason people ask about Safari hacks is\nmostly in reference to separating it from Google Chrome (again NOT iOS!)\nIt may be important to post the alternative: how to target Chrome separately\nfrom Safari as well, so I am providing that for you here in case it is needed.</p>\n<p>Here are the basics, again check my test page for lots of specific versions of Chrome, but these cover Chrome in general. Chrome is version 45, Dev and Canary versions are up to version 47 at this time.</p>\n<p>My old media query combo I put on browserhacks still works just for Chrome 29+:</p>\n<pre><code>/* Chrome 29+ */\n\n@media screen and (-webkit-min-device-pixel-ratio:0) and (min-resolution:.001dpcm)\n{\n    .chrome_only {\n\n       color:#0000FF; \n       background-color:#CCCCCC; \n\n    }\n}\n</code></pre>\n<p>An @supports feature query works well for Chrome 29+ as well... a modified version of the one we were using for Chrome 28+ below. Safari 9, the coming Firefox browsers, and the Microsoft Edge browser are not picked up with this one:</p>\n<pre><code>/* Chrome 29+ */\n\n@supports (-webkit-appearance:none) and (not (overflow:-webkit-marquee))\nand (not (-ms-ime-align:auto)) and (not (-moz-appearance:none))\n{\n    .chrome_only {\n\n       color:#0000FF; \n       background-color:#CCCCCC; \n\n    }\n}\n</code></pre>\n<p>Previously, Chrome 28 and newer were easy to target. This is one I sent to browserhacks after seeing it included within a block of other CSS code (not originally intended as a CSS hack) and realized what it does, so I extracted the relevant portion for our purposes:</p>\n<p>[ NOTE: ] This older method below now pics up Safari 9 and the Microsoft Edge browser without the above update. The coming versions of Firefox and Microsoft Edge have added support for multiple -webkit- CSS codes in their programming, and both Edge and Safari 9 have added support for @supports feature detection. Chrome and Firefox included @supports previously.</p>\n<pre><code>/* Chrome 28+, Now Also Safari 9+, Firefox, and Microsoft Edge */\n\n@supports (-webkit-appearance:none) \n{\n    .chrome_and_safari {\n\n       color:#0000FF; \n       background-color:#CCCCCC; \n\n    }\n}\n</code></pre>\n<p>The block of Chrome versions 22-28 (If needed to support older versions) are also possible to target with a twist on my Safari combo hacks I posted above:</p>\n<pre><code>/* Chrome 22-28 */\n\n@media screen and(-webkit-min-device-pixel-ratio:0)\n{\n    .chrome_only {-chrome-:only(;\n\n       color:#0000FF; \n       background-color:#CCCCCC; \n\n    );}\n}\n\n/* NOTE: If you are new, change class name but leave this the same-&gt; {-chrome-:only(; */\n</code></pre>\n<p>Like the Safari CSS formatting hacks above, these can be used as follows:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=&quot;chrome_only&quot;&gt;This text will be Blue in Chrome&lt;/div&gt;\n</code></pre>\n<p>So you don't have to search for it in this post, here is my live test page:</p>\n<p><a href=\"https://browserstrangeness.bitbucket.io/css_hacks.html#safari\" rel=\"nofollow noreferrer\">https://browserstrangeness.bitbucket.io/css_hacks.html#safari</a></p>\n<p>[Or the Mirror]</p>\n<p><a href=\"https://browserstrangeness.github.io/css_hacks.html#safari\" rel=\"nofollow noreferrer\">https://browserstrangeness.github.io/css_hacks.html#safari</a></p>\n<p>The test page has many others as well, specifically version-based to further\nhelp you differentiate between Chrome and Safari, and also many hacks for Firefox, Microsoft Edge, and Internet Explorer web browsers.</p>\n", "tags": ["css", "safari"]}
{"id": "52f73ba5-4ed5-43ca-8d3c-bbd438c170de", "text": "Q: Global header and footer in HTML A: <p>&lt;meta name=&quot;google-site-verification&quot; content=&quot;5cQ3GFc122kxAHxqsC7PbPxwnlA6iNg7lXgen2N92-M&quot; /&gt;</p>\n", "tags": ["html", "header", "global", "footer"]}
{"id": "59d0254b-e8ec-411a-b68e-b34dd6e3041e", "text": "Q: How do I add a Webots speaker node? A: <p>I don't know if I understand what you want to do.</p>\n<p>If you want to play sound then you need only</p>\n<pre class=\"lang-py prettyprint-override\"><code>my_speaker = robot.getDevice('speaker')\n\nmy_speaker.playSound(\n    my_speaker,  # left channel \n    my_speaker,  # right channel\n    r&quot;D:\\Nh\u00e2n\\Sumo challenge Demo Arena only\\controllers\\music_controller&quot;,  # sound\n    0.7,   # volume\n    1.0,   # pitch\n    0.0,   # balance\n    2  # loop\n)\n</code></pre>\n<p>or using fact that <code>playSound</code> is <code>staticmethod</code></p>\n<pre class=\"lang-py prettyprint-override\"><code>from controller import Speaker\n\nmy_speaker = robot.getDevice('speaker')\n\nSpeaker.playSound(\n    my_speaker,  # left channel \n    my_speaker,  # right channel\n    r&quot;D:\\Nh\u00e2n\\Sumo challenge Demo Arena only\\controllers\\music_controller&quot;,  # sound\n    0.7,   # volume\n    1.0,   # pitch\n    0.0,   # balance\n    2  # loop\n)\n</code></pre>\n<p>Path has to be a string so it has to be in <code>&quot; &quot;</code> .</p>\n<p>Because Windows use <code>\\</code> which has special meaning in strings so it is good to add prefix <code>r</code> for <code>raw string</code> .</p>\n<hr />\n<p>Minimal working code tested with robot <a href=\"https://cyberbotics.com/doc/guide/epuck?version=R2022b\" rel=\"nofollow noreferrer\">E-puck</a> to play sound every 3 seconds.</p>\n<p>Because I use <code>Linux</code> so path has <code>/</code> instead of <code>\\</code></p>\n<pre><code>\nfrom controller import Robot\n#from controller import Speaker\n\nrobot = Robot()\n\ntimestep = int(robot.getBasicTimeStep())\n\nmy_speaker = robot.getDevice('speaker')\n\nINTERVAL = 3.0  # seconds\nnext_time = 0.0\n\n# Main loop:\nwhile robot.step(timestep) != -1:\n\n    now = robot.getTime()  # simulation time in seconds\n\n    if now &gt;= next_time:\n        print(&quot;playing sound&quot;)\n        #Speaker.playSound(\n        my_speaker.playSound(\n            my_speaker,  # left channel \n            my_speaker,  # right channel\n            &quot;/full/path/to/beep.wav&quot;,  # sound\n            1.0,   # volume\n            1.0,   # pitch\n            0.0,   # balance\n            False  # loop\n        )\n        next_time = now + INTERVAL\n</code></pre>\n<hr />\n<p><strong>Other places with example code:</strong></p>\n<p>Doc: <a href=\"https://cyberbotics.com/doc/guide/samples-devices#speaker-wbt\" rel=\"nofollow noreferrer\">Webots documentation: Devices - Speaker.wbt</a></p>\n<p>In webots: File &gt; Open Sample World ... &gt; samples &gt; devices &gt; speaker</p>\n<p>Repo: <a href=\"https://github.com/cyberbotics/webots/blob/released/projects/samples/devices/controllers/speaker/speaker.py\" rel=\"nofollow noreferrer\">webots/projects/samples/devices/controllers/speaker/speaker.py</a></p>\n", "tags": ["python", "webots", "node-speaker"]}
{"id": "c2d2a38c-45a9-4019-ba0b-ef263822db04", "text": "Q: Enable event tracing upon kernel module load A: <p>Per <a href=\"https://lwn.net/Articles/1005322/\" rel=\"nofollow noreferrer\">https://lwn.net/Articles/1005322/</a></p>\n<p>add to the linux cmdline <code>trace_event=:mod:&lt;module&gt;</code></p>\n", "tags": ["linux", "linux-kernel", "kernel-module", "ftrace"]}
{"id": "5c2c51d4-1220-46d9-8360-7e4362b7f7d9", "text": "Q: why the order of return variables affect the jax jitted function&#39;s performance so much? A: <p>I think the problem may lay in the structure of the timing code. Original code:</p>\n<pre class=\"lang-py prettyprint-override\"><code>for iter in range(N_ITERS):\n    buffer_state, model_params, key = jax.block_until_ready(\n        train_one_step_jit(key, model_params, buffer, buffer_state))  \nave_timedelta = (time.perf_counter() - start_time)/N_ITERS\n</code></pre>\n<p>The previous <code>buffer_state, model_params, key</code> is reused every iteration, but jax compiler doesn't know this point by only jitting <code>train_one_step</code>. Although It was told to donate big buffer, but somehow the order of returned vars influence the compiler's behaviour to generate inefficient code.</p>\n<p>Now I think <strong>it is better to use <code>jax.lax.scan</code> to jit the whole iteration</strong> so that the compiler realizes the fact that the carry variables continue to be updated across the iteration so that it can optimize particularly.</p>\n<p>Measuring the performance of using <code>jax.lax.scan</code> to jit the whole iteration can be tricky. In my brief test, if the <code>n_iters</code> are up to 100_000, the performance will be slightly better than the faster result in the original post. For performance I mean <code>total_time/n_iters</code>. But for <code>n_iters</code> &lt; 1000, the performance is much worse.</p>\n<pre><code>def train_one_step(train_state, buffer, unused):\n    ...\n    train_state = (buffer_state, model_params, key)\n    return train_state, None\n\ndef make_train_one_step(buffer):\n    return lambda train_state, unused: train_one_step(train_state, buffer, unused)\n    \ntrain_one_step = make_train_one_step(buffer)\ntrain_state = buffer_state, model_params, key\ntrain_state, _ = jax.jit(\n    lambda: jax.lax.scan(train_one_step, train_state, None, N_ITERS))()\ntrain_state = jax.block_until_ready(train_state)\nave_timedelta = (time.perf_counter() - start_time)/N_ITERS\n</code></pre>\n<p>I am still surprised that the order of return variable matters so much. At least it pressed that in such senario one should use <code>jax.lax.scan</code> rather than jit subfunction and for loop.</p>\n", "tags": ["python", "performance", "jit", "jax"]}
{"id": "1f0fe851-3511-46a4-9917-3f2994d9608f", "text": "Q: IPython.display does not show any image at all but &lt;IPython.core.display.Image object&gt; A: <p>Have to save the image to a file and use <code>pillow</code> to <code>show()</code> it:</p>\n<pre><code>from PIL import Image\nfrom io import BytesIO\n\npng_graph = simple_graph.get_graph().draw_mermaid_png()\nimg = Image.open(BytesIO(png_graph))\nimg.show()\n</code></pre>\n", "tags": ["python", "image", "ipython", "draw", "python-3.12"]}
{"id": "2400bafa-21b5-42b3-afa2-d938eeaaaa7c", "text": "Q: dnspython2- How can I create/edit DNS A record A: <p>Couldn't agree more with the claim that documentation is terrible. You would think that a dedicated python module for DNS would have some clear instructions on how to delete an A record for example but no. Look up exception messages and all the documentation does is list the messages with no explanation - fantastic.</p>\n", "tags": ["python", "dns", "dnspython"]}
